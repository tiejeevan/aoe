"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types */ \"(app-pages-browser)/./types.ts\");\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/geminiService */ \"(app-pages-browser)/./services/geminiService.ts\");\n/* harmony import */ var _services_dbService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/services/dbService */ \"(app-pages-browser)/./services/dbService.ts\");\n/* harmony import */ var _services_nameService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/services/nameService */ \"(app-pages-browser)/./services/nameService.ts\");\n/* harmony import */ var _components_GameUI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/GameUI */ \"(app-pages-browser)/./components/GameUI.tsx\");\n/* harmony import */ var _components_StartScreen__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/StartScreen */ \"(app-pages-browser)/./components/StartScreen.tsx\");\n/* harmony import */ var _components_LoadingScreen__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/LoadingScreen */ \"(app-pages-browser)/./components/LoadingScreen.tsx\");\n/* harmony import */ var _components_BuildPanel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/BuildPanel */ \"(app-pages-browser)/./components/BuildPanel.tsx\");\n/* harmony import */ var _components_NotificationManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/NotificationManager */ \"(app-pages-browser)/./components/NotificationManager.tsx\");\n/* harmony import */ var _components_UnitManagementPanel__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/UnitManagementPanel */ \"(app-pages-browser)/./components/UnitManagementPanel.tsx\");\n/* harmony import */ var _components_BuildingManagementPanel__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/BuildingManagementPanel */ \"(app-pages-browser)/./components/BuildingManagementPanel.tsx\");\n/* harmony import */ var _components_ResourceAssignmentPanel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/components/ResourceAssignmentPanel */ \"(app-pages-browser)/./components/ResourceAssignmentPanel.tsx\");\n/* harmony import */ var _components_CivilizationPanel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/components/CivilizationPanel */ \"(app-pages-browser)/./components/CivilizationPanel.tsx\");\n/* harmony import */ var _components_AllBuildingsPanel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/components/AllBuildingsPanel */ \"(app-pages-browser)/./components/AllBuildingsPanel.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst BUILDINGS_INFO = [\n    {\n        id: \"houses\",\n        name: \"House\",\n        description: \"Increases population capacity by 5.\",\n        cost: {\n            wood: 50\n        },\n        isUnique: false,\n        buildTime: 15\n    },\n    {\n        id: \"barracks\",\n        name: \"Barracks\",\n        description: \"Allows training of Swordsmen.\",\n        cost: {\n            wood: 150,\n            stone: 50\n        },\n        isUnique: true,\n        buildTime: 60\n    },\n    {\n        id: \"archeryRange\",\n        name: \"Archery Range\",\n        description: \"Allows training of Archers.\",\n        cost: {\n            wood: 175\n        },\n        isUnique: true,\n        buildTime: 60\n    },\n    {\n        id: \"stable\",\n        name: \"Stables\",\n        description: \"Allows training of Knights.\",\n        cost: {\n            wood: 175,\n            gold: 75\n        },\n        isUnique: true,\n        buildTime: 75\n    },\n    {\n        id: \"siegeWorkshop\",\n        name: \"Siege Workshop\",\n        description: \"Constructs powerful Catapults.\",\n        cost: {\n            wood: 200,\n            gold: 150\n        },\n        isUnique: true,\n        buildTime: 90\n    },\n    {\n        id: \"blacksmith\",\n        name: \"Blacksmith\",\n        description: \"Researches infantry and cavalry upgrades.\",\n        cost: {\n            wood: 100,\n            gold: 100\n        },\n        isUnique: true,\n        buildTime: 45\n    },\n    {\n        id: \"watchTower\",\n        name: \"Watch Tower\",\n        description: \"Provides defense against raids.\",\n        cost: {\n            stone: 125\n        },\n        isUnique: true,\n        buildTime: 45\n    },\n    {\n        id: \"townCenter\",\n        name: \"Town Center\",\n        description: \"The heart of your settlement.\",\n        cost: {},\n        isUnique: true,\n        buildTime: 0\n    }\n];\nconst UNIT_INFO = [\n    {\n        id: \"swordsman\",\n        name: \"Swordsman\",\n        description: \"Basic melee infantry.\",\n        cost: {\n            food: 60,\n            gold: 20\n        },\n        requiredBuilding: \"barracks\",\n        trainTime: 22\n    },\n    {\n        id: \"archer\",\n        name: \"Archer\",\n        description: \"Ranged unit effective against infantry.\",\n        cost: {\n            food: 30,\n            wood: 40\n        },\n        requiredBuilding: \"archeryRange\",\n        trainTime: 25\n    },\n    {\n        id: \"knight\",\n        name: \"Knight\",\n        description: \"Fast and powerful cavalry.\",\n        cost: {\n            food: 60,\n            gold: 75\n        },\n        requiredBuilding: \"stable\",\n        trainTime: 30\n    },\n    {\n        id: \"catapult\",\n        name: \"Catapult\",\n        description: \"Siege engine devastating to buildings.\",\n        cost: {\n            wood: 150,\n            gold: 150\n        },\n        requiredBuilding: \"siegeWorkshop\",\n        trainTime: 45\n    }\n];\nconst GATHER_INFO = {\n    food: {\n        rate: 10\n    },\n    wood: {\n        rate: 8\n    },\n    gold: {\n        rate: 5\n    },\n    stone: {\n        rate: 6\n    }\n};\nconst initialBuildingsState = {\n    houses: [],\n    barracks: [],\n    archeryRange: [],\n    stable: [],\n    siegeWorkshop: [],\n    blacksmith: [],\n    watchTower: [],\n    townCenter: []\n};\nconst MAP_DIMENSIONS = {\n    width: 25,\n    height: 18\n};\nconst GamePage = ()=>{\n    var _buildings_townCenter;\n    _s();\n    const [gameState, setGameState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.MENU);\n    const [civilization, setCivilization] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [resources, setResources] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        food: 200,\n        wood: 150,\n        gold: 50,\n        stone: 100\n    });\n    const [units, setUnits] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        villagers: [],\n        military: []\n    });\n    const [buildings, setBuildings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialBuildingsState);\n    const [currentAge, setCurrentAge] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"Nomadic Age\");\n    const [gameLog, setGameLog] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentEvent, setCurrentEvent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [resourceDeltas, setResourceDeltas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [activityStatus, setActivityStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"Your story begins...\");\n    const [notifications, setNotifications] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [unlimitedResources, setUnlimitedResources] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [allSaves, setAllSaves] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentSaveName, setCurrentSaveName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [playerAction, setPlayerAction] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [activeTasks, setActiveTasks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [resourceNodes, setResourceNodes] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Panel States\n    const [buildPanelState, setBuildPanelState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        villagerId: null,\n        anchorRect: null\n    });\n    const [unitManagementPanel, setUnitManagementPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        type: null,\n        anchorRect: null\n    });\n    const [buildingManagementPanel, setBuildingManagementPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        type: null,\n        anchorRect: null\n    });\n    const [allBuildingsPanel, setAllBuildingsPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        anchorRect: null\n    });\n    const [assignmentPanelState, setAssignmentPanelState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        targetId: null,\n        targetType: null,\n        anchorRect: null\n    });\n    const [civPanelState, setCivPanelState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        anchorRect: null\n    });\n    const deltaTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    const eventTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const population = {\n        current: units.villagers.length + units.military.length,\n        capacity: (((_buildings_townCenter = buildings.townCenter) === null || _buildings_townCenter === void 0 ? void 0 : _buildings_townCenter.length) > 0 ? 20 : 0) + buildings.houses.length * 5\n    };\n    const fetchSaves = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        const names = await (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.getAllSaveNames)();\n        setAllSaves(names);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        fetchSaves();\n    }, [\n        fetchSaves\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (gameState === _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING && civilization && currentSaveName) {\n            const fullState = {\n                civilization,\n                resources,\n                units,\n                buildings,\n                currentAge,\n                gameLog,\n                activeTasks,\n                resourceNodes\n            };\n            (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.saveGameState)(currentSaveName, fullState);\n        }\n    }, [\n        civilization,\n        resources,\n        units,\n        buildings,\n        currentAge,\n        gameLog,\n        gameState,\n        currentSaveName,\n        activeTasks,\n        resourceNodes\n    ]);\n    const addNotification = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message)=>{\n        const id = \"\".concat(Date.now(), \"-\").concat(Math.random());\n        setNotifications((prev)=>[\n                ...prev,\n                {\n                    id,\n                    message\n                }\n            ]);\n    }, []);\n    const removeNotification = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setNotifications((prev)=>prev.filter((n)=>n.id !== id));\n    }, []);\n    const addToLog = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message, icon)=>{\n        setGameLog((prev)=>[\n                {\n                    id: \"\".concat(Date.now(), \"-\").concat(Math.random()),\n                    message,\n                    icon\n                },\n                ...prev.slice(0, 19)\n            ]);\n    }, []);\n    const updateResources = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((deltas)=>{\n        setResources((prev)=>{\n            const newResources = {\n                ...prev\n            };\n            for(const key in deltas){\n                const resourceKey = key;\n                var _deltas_resourceKey;\n                newResources[resourceKey] = Math.max(0, newResources[resourceKey] + ((_deltas_resourceKey = deltas[resourceKey]) !== null && _deltas_resourceKey !== void 0 ? _deltas_resourceKey : 0));\n            }\n            return newResources;\n        });\n        setResourceDeltas((prev)=>({\n                ...prev,\n                ...deltas\n            }));\n        for(const key in deltas){\n            const resourceKey = key;\n            if (deltaTimeoutRef.current[resourceKey]) {\n                window.clearTimeout(deltaTimeoutRef.current[resourceKey]);\n            }\n            deltaTimeoutRef.current[resourceKey] = window.setTimeout(()=>{\n                setResourceDeltas((prev)=>{\n                    const newDeltas = {\n                        ...prev\n                    };\n                    delete newDeltas[resourceKey];\n                    return newDeltas;\n                });\n            }, 1500);\n        }\n    }, []);\n    const handleTaskCompletion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((task)=>{\n        switch(task.type){\n            case \"build\":\n                {\n                    const { buildingType, villagerIds, position } = task.payload;\n                    const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === buildingType);\n                    const [name] = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"building\", 1);\n                    const newBuilding = {\n                        id: task.id,\n                        name,\n                        position: position\n                    };\n                    setBuildings((p)=>({\n                            ...p,\n                            [buildingType]: [\n                                ...p[buildingType],\n                                newBuilding\n                            ]\n                        }));\n                    if (villagerIds && villagerIds.length > 0) {\n                        addToLog(\"\".concat(villagerIds.length, \" builder(s) have constructed \").concat(name, \", a new \").concat(buildingInfo.name, \".\"), buildingType);\n                        setActivityStatus(\"Construction of \".concat(name, \" is complete.\"));\n                    }\n                    break;\n                }\n            case \"gather\":\n                {\n                    break;\n                }\n            case \"train_villager\":\n                {\n                    const { count } = task.payload;\n                    const newVillagerNames = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"villager\", count);\n                    const newVillagers = newVillagerNames.map((name)=>({\n                            id: \"\".concat(Date.now(), \"-\").concat(name),\n                            name\n                        }));\n                    setUnits((p)=>({\n                            ...p,\n                            villagers: [\n                                ...p.villagers,\n                                ...newVillagers\n                            ]\n                        }));\n                    addToLog(\"\".concat(count, \" new villager(s) have joined your settlement.\"), \"villager\");\n                    setActivityStatus(\"\".concat(count, \" new villager(s) are ready to work.\"));\n                    break;\n                }\n            case \"train_military\":\n                {\n                    const { unitType, count } = task.payload;\n                    const unitInfo = UNIT_INFO.find((u)=>u.id === unitType);\n                    const newUnitNames = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"soldier\", count);\n                    const newUnits = newUnitNames.map((name)=>({\n                            id: \"\".concat(Date.now(), \"-\").concat(unitType, \"-\").concat(name),\n                            name,\n                            title: \"\",\n                            unitType: unitType\n                        }));\n                    setUnits((p)=>({\n                            ...p,\n                            military: [\n                                ...p.military,\n                                ...newUnits\n                            ]\n                        }));\n                    addToLog(\"\".concat(count, \" \").concat(unitInfo.name, \"(s) have been trained.\"), unitType);\n                    setActivityStatus(\"\".concat(count, \" new \").concat(unitInfo.name, \"(s) are ready for battle.\"));\n                    break;\n                }\n            case \"advance_age\":\n                {\n                    const ageResult = (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_3__.getPredefinedAge)(currentAge);\n                    setCurrentAge(ageResult.nextAgeName);\n                    addToLog(\"You have advanced to the \".concat(ageResult.nextAgeName, \"!\"), \"age\");\n                    addToLog(ageResult.description, \"age\");\n                    setActivityStatus(\"Welcome to the \".concat(ageResult.nextAgeName, \"!\"));\n                    break;\n                }\n        }\n    }, [\n        currentAge,\n        addToLog\n    ]);\n    // Game Loop\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (gameState !== _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING) return;\n        const gameLoop = setInterval(()=>{\n            const now = Date.now();\n            let completedTasks = [];\n            let resourceDeltasThisTick = {};\n            const stillActiveTasks = activeTasks.map((task)=>{\n                if (now >= task.startTime + task.duration) {\n                    completedTasks.push(task);\n                    return null;\n                }\n                if (task.type === \"gather\") {\n                    var _task_payload_villagerIds, _task_payload;\n                    const node = resourceNodes.find((n)=>{\n                        var _task_payload;\n                        return n.id === ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : _task_payload.resourceNodeId);\n                    });\n                    const villagerCount = ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : (_task_payload_villagerIds = _task_payload.villagerIds) === null || _task_payload_villagerIds === void 0 ? void 0 : _task_payload_villagerIds.length) || 0;\n                    if (!node || villagerCount === 0) {\n                        completedTasks.push(task); // Orphaned or empty gather task, mark for removal\n                        return null;\n                    }\n                    const gatherRatePerVillagerPerSecond = GATHER_INFO[node.type].rate;\n                    const amountGatheredThisTick = gatherRatePerVillagerPerSecond * villagerCount;\n                    resourceDeltasThisTick[node.type] = (resourceDeltasThisTick[node.type] || 0) + amountGatheredThisTick;\n                }\n                return task;\n            }).filter(Boolean);\n            // Update resource nodes separately to avoid race conditions with state\n            if (Object.keys(resourceDeltasThisTick).length > 0) {\n                setResources((prevRes)=>{\n                    const newResources = {\n                        ...prevRes\n                    };\n                    for(const key in resourceDeltasThisTick){\n                        const resKey = key;\n                        newResources[resKey] += resourceDeltasThisTick[resKey];\n                    }\n                    return newResources;\n                });\n                setResourceNodes((prevNodes)=>{\n                    const newNodes = prevNodes.map((node)=>{\n                        const amountToDecrement = resourceDeltasThisTick[node.type];\n                        if (amountToDecrement) {\n                            const newAmount = node.amount - amountToDecrement;\n                            if (newAmount <= 0) {\n                                addToLog(\"\".concat(node.assignedVillagers.length, \" villager(s) depleted a \").concat(node.type, \" source, gaining \").concat(Math.floor(node.amount), \" \").concat(node.type, \".\"), node.type);\n                                setActivityStatus(\"A \".concat(node.type, \" source has been fully depleted.\"));\n                                const gatherTask = stillActiveTasks.find((t)=>{\n                                    var _t_payload;\n                                    return t.type === \"gather\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.resourceNodeId) === node.id;\n                                });\n                                if (gatherTask) completedTasks.push(gatherTask);\n                                return null;\n                            }\n                            return {\n                                ...node,\n                                amount: newAmount\n                            };\n                        }\n                        return node;\n                    }).filter(Boolean);\n                    return newNodes;\n                });\n            }\n            const finalActiveTasks = stillActiveTasks.filter((t)=>!completedTasks.some((ct)=>ct.id === t.id));\n            setActiveTasks(finalActiveTasks);\n            if (completedTasks.length > 0) {\n                completedTasks.forEach(handleTaskCompletion);\n            }\n        }, 1000);\n        return ()=>clearInterval(gameLoop);\n    }, [\n        gameState,\n        activeTasks,\n        resourceNodes,\n        handleTaskCompletion,\n        addToLog\n    ]);\n    const handleNewEvent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        // Events should not trigger if a major task (build, train, advance age) is in progress.\n        // Gathering resources is a background task and should not block events.\n        const majorTaskInProgress = activeTasks.some((t)=>t.type !== \"gather\");\n        if (!civilization || currentEvent || majorTaskInProgress) return;\n        addToLog(\"A new chapter unfolds...\", \"event\");\n        const event = (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_3__.getPredefinedGameEvent)();\n        setCurrentEvent(event);\n        setActivityStatus(\"A new event requires your attention!\");\n    }, [\n        civilization,\n        currentEvent,\n        activeTasks,\n        addToLog\n    ]);\n    const scheduleNextEvent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (eventTimerRef.current) {\n            clearTimeout(eventTimerRef.current);\n        }\n        const nextEventTime = (45 + Math.random() * 45) * 1000; // 45-90 seconds\n        eventTimerRef.current = setTimeout(()=>handleNewEvent(), nextEventTime);\n    }, [\n        handleNewEvent\n    ]);\n    const generateResourceNodes = (existingPositions)=>{\n        const nodes = [];\n        const types = [\n            \"food\",\n            \"wood\",\n            \"gold\",\n            \"stone\"\n        ];\n        const numNodes = 20 + Math.floor(Math.random() * 10);\n        for(let i = 0; i < numNodes; i++){\n            let pos;\n            do {\n                pos = {\n                    x: Math.floor(Math.random() * MAP_DIMENSIONS.width),\n                    y: Math.floor(Math.random() * MAP_DIMENSIONS.height)\n                };\n            }while (existingPositions.has(\"\".concat(pos.x, \",\").concat(pos.y)));\n            existingPositions.add(\"\".concat(pos.x, \",\").concat(pos.y));\n            const type = types[Math.floor(Math.random() * types.length)];\n            const amount = Math.floor(Math.random() * (2500 - 500 + 1)) + 500;\n            nodes.push({\n                id: \"\".concat(Date.now(), \"-node-\").concat(i),\n                type,\n                position: pos,\n                amount,\n                assignedVillagers: []\n            });\n        }\n        return nodes;\n    };\n    const handleStartNewGame = (saveName)=>{\n        if (allSaves.includes(saveName)) {\n            addNotification('A saga named \"'.concat(saveName, '\" already exists.'));\n            return;\n        }\n        setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.LOADING);\n        setCurrentSaveName(saveName);\n        const civ = (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_3__.getPredefinedCivilization)();\n        setCivilization(civ);\n        setResources({\n            food: 200,\n            wood: 150,\n            gold: 50,\n            stone: 100\n        });\n        const initialVillagerNames = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"villager\", 3);\n        const initialVillagers = initialVillagerNames.map((name)=>({\n                id: \"\".concat(Date.now(), \"-\").concat(name),\n                name\n            }));\n        setUnits({\n            villagers: initialVillagers,\n            military: []\n        });\n        const [initialTCName] = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"building\", 1);\n        const tcPosition = {\n            x: Math.floor(MAP_DIMENSIONS.width / 2),\n            y: Math.floor(MAP_DIMENSIONS.height / 2)\n        };\n        const initialTC = {\n            id: \"\".concat(Date.now(), \"-tc\"),\n            name: initialTCName,\n            position: tcPosition\n        };\n        setBuildings({\n            ...initialBuildingsState,\n            townCenter: [\n                initialTC\n            ]\n        });\n        setResourceNodes(generateResourceNodes(new Set([\n            \"\".concat(tcPosition.x, \",\").concat(tcPosition.y)\n        ])));\n        setCurrentAge(\"Nomadic Age\");\n        setGameLog([]);\n        setCurrentEvent(null);\n        setUnlimitedResources(false);\n        setActiveTasks([]);\n        addToLog(\"\".concat(civ.name, \" has been founded!\"), \"system\");\n        addToLog(\"Your story begins...\", \"system\");\n        setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING);\n        setActivityStatus(\"Your settlement awaits your command.\");\n        fetchSaves();\n    };\n    const getVillagerTaskDetails = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((villagerId)=>{\n        const task = activeTasks.find((t)=>{\n            var _t_payload_villagerIds, _t_payload;\n            return (_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : (_t_payload_villagerIds = _t_payload.villagerIds) === null || _t_payload_villagerIds === void 0 ? void 0 : _t_payload_villagerIds.includes(villagerId);\n        });\n        if (task) {\n            if (task.type === \"build\") {\n                const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === task.payload.buildingType);\n                return \"Busy: Constructing \".concat((buildingInfo === null || buildingInfo === void 0 ? void 0 : buildingInfo.name) || \"a building\");\n            }\n            if (task.type === \"gather\") {\n                const node = resourceNodes.find((n)=>n.id === task.payload.resourceNodeId);\n                return \"Busy: Gathering \".concat((node === null || node === void 0 ? void 0 : node.type) || \"resources\");\n            }\n        }\n        return \"Idle\";\n    }, [\n        activeTasks,\n        resourceNodes\n    ]);\n    const isVillagerBusy = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((villagerId)=>{\n        return getVillagerTaskDetails(villagerId) !== \"Idle\";\n    }, [\n        getVillagerTaskDetails\n    ]);\n    const handleResumeGame = async (saveName)=>{\n        const savedState = await (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.loadGameState)(saveName);\n        if (savedState) {\n            var _savedState_units;\n            setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.LOADING);\n            setCurrentSaveName(saveName);\n            setCivilization(savedState.civilization);\n            setResources(savedState.resources);\n            if ((_savedState_units = savedState.units) === null || _savedState_units === void 0 ? void 0 : _savedState_units.soldiers) {\n                const migratedMilitary = savedState.units.soldiers.map((s)=>({\n                        ...s,\n                        unitType: \"swordsman\"\n                    }));\n                setUnits({\n                    villagers: savedState.units.villagers || [],\n                    military: migratedMilitary\n                });\n            } else {\n                setUnits(savedState.units || {\n                    villagers: [],\n                    military: []\n                });\n            }\n            let finalBuildings = {\n                ...initialBuildingsState,\n                ...savedState.buildings || {}\n            };\n            const constructionTasks = (savedState.activeTasks || []).filter((t)=>t.type === \"build\");\n            const occupiedCells = new Set([\n                ...Object.values(finalBuildings).flat().map((b)=>\"\".concat(b.position.x, \",\").concat(b.position.y)),\n                ...constructionTasks.map((t)=>\"\".concat(t.payload.position.x, \",\").concat(t.payload.position.y))\n            ]);\n            if (!finalBuildings.townCenter || finalBuildings.townCenter.length === 0) {\n                let tcPos = {\n                    x: 10,\n                    y: 5\n                };\n                while(occupiedCells.has(\"\".concat(tcPos.x, \",\").concat(tcPos.y))){\n                    tcPos.x++;\n                }\n                const [tcName] = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"building\", 1);\n                finalBuildings.townCenter = [\n                    {\n                        id: \"\".concat(Date.now(), \"-tc\"),\n                        name: tcName,\n                        position: tcPos\n                    }\n                ];\n                occupiedCells.add(\"\".concat(tcPos.x, \",\").concat(tcPos.y));\n            }\n            const firstBuilding = Object.values(finalBuildings).flat()[0];\n            if (firstBuilding && typeof firstBuilding === \"object\" && !(\"position\" in firstBuilding)) {\n                const migrated = {\n                    ...initialBuildingsState\n                };\n                let y = 3;\n                Object.entries(finalBuildings).forEach((param)=>{\n                    let [type, instances] = param;\n                    let x = 5;\n                    instances.forEach((inst)=>{\n                        while(occupiedCells.has(\"\".concat(x, \",\").concat(y))){\n                            x++;\n                        }\n                        migrated[type].push({\n                            ...inst,\n                            position: {\n                                x,\n                                y\n                            }\n                        });\n                        occupiedCells.add(\"\".concat(x, \",\").concat(y));\n                        x++;\n                    });\n                });\n                finalBuildings = migrated;\n            }\n            setBuildings(finalBuildings);\n            const nodesToSet = (savedState.resourceNodes || []).map((n)=>({\n                    ...n,\n                    assignedVillagers: n.assignedVillagers || []\n                }));\n            if (nodesToSet.length === 0) {\n                setResourceNodes(generateResourceNodes(occupiedCells));\n            } else {\n                setResourceNodes(nodesToSet);\n            }\n            setCurrentAge(savedState.currentAge);\n            setGameLog(savedState.gameLog);\n            const migratedTasks = (savedState.activeTasks || []).map((t)=>{\n                var _t_payload;\n                if (t.type === \"build\" && !((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.villagerIds)) {\n                    return {\n                        ...t,\n                        payload: {\n                            ...t.payload,\n                            villagerIds: []\n                        }\n                    };\n                }\n                return t;\n            });\n            setActiveTasks(migratedTasks);\n            setCurrentEvent(null);\n            setActivityStatus(\"Welcome back to your saga.\");\n            setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING);\n        } else {\n            addNotification('Could not find a saved game named \"'.concat(saveName, '\".'));\n        }\n    };\n    // Event Trigger Timer\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (gameState !== _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING) return;\n        const majorTaskInProgress = activeTasks.some((t)=>t.type !== \"gather\");\n        if (!currentEvent && !playerAction && !majorTaskInProgress) {\n            scheduleNextEvent();\n        } else if (eventTimerRef.current) {\n            clearTimeout(eventTimerRef.current);\n        }\n        return ()=>{\n            if (eventTimerRef.current) {\n                clearTimeout(eventTimerRef.current);\n            }\n        };\n    }, [\n        gameState,\n        currentEvent,\n        playerAction,\n        activeTasks,\n        scheduleNextEvent\n    ]);\n    const handleEventChoice = (choice)=>{\n        addToLog('Decision: \"'.concat(choice.text, '\"'), \"event\");\n        // 1. Check and apply cost\n        if (choice.cost) {\n            const missingRes = [];\n            for(const key in choice.cost){\n                const resKey = key;\n                if (resources[resKey] < (choice.cost[resKey] || 0)) {\n                    missingRes.push(resKey);\n                }\n            }\n            if (missingRes.length > 0) {\n                addNotification(\"You lack the required resources: \".concat(missingRes.join(\", \"), \".\"));\n                return;\n            }\n            const negativeCost = {};\n            for(const key in choice.cost){\n                const resKey = key;\n                negativeCost[resKey] = -(choice.cost[resKey] || 0);\n            }\n            updateResources(negativeCost);\n        }\n        // 2. Determine success\n        const isSuccess = choice.successChance === undefined || Math.random() < choice.successChance;\n        const effects = isSuccess ? choice.successEffects : choice.failureEffects;\n        if (!effects) {\n            setCurrentEvent(null);\n            scheduleNextEvent();\n            return;\n        }\n        // 3. Calculate resource change\n        let amount = 0;\n        if (Array.isArray(effects.amount)) {\n            const [min, max] = effects.amount;\n            amount = Math.floor(Math.random() * (max - min + 1)) + min;\n        } else {\n            amount = effects.amount;\n        }\n        // 4. Apply effects\n        if (effects.resource !== \"none\" && amount !== 0) {\n            updateResources({\n                [effects.resource]: amount\n            });\n        }\n        // 5. Log and update UI\n        addToLog(effects.log, effects.resource !== \"none\" ? effects.resource : \"system\");\n        setActivityStatus(effects.log);\n        setCurrentEvent(null);\n        scheduleNextEvent();\n    };\n    const handleInitiateBuild = (villagerId, rect)=>{\n        if (isVillagerBusy(villagerId)) {\n            addNotification(\"This villager is already busy.\");\n            return;\n        }\n        setBuildPanelState({\n            isOpen: true,\n            villagerId,\n            anchorRect: rect\n        });\n        setUnitManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleStartPlacement = (buildingId)=>{\n        const villagerId = buildPanelState.villagerId;\n        if (!villagerId) return;\n        const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === buildingId);\n        if (!buildingInfo) return;\n        const isAlreadyConstructing = activeTasks.some((t)=>{\n            var _t_payload;\n            return t.type === \"build\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.buildingType) === buildingInfo.id;\n        });\n        if (buildingInfo.isUnique && (buildings[buildingInfo.id].length > 0 || isAlreadyConstructing)) {\n            addNotification(\"You can only build one \".concat(buildingInfo.name, \".\"));\n            return;\n        }\n        const cost = buildingInfo.cost;\n        if (!unlimitedResources) {\n            const missing = [];\n            for(const res in cost){\n                const resourceKey = res;\n                var _cost_resourceKey;\n                if (resources[resourceKey] < ((_cost_resourceKey = cost[resourceKey]) !== null && _cost_resourceKey !== void 0 ? _cost_resourceKey : 0)) {\n                    var _cost_resourceKey1;\n                    missing.push(\"\".concat(((_cost_resourceKey1 = cost[resourceKey]) !== null && _cost_resourceKey1 !== void 0 ? _cost_resourceKey1 : 0) - resources[resourceKey], \" \").concat(resourceKey));\n                }\n            }\n            if (missing.length > 0) {\n                addNotification(\"Need \".concat(missing.join(\" and \"), \".\"));\n                return;\n            }\n        }\n        setPlayerAction({\n            mode: \"build\",\n            buildingType: buildingId,\n            villagerId\n        });\n        setBuildPanelState({\n            isOpen: false,\n            villagerId: null,\n            anchorRect: null\n        });\n        setActivityStatus(\"Select a location to build a \".concat(buildingInfo.name, \". Right-click to cancel.\"));\n    };\n    const handleConfirmPlacement = (position)=>{\n        if ((playerAction === null || playerAction === void 0 ? void 0 : playerAction.mode) !== \"build\") return;\n        const { buildingType, villagerId } = playerAction;\n        const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === buildingType);\n        const builder = units.villagers.find((v)=>v.id === villagerId);\n        if (!buildingInfo || !builder) return;\n        if (!unlimitedResources) {\n            const cost = buildingInfo.cost;\n            const negativeCost = {};\n            for(const resource in cost){\n                negativeCost[resource] = -(cost[resource] || 0);\n            }\n            updateResources(negativeCost);\n        }\n        const buildTime = buildingInfo.buildTime * 1000;\n        const taskId = \"\".concat(Date.now(), \"-build-\").concat(buildingType);\n        const taskPayload = {\n            buildingType,\n            villagerIds: [\n                villagerId\n            ],\n            position\n        };\n        if (unlimitedResources) {\n            handleTaskCompletion({\n                id: taskId,\n                type: \"build\",\n                startTime: 0,\n                duration: 0,\n                payload: {\n                    ...taskPayload,\n                    position\n                }\n            });\n        } else {\n            const newTask = {\n                id: taskId,\n                type: \"build\",\n                startTime: Date.now(),\n                duration: buildTime,\n                payload: taskPayload\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"\".concat(builder.name, \" has started constructing a \").concat(buildingInfo.name, \".\"));\n            addToLog(\"\".concat(builder.name, \" began construction of a new \").concat(buildingInfo.name, \".\"), buildingType);\n        }\n        setPlayerAction(null);\n    };\n    const handleCancelPlayerAction = ()=>{\n        setPlayerAction(null);\n        setActivityStatus(\"Command cancelled.\");\n    };\n    const handleDemolishBuilding = (type, id)=>{\n        var _buildings_townCenter;\n        if (activeTasks.some((t)=>{\n            var _t_payload;\n            return ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.buildingId) === id;\n        })) {\n            addNotification(\"Cannot demolish a building with an active task.\");\n            return;\n        }\n        const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === type);\n        const buildingInstance = buildings[type].find((b)=>b.id === id);\n        if (!buildingInfo || !buildingInstance) return;\n        if (type === \"houses\" && population.current > (((_buildings_townCenter = buildings.townCenter) === null || _buildings_townCenter === void 0 ? void 0 : _buildings_townCenter.length) > 0 ? 20 : 0) + (buildings.houses.length - 1) * 5) {\n            addNotification(\"Cannot demolish this house, your people would be homeless.\");\n            return;\n        }\n        const refund = {};\n        let refundMessageParts = [];\n        for(const res in buildingInfo.cost){\n            const resourceKey = res;\n            const cost = buildingInfo.cost[resourceKey] || 0;\n            const amount = Math.floor(cost * 0.5);\n            if (amount > 0) {\n                refund[resourceKey] = amount;\n                refundMessageParts.push(\"\".concat(amount, \" \").concat(resourceKey));\n            }\n        }\n        updateResources(refund);\n        setBuildings((prev)=>({\n                ...prev,\n                [type]: prev[type].filter((b)=>b.id !== id)\n            }));\n        addToLog(\"\".concat(buildingInstance.name, \" (\").concat(buildingInfo.name, \") was demolished.\"), type);\n        if (refundMessageParts.length > 0) {\n            addNotification(\"Salvaged \".concat(refundMessageParts.join(\", \"), \".\"));\n        }\n        setBuildingManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleUpdateBuilding = (type, id, name)=>{\n        setBuildings((prev)=>({\n                ...prev,\n                [type]: prev[type].map((b)=>b.id === id ? {\n                        ...b,\n                        name\n                    } : b)\n            }));\n        addNotification(\"Building renamed.\");\n    };\n    const handleTrainVillagers = (count)=>{\n        var _buildings_townCenter;\n        if (activeTasks.some((t)=>t.type === \"train_villager\") || count <= 0) return;\n        const villagerCost = 50;\n        const totalCost = villagerCost * count;\n        if (population.current + count > population.capacity) {\n            addNotification(\"Need space for \".concat(count, \" more villagers.\"));\n            return;\n        }\n        const townCenter = (_buildings_townCenter = buildings.townCenter) === null || _buildings_townCenter === void 0 ? void 0 : _buildings_townCenter[0];\n        if (!townCenter) {\n            addNotification(\"No Town Center to train villagers.\");\n            return;\n        }\n        if (!unlimitedResources) {\n            if (resources.food < totalCost) {\n                addNotification(\"Need \".concat(totalCost - resources.food, \" more Food.\"));\n                return;\n            }\n            updateResources({\n                food: -totalCost\n            });\n        }\n        const trainTime = 10000 * count; // 10s per villager\n        if (unlimitedResources) {\n            handleTaskCompletion({\n                id: \"instant\",\n                type: \"train_villager\",\n                startTime: 0,\n                duration: 0,\n                payload: {\n                    count\n                }\n            });\n        } else {\n            const taskId = \"\".concat(Date.now(), \"-train-villager\");\n            const newTask = {\n                id: taskId,\n                type: \"train_villager\",\n                startTime: Date.now(),\n                duration: trainTime,\n                payload: {\n                    count,\n                    buildingId: townCenter.id\n                }\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"Training \".concat(count, \" villager(s)...\"));\n            addToLog(\"Began training \".concat(count, \" new villager(s).\"), \"villager\");\n        }\n        setBuildingManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleTrainUnits = (unitType, count)=>{\n        var _buildings_unitInfo_requiredBuilding;\n        const unitInfo = UNIT_INFO.find((u)=>u.id === unitType);\n        if (!unitInfo || activeTasks.some((t)=>{\n            var _t_payload;\n            return ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.unitType) === unitType;\n        }) || count <= 0) return;\n        if (population.current + count > population.capacity) {\n            addNotification(\"Need space for \".concat(count, \" more units.\"));\n            return;\n        }\n        const trainingBuilding = (_buildings_unitInfo_requiredBuilding = buildings[unitInfo.requiredBuilding]) === null || _buildings_unitInfo_requiredBuilding === void 0 ? void 0 : _buildings_unitInfo_requiredBuilding[0];\n        if (!trainingBuilding) {\n            addNotification(\"No \".concat(unitInfo.requiredBuilding, \" to train units.\"));\n            return;\n        }\n        if (!unlimitedResources) {\n            const totalCost = {};\n            const missing = [];\n            for(const res in unitInfo.cost){\n                const resourceKey = res;\n                const cost = (unitInfo.cost[resourceKey] || 0) * count;\n                totalCost[resourceKey] = -cost;\n                if (resources[resourceKey] < cost) missing.push(\"\".concat(cost - resources[resourceKey], \" \").concat(resourceKey));\n            }\n            if (missing.length > 0) {\n                addNotification(\"Need \".concat(missing.join(\" and \"), \".\"));\n                return;\n            }\n            updateResources(totalCost);\n        }\n        const trainTime = unitInfo.trainTime * 1000 * count;\n        if (unlimitedResources) {\n            handleTaskCompletion({\n                id: \"instant\",\n                type: \"train_military\",\n                startTime: 0,\n                duration: 0,\n                payload: {\n                    unitType,\n                    count\n                }\n            });\n        } else {\n            const taskId = \"\".concat(Date.now(), \"-train-\").concat(unitType);\n            const newTask = {\n                id: taskId,\n                type: \"train_military\",\n                startTime: Date.now(),\n                duration: trainTime,\n                payload: {\n                    unitType,\n                    count,\n                    buildingId: trainingBuilding.id\n                }\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"Training \".concat(count, \" \").concat(unitInfo.name, \"(s)...\"));\n            addToLog(\"Began training \".concat(count, \" new \").concat(unitInfo.name, \"(s).\"), unitType);\n        }\n        setBuildingManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleDismissSpecificUnit = (type, id)=>{\n        if (type === \"villagers\" && isVillagerBusy(id)) {\n            addNotification(\"Cannot dismiss a busy villager.\");\n            return;\n        }\n        const unit = units[type].find((u)=>u.id === id);\n        if (!unit) return;\n        if (type === \"villagers\" && units.villagers.length <= 1) {\n            addNotification(\"Cannot dismiss your last villager.\");\n            return;\n        }\n        setUnits((prev)=>({\n                ...prev,\n                [type]: prev[type].filter((u)=>u.id !== id)\n            }));\n        const unitTypeName = type === \"villagers\" ? \"villager\" : unit.unitType;\n        addToLog(\"\".concat(unit.name, \" the \").concat(unitTypeName, \" has been dismissed.\"), type === \"villagers\" ? \"villager\" : unit.unitType);\n        addNotification(\"\".concat(unit.name, \" was dismissed.\"));\n    };\n    const handleUpdateUnit = (type, id, name, title)=>{\n        setUnits((prev)=>({\n                ...prev,\n                [type]: prev[type].map((u)=>{\n                    if (u.id === id) {\n                        const updatedUnit = {\n                            ...u,\n                            name\n                        };\n                        if (type === \"military\" && title !== undefined) {\n                            updatedUnit.title = title;\n                        }\n                        return updatedUnit;\n                    }\n                    return u;\n                })\n            }));\n        addNotification(\"Unit updated.\");\n    };\n    const handleAssignVillagersToNode = (nodeId, count)=>{\n        const idleVillagers = units.villagers.filter((v)=>!isVillagerBusy(v.id));\n        if (count <= 0) return;\n        let cappedCount = Math.min(count, idleVillagers.length);\n        if (cappedCount === 0) {\n            addNotification(\"No idle villagers available.\");\n            return;\n        }\n        const villagersToAssign = idleVillagers.slice(0, cappedCount);\n        const villagerIdsToAssign = villagersToAssign.map((v)=>v.id);\n        const targetNode = resourceNodes.find((n)=>n.id === nodeId);\n        if (!targetNode) return;\n        setResourceNodes((prevNodes)=>prevNodes.map((n)=>n.id === nodeId ? {\n                    ...n,\n                    assignedVillagers: [\n                        ...new Set([\n                            ...n.assignedVillagers,\n                            ...villagerIdsToAssign\n                        ])\n                    ]\n                } : n));\n        if (unlimitedResources) {\n            updateResources({\n                [targetNode.type]: targetNode.amount\n            });\n            addToLog(\"\".concat(cappedCount, \" villager(s) instantly gathered \").concat(Math.floor(targetNode.amount), \" \").concat(targetNode.type, \".\"), targetNode.type);\n            setResourceNodes((prev)=>prev.filter((n)=>n.id !== nodeId));\n        } else {\n            const existingTask = activeTasks.find((t)=>{\n                var _t_payload;\n                return t.type === \"gather\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.resourceNodeId) === nodeId;\n            });\n            if (existingTask) {\n                setActiveTasks((prev)=>prev.map((t)=>t.id === existingTask.id ? {\n                            ...t,\n                            payload: {\n                                ...t.payload,\n                                villagerIds: [\n                                    ...new Set([\n                                        ...t.payload.villagerIds,\n                                        ...villagerIdsToAssign\n                                    ])\n                                ]\n                            }\n                        } : t));\n            } else {\n                const newTask = {\n                    id: \"gather-\".concat(nodeId),\n                    type: \"gather\",\n                    startTime: Date.now(),\n                    duration: 86400000,\n                    payload: {\n                        resourceNodeId: nodeId,\n                        villagerIds: villagerIdsToAssign\n                    }\n                }; // Duration is arbitrary, loop handles completion\n                setActiveTasks((prev)=>[\n                        ...prev,\n                        newTask\n                    ]);\n            }\n        }\n        addToLog(\"\".concat(cappedCount, \" villager(s) assigned to gather \").concat(targetNode.type, \".\"), targetNode.type);\n        setActivityStatus(\"\".concat(cappedCount, \" villager(s) are now gathering \").concat(targetNode.type, \".\"));\n        setAssignmentPanelState({\n            isOpen: false,\n            targetId: null,\n            targetType: null,\n            anchorRect: null\n        });\n    };\n    const handleRecallVillagers = (targetId, count, type)=>{\n        if (type === \"resource\") {\n            const node = resourceNodes.find((n)=>n.id === targetId);\n            if (!node || (node.assignedVillagers || []).length < count) return;\n            const villagersToRecall = node.assignedVillagers.slice(node.assignedVillagers.length - count);\n            setResourceNodes((prev)=>prev.map((n)=>n.id === targetId ? {\n                        ...n,\n                        assignedVillagers: n.assignedVillagers.filter((id)=>!villagersToRecall.includes(id))\n                    } : n));\n            setActiveTasks((prev)=>{\n                const taskIndex = prev.findIndex((t)=>{\n                    var _t_payload;\n                    return t.type === \"gather\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.resourceNodeId) === targetId;\n                });\n                if (taskIndex === -1) return prev;\n                const task = prev[taskIndex];\n                const remainingVillagers = task.payload.villagerIds.filter((id)=>!villagersToRecall.includes(id));\n                if (remainingVillagers.length === 0) {\n                    return prev.filter((_, i)=>i !== taskIndex);\n                } else {\n                    return prev.map((t, i)=>i === taskIndex ? {\n                            ...t,\n                            payload: {\n                                ...t.payload,\n                                villagerIds: remainingVillagers\n                            }\n                        } : t);\n                }\n            });\n            addToLog(\"\".concat(count, \" villager(s) recalled from gathering \").concat(node.type, \".\"), \"villager\");\n        } else {\n            var _task_payload_villagerIds, _task_payload;\n            const task = activeTasks.find((t)=>t.id === targetId);\n            var _task_payload_villagerIds_length;\n            if (!task || task.type !== \"build\" || ((_task_payload_villagerIds_length = (_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : (_task_payload_villagerIds = _task_payload.villagerIds) === null || _task_payload_villagerIds === void 0 ? void 0 : _task_payload_villagerIds.length) !== null && _task_payload_villagerIds_length !== void 0 ? _task_payload_villagerIds_length : 0) < count) return;\n            const villagersToRecall = task.payload.villagerIds.slice(task.payload.villagerIds.length - count);\n            const remainingVillagers = task.payload.villagerIds.filter((id)=>!villagersToRecall.includes(id));\n            if (remainingVillagers.length === 0) {\n                addNotification(\"Cannot recall the last builder. This would cancel the project.\");\n                return;\n            }\n            const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === task.payload.buildingType);\n            const totalWork = buildingInfo.buildTime * 1000;\n            const oldWorkerCount = task.payload.villagerIds.length;\n            const timeElapsed = Date.now() - task.startTime;\n            const workDone = timeElapsed * oldWorkerCount;\n            const workRemaining = Math.max(0, totalWork - workDone);\n            const newWorkerCount = remainingVillagers.length;\n            const newRemainingDuration = workRemaining / newWorkerCount;\n            setActiveTasks((prev)=>prev.map((t)=>t.id === targetId ? {\n                        ...t,\n                        startTime: Date.now(),\n                        duration: newRemainingDuration,\n                        payload: {\n                            ...t.payload,\n                            villagerIds: remainingVillagers\n                        }\n                    } : t));\n            addToLog(\"\".concat(count, \" villager(s) recalled from construction. Work will now proceed slower.\"), \"villager\");\n        }\n        setAssignmentPanelState({\n            isOpen: false,\n            targetId: null,\n            targetType: null,\n            anchorRect: null\n        });\n    };\n    const handleAssignVillagersToConstruction = (constructionId, count)=>{\n        var _task_payload_villagerIds, _task_payload;\n        const idleVillagers = units.villagers.filter((v)=>!isVillagerBusy(v.id));\n        if (count <= 0) return;\n        let cappedCount = Math.min(count, idleVillagers.length);\n        if (cappedCount === 0) {\n            addNotification(\"No idle villagers available to assist.\");\n            return;\n        }\n        const villagersToAssign = idleVillagers.slice(0, cappedCount).map((v)=>v.id);\n        const task = activeTasks.find((t)=>t.id === constructionId);\n        if (!task || task.type !== \"build\") return;\n        const buildingInfo = BUILDINGS_INFO.find((b)=>{\n            var _task_payload;\n            return b.id === ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : _task_payload.buildingType);\n        });\n        if (!buildingInfo) return;\n        const baseDuration = buildingInfo.buildTime * 1000;\n        const oldWorkerCount = ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : (_task_payload_villagerIds = _task_payload.villagerIds) === null || _task_payload_villagerIds === void 0 ? void 0 : _task_payload_villagerIds.length) || 1;\n        const timeElapsed = Date.now() - task.startTime;\n        const workDone = timeElapsed * oldWorkerCount;\n        const totalWork = baseDuration;\n        const workRemaining = Math.max(0, totalWork - workDone);\n        const newWorkerCount = oldWorkerCount + cappedCount;\n        const newRemainingDuration = workRemaining / newWorkerCount;\n        const updatedVillagerIds = [\n            ...task.payload.villagerIds,\n            ...villagersToAssign\n        ];\n        setActiveTasks((prev)=>prev.map((t)=>t.id === constructionId ? {\n                    ...t,\n                    startTime: Date.now(),\n                    duration: newRemainingDuration,\n                    payload: {\n                        ...t.payload,\n                        villagerIds: updatedVillagerIds\n                    }\n                } : t));\n        addToLog(\"\".concat(cappedCount, \" villager(s) are now assisting with the \").concat(buildingInfo.name, \".\"), buildingInfo.id);\n        setActivityStatus(\"Construction of the \".concat(buildingInfo.name, \" is now faster.\"));\n        setAssignmentPanelState({\n            isOpen: false,\n            targetId: null,\n            targetType: null,\n            anchorRect: null\n        });\n    };\n    const handleAssignVillagers = (targetId, count)=>{\n        if (assignmentPanelState.targetType === \"resource\") {\n            handleAssignVillagersToNode(targetId, count);\n        } else if (assignmentPanelState.targetType === \"construction\") {\n            handleAssignVillagersToConstruction(targetId, count);\n        }\n    };\n    const handleAdvanceAge = async ()=>{\n        if (activeTasks.some((t)=>t.type === \"advance_age\")) {\n            addNotification(\"Advancement already in progress.\");\n            return;\n        }\n        if (!unlimitedResources) {\n            if (resources.food < 500 || resources.gold < 200) {\n                const missing = [];\n                if (resources.food < 500) missing.push(\"\".concat(500 - resources.food, \" Food\"));\n                if (resources.gold < 200) missing.push(\"\".concat(200 - resources.gold, \" Gold\"));\n                addNotification(\"To advance, you need \".concat(missing.join(\" and \"), \".\"));\n                return;\n            }\n            updateResources({\n                food: -500,\n                gold: -200\n            });\n        }\n        const duration = 60000;\n        if (unlimitedResources) {\n            handleTaskCompletion({\n                id: \"instant\",\n                type: \"advance_age\",\n                startTime: 0,\n                duration: 0,\n                payload: {}\n            });\n        } else {\n            const taskId = \"\".concat(Date.now(), \"-advance_age\");\n            const newTask = {\n                id: taskId,\n                type: \"advance_age\",\n                startTime: Date.now(),\n                duration\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"Your people begin the long journey to a new age.\");\n            setBuildingManagementPanel({\n                isOpen: false,\n                type: null,\n                anchorRect: null\n            });\n        }\n    };\n    const handleExitGame = async ()=>{\n        setCurrentSaveName(null);\n        await fetchSaves();\n        setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.MENU);\n    };\n    const handleDeleteGame = async (saveName)=>{\n        await (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.deleteGameState)(saveName);\n        await fetchSaves();\n        addNotification('Deleted saga: \"'.concat(saveName, '\"'));\n    };\n    const handleToggleUnlimitedResources = ()=>{\n        const newMode = !unlimitedResources;\n        setUnlimitedResources(newMode);\n        if (newMode) {\n            // Test mode is being turned ON\n            setResources({\n                food: 99999,\n                wood: 99999,\n                gold: 99999,\n                stone: 99999\n            });\n            addNotification(\"Test Mode: ON - All active tasks completed.\");\n            const depletedNodeIds = new Set();\n            // Process and complete all active tasks\n            activeTasks.forEach((task)=>{\n                if (task.type === \"gather\") {\n                    var _task_payload;\n                    if ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : _task_payload.resourceNodeId) {\n                        depletedNodeIds.add(task.payload.resourceNodeId);\n                        const node = resourceNodes.find((n)=>n.id === task.payload.resourceNodeId);\n                        if (node) {\n                            addToLog(\"Instantly gathered all \".concat(node.type, \" from a depleted source.\"), node.type);\n                        }\n                    }\n                } else {\n                    handleTaskCompletion(task);\n                }\n            });\n            // Remove depleted resource nodes\n            if (depletedNodeIds.size > 0) {\n                setResourceNodes((prev)=>prev.filter((n)=>!depletedNodeIds.has(n.id)));\n            }\n            // Clear the task queue\n            setActiveTasks([]);\n        } else {\n            // Test mode is being turned OFF\n            addNotification(\"Test Mode: OFF\");\n        }\n    };\n    const buildingCounts = Object.keys(buildings).reduce((acc, key)=>{\n        const buildingType = key;\n        acc[buildingType] = buildings[buildingType].length;\n        return acc;\n    }, {});\n    const idleVillagerCount = units.villagers.filter((v)=>!isVillagerBusy(v.id)).length;\n    const assignmentTarget = assignmentPanelState.targetType === \"resource\" ? resourceNodes.find((n)=>n.id === assignmentPanelState.targetId) : activeTasks.find((t)=>t.type === \"build\" && t.id === assignmentPanelState.targetId);\n    const closeAllPanels = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setUnitManagementPanel((p)=>p.isOpen ? {\n                isOpen: false,\n                type: null,\n                anchorRect: null\n            } : p);\n        setBuildingManagementPanel((p)=>p.isOpen ? {\n                isOpen: false,\n                type: null,\n                instanceId: undefined,\n                anchorRect: null\n            } : p);\n        setBuildPanelState((p)=>p.isOpen ? {\n                isOpen: false,\n                villagerId: null,\n                anchorRect: null\n            } : p);\n        setAssignmentPanelState((p)=>p.isOpen ? {\n                isOpen: false,\n                targetId: null,\n                targetType: null,\n                anchorRect: null\n            } : p);\n        setCivPanelState((p)=>p.isOpen ? {\n                isOpen: false,\n                anchorRect: null\n            } : p);\n        setAllBuildingsPanel((p)=>p.isOpen ? {\n                isOpen: false,\n                anchorRect: null\n            } : p);\n    }, []);\n    const handleOpenBuildingPanel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((type, instanceId, rect)=>{\n        closeAllPanels();\n        setBuildingManagementPanel({\n            isOpen: true,\n            type,\n            instanceId,\n            anchorRect: rect\n        });\n    }, [\n        closeAllPanels\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleClickOutside = (event)=>{\n            const isAnyPanelOpen = unitManagementPanel.isOpen || buildingManagementPanel.isOpen || buildPanelState.isOpen || assignmentPanelState.isOpen || civPanelState.isOpen || allBuildingsPanel.isOpen;\n            if (!isAnyPanelOpen) {\n                return;\n            }\n            const target = event.target;\n            if (target.closest(\".sci-fi-panel-popup\")) {\n                return;\n            }\n            closeAllPanels();\n        };\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return ()=>{\n            document.removeEventListener(\"mousedown\", handleClickOutside);\n        };\n    }, [\n        unitManagementPanel.isOpen,\n        buildingManagementPanel.isOpen,\n        buildPanelState.isOpen,\n        assignmentPanelState.isOpen,\n        civPanelState.isOpen,\n        allBuildingsPanel.isOpen,\n        closeAllPanels\n    ]);\n    const renderContent = ()=>{\n        switch(gameState){\n            case _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.MENU:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_StartScreen__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                    onNewGame: handleStartNewGame,\n                    onResumeGame: handleResumeGame,\n                    savedGames: allSaves,\n                    onDeleteGame: handleDeleteGame\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 1007,\n                    columnNumber: 24\n                }, undefined);\n            case _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.LOADING:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingScreen__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 1009,\n                    columnNumber: 24\n                }, undefined);\n            case _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING:\n                if (!civilization) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingScreen__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 1011,\n                    columnNumber: 43\n                }, undefined);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_GameUI__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            civilization: civilization,\n                            resources: resources,\n                            units: units,\n                            buildings: buildings,\n                            population: population,\n                            currentAge: currentAge,\n                            gameLog: gameLog,\n                            currentEvent: currentEvent,\n                            onEventChoice: handleEventChoice,\n                            resourceDeltas: resourceDeltas,\n                            activityStatus: activityStatus,\n                            unitList: UNIT_INFO,\n                            buildingList: BUILDINGS_INFO,\n                            onOpenUnitPanel: (type, rect)=>{\n                                closeAllPanels();\n                                setUnitManagementPanel({\n                                    isOpen: true,\n                                    type,\n                                    anchorRect: rect\n                                });\n                            },\n                            onOpenBuildingPanel: handleOpenBuildingPanel,\n                            onOpenAllBuildingsPanel: (rect)=>{\n                                closeAllPanels();\n                                setAllBuildingsPanel({\n                                    isOpen: true,\n                                    anchorRect: rect\n                                });\n                            },\n                            playerAction: playerAction,\n                            onConfirmPlacement: handleConfirmPlacement,\n                            onCancelPlayerAction: handleCancelPlayerAction,\n                            onBuildingClick: (building, rect)=>{\n                                closeAllPanels();\n                                const type = Object.keys(buildings).find((key)=>buildings[key].some((b)=>b.id === building.id));\n                                if (type) setBuildingManagementPanel({\n                                    isOpen: true,\n                                    type,\n                                    instanceId: building.id,\n                                    anchorRect: rect\n                                });\n                            },\n                            mapDimensions: MAP_DIMENSIONS,\n                            activeTasks: activeTasks,\n                            onExitGame: handleExitGame,\n                            onOpenCivPanel: (rect)=>{\n                                closeAllPanels();\n                                setCivPanelState({\n                                    isOpen: true,\n                                    anchorRect: rect\n                                });\n                            },\n                            resourceNodes: resourceNodes,\n                            onOpenAssignmentPanel: (nodeId, rect)=>{\n                                closeAllPanels();\n                                setAssignmentPanelState({\n                                    isOpen: true,\n                                    targetId: nodeId,\n                                    targetType: \"resource\",\n                                    anchorRect: rect\n                                });\n                            },\n                            onOpenConstructionPanel: (constructionId, rect)=>{\n                                closeAllPanels();\n                                setAssignmentPanelState({\n                                    isOpen: true,\n                                    targetId: constructionId,\n                                    targetType: \"construction\",\n                                    anchorRect: rect\n                                });\n                            },\n                            gatherInfo: GATHER_INFO\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1014,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_BuildPanel__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                            isOpen: buildPanelState.isOpen,\n                            onClose: ()=>setBuildPanelState({\n                                    isOpen: false,\n                                    villagerId: null,\n                                    anchorRect: null\n                                }),\n                            onStartPlacement: handleStartPlacement,\n                            resources: resources,\n                            buildingCounts: buildingCounts,\n                            buildingList: BUILDINGS_INFO,\n                            anchorRect: buildPanelState.anchorRect\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1048,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UnitManagementPanel__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                            isOpen: unitManagementPanel.isOpen,\n                            onClose: ()=>setUnitManagementPanel({\n                                    isOpen: false,\n                                    type: null,\n                                    anchorRect: null\n                                }),\n                            type: unitManagementPanel.type,\n                            units: units,\n                            onUpdateUnit: handleUpdateUnit,\n                            onDismissUnit: handleDismissSpecificUnit,\n                            onInitiateBuild: (villagerId, rect)=>{\n                                closeAllPanels();\n                                handleInitiateBuild(villagerId, rect);\n                            },\n                            getVillagerTaskDetails: getVillagerTaskDetails,\n                            anchorRect: unitManagementPanel.anchorRect\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1057,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_BuildingManagementPanel__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                            isOpen: buildingManagementPanel.isOpen,\n                            onClose: ()=>setBuildingManagementPanel({\n                                    isOpen: false,\n                                    type: null,\n                                    anchorRect: null\n                                }),\n                            panelState: buildingManagementPanel,\n                            buildings: buildings,\n                            buildingList: BUILDINGS_INFO,\n                            onUpdateBuilding: handleUpdateBuilding,\n                            onDemolishBuilding: handleDemolishBuilding,\n                            onTrainUnits: handleTrainUnits,\n                            onTrainVillagers: handleTrainVillagers,\n                            resources: resources,\n                            population: population,\n                            unitList: UNIT_INFO,\n                            onAdvanceAge: handleAdvanceAge,\n                            activeTasks: activeTasks,\n                            anchorRect: buildingManagementPanel.anchorRect\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1068,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ResourceAssignmentPanel__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                            isOpen: assignmentPanelState.isOpen,\n                            onClose: ()=>setAssignmentPanelState({\n                                    isOpen: false,\n                                    targetId: null,\n                                    targetType: null,\n                                    anchorRect: null\n                                }),\n                            assignmentTarget: assignmentTarget || null,\n                            idleVillagerCount: idleVillagerCount,\n                            onAssignVillagers: handleAssignVillagers,\n                            onRecallVillagers: handleRecallVillagers,\n                            gatherInfo: GATHER_INFO,\n                            buildingList: BUILDINGS_INFO,\n                            anchorRect: assignmentPanelState.anchorRect\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1085,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CivilizationPanel__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                            isOpen: civPanelState.isOpen,\n                            onClose: ()=>setCivPanelState({\n                                    isOpen: false,\n                                    anchorRect: null\n                                }),\n                            civilization: civilization,\n                            anchorRect: civPanelState.anchorRect\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1096,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AllBuildingsPanel__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                            isOpen: allBuildingsPanel.isOpen,\n                            onClose: ()=>setAllBuildingsPanel({\n                                    isOpen: false,\n                                    anchorRect: null\n                                }),\n                            buildingList: BUILDINGS_INFO,\n                            buildingCounts: buildingCounts,\n                            activeTasks: activeTasks,\n                            onOpenBuildingPanel: handleOpenBuildingPanel,\n                            anchorRect: allBuildingsPanel.anchorRect\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1102,\n                            columnNumber: 25\n                        }, undefined)\n                    ]\n                }, void 0, true);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_StartScreen__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                    onNewGame: handleStartNewGame,\n                    onResumeGame: handleResumeGame,\n                    savedGames: allSaves,\n                    onDeleteGame: handleDeleteGame\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 1114,\n                    columnNumber: 24\n                }, undefined);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-stone-dark flex items-center justify-center p-4\",\n        children: [\n            gameState === _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleToggleUnlimitedResources,\n                className: \"fixed bottom-4 left-4 z-[101] bg-brand-gold text-stone-dark font-bold py-1 px-3 rounded-full text-xs shadow-lg hover:scale-105 transition-transform\",\n                \"aria-label\": \"Toggle unlimited resources test mode\",\n                children: [\n                    \"Test Mode: \",\n                    unlimitedResources ? \"ON\" : \"OFF\"\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/page.tsx\",\n                lineNumber: 1121,\n                columnNumber: 18\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_NotificationManager__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                notifications: notifications,\n                onRemoveNotification: removeNotification\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/page.tsx\",\n                lineNumber: 1129,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"w-full max-w-7xl mx-auto\",\n                children: renderContent()\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/page.tsx\",\n                lineNumber: 1130,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/src/app/page.tsx\",\n        lineNumber: 1119,\n        columnNumber: 9\n    }, undefined);\n};\n_s(GamePage, \"XTHGw+qYLVLF0tH7KS9pLeUaYgw=\");\n_c = GamePage;\n/* harmony default export */ __webpack_exports__[\"default\"] = (GamePage);\nvar _c;\n$RefreshReg$(_c, \"GamePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzBELGVBQWVBO2dCQUFlOFMsc0JBQXNCN1A7Ozs7OzswQkFDekUsOERBQUM4UDtnQkFBS0wsV0FBVTswQkFDWG5DOzs7Ozs7Ozs7Ozs7QUFJakI7R0E1akNNL1I7S0FBQUE7QUE4akNOLCtEQUFlQSxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvcGFnZS50c3g/ZjY4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBHYW1lU3RhdHVzLCB0eXBlIENpdmlsaXphdGlvbiwgdHlwZSBSZXNvdXJjZXMsIHR5cGUgVW5pdHMsIHR5cGUgQnVpbGRpbmdzLCB0eXBlIEdhbWVFdmVudCwgdHlwZSBHYW1lTG9nRW50cnksIHR5cGUgTG9nSWNvblR5cGUsIHR5cGUgUmVzb3VyY2VEZWx0YXMsIEJ1aWxkaW5nVHlwZSwgQnVpbGRpbmdJbmZvLCBVSU5vdGlmaWNhdGlvbiwgRnVsbEdhbWVTdGF0ZSwgVmlsbGFnZXIsIE1pbGl0YXJ5VW5pdCwgVW5pdEluZm8sIE1pbGl0YXJ5VW5pdFR5cGUsIEdhbWVUYXNrLCBUYXNrVHlwZSwgUmVzb3VyY2VOb2RlLCBSZXNvdXJjZU5vZGVUeXBlLCBQbGF5ZXJBY3Rpb25TdGF0ZSwgR2FtZUV2ZW50Q2hvaWNlIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBnZXRQcmVkZWZpbmVkQ2l2aWxpemF0aW9uLCBnZXRQcmVkZWZpbmVkR2FtZUV2ZW50LCBnZXRQcmVkZWZpbmVkQWdlIH0gZnJvbSAnQC9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlJztcbmltcG9ydCB7IHNhdmVHYW1lU3RhdGUsIGxvYWRHYW1lU3RhdGUsIGdldEFsbFNhdmVOYW1lcywgZGVsZXRlR2FtZVN0YXRlIH0gZnJvbSAnQC9zZXJ2aWNlcy9kYlNlcnZpY2UnO1xuaW1wb3J0IHsgZ2V0UmFuZG9tTmFtZXMgfSBmcm9tICdAL3NlcnZpY2VzL25hbWVTZXJ2aWNlJztcbmltcG9ydCBHYW1lVUkgZnJvbSAnQC9jb21wb25lbnRzL0dhbWVVSSc7XG5pbXBvcnQgU3RhcnRTY3JlZW4gZnJvbSAnQC9jb21wb25lbnRzL1N0YXJ0U2NyZWVuJztcbmltcG9ydCBMb2FkaW5nU2NyZWVuIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkaW5nU2NyZWVuJztcbmltcG9ydCBCdWlsZFBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy9CdWlsZFBhbmVsJztcbmltcG9ydCBOb3RpZmljYXRpb25NYW5hZ2VyIGZyb20gJ0AvY29tcG9uZW50cy9Ob3RpZmljYXRpb25NYW5hZ2VyJztcbmltcG9ydCBVbml0TWFuYWdlbWVudFBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy9Vbml0TWFuYWdlbWVudFBhbmVsJztcbmltcG9ydCBCdWlsZGluZ01hbmFnZW1lbnRQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvQnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwnO1xuaW1wb3J0IFJlc291cmNlQXNzaWdubWVudFBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy9SZXNvdXJjZUFzc2lnbm1lbnRQYW5lbCc7XG5pbXBvcnQgQ2l2aWxpemF0aW9uUGFuZWwgZnJvbSAnQC9jb21wb25lbnRzL0NpdmlsaXphdGlvblBhbmVsJztcbmltcG9ydCBBbGxCdWlsZGluZ3NQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvQWxsQnVpbGRpbmdzUGFuZWwnO1xuXG5jb25zdCBCVUlMRElOR1NfSU5GTzogQnVpbGRpbmdJbmZvW10gPSBbXG4gICAgeyBpZDogJ2hvdXNlcycsIG5hbWU6ICdIb3VzZScsIGRlc2NyaXB0aW9uOiAnSW5jcmVhc2VzIHBvcHVsYXRpb24gY2FwYWNpdHkgYnkgNS4nLCBjb3N0OiB7IHdvb2Q6IDUwIH0sIGlzVW5pcXVlOiBmYWxzZSwgYnVpbGRUaW1lOiAxNSB9LFxuICAgIHsgaWQ6ICdiYXJyYWNrcycsIG5hbWU6ICdCYXJyYWNrcycsIGRlc2NyaXB0aW9uOiAnQWxsb3dzIHRyYWluaW5nIG9mIFN3b3Jkc21lbi4nLCBjb3N0OiB7IHdvb2Q6IDE1MCwgc3RvbmU6IDUwIH0sIGlzVW5pcXVlOiB0cnVlLCBidWlsZFRpbWU6IDYwIH0sXG4gICAgeyBpZDogJ2FyY2hlcnlSYW5nZScsIG5hbWU6ICdBcmNoZXJ5IFJhbmdlJywgZGVzY3JpcHRpb246ICdBbGxvd3MgdHJhaW5pbmcgb2YgQXJjaGVycy4nLCBjb3N0OiB7IHdvb2Q6IDE3NSB9LCBpc1VuaXF1ZTogdHJ1ZSwgYnVpbGRUaW1lOiA2MCB9LFxuICAgIHsgaWQ6ICdzdGFibGUnLCBuYW1lOiAnU3RhYmxlcycsIGRlc2NyaXB0aW9uOiAnQWxsb3dzIHRyYWluaW5nIG9mIEtuaWdodHMuJywgY29zdDogeyB3b29kOiAxNzUsIGdvbGQ6IDc1IH0sIGlzVW5pcXVlOiB0cnVlLCBidWlsZFRpbWU6IDc1IH0sXG4gICAgeyBpZDogJ3NpZWdlV29ya3Nob3AnLCBuYW1lOiAnU2llZ2UgV29ya3Nob3AnLCBkZXNjcmlwdGlvbjogJ0NvbnN0cnVjdHMgcG93ZXJmdWwgQ2F0YXB1bHRzLicsIGNvc3Q6IHsgd29vZDogMjAwLCBnb2xkOiAxNTAgfSwgaXNVbmlxdWU6IHRydWUsIGJ1aWxkVGltZTogOTAgfSxcbiAgICB7IGlkOiAnYmxhY2tzbWl0aCcsIG5hbWU6ICdCbGFja3NtaXRoJywgZGVzY3JpcHRpb246ICdSZXNlYXJjaGVzIGluZmFudHJ5IGFuZCBjYXZhbHJ5IHVwZ3JhZGVzLicsIGNvc3Q6IHsgd29vZDogMTAwLCBnb2xkOiAxMDAgfSwgaXNVbmlxdWU6IHRydWUsIGJ1aWxkVGltZTogNDUgfSxcbiAgICB7IGlkOiAnd2F0Y2hUb3dlcicsIG5hbWU6ICdXYXRjaCBUb3dlcicsIGRlc2NyaXB0aW9uOiAnUHJvdmlkZXMgZGVmZW5zZSBhZ2FpbnN0IHJhaWRzLicsIGNvc3Q6IHsgc3RvbmU6IDEyNSB9LCBpc1VuaXF1ZTogdHJ1ZSwgYnVpbGRUaW1lOiA0NSB9LFxuICAgIHsgaWQ6ICd0b3duQ2VudGVyJywgbmFtZTogJ1Rvd24gQ2VudGVyJywgZGVzY3JpcHRpb246ICdUaGUgaGVhcnQgb2YgeW91ciBzZXR0bGVtZW50LicsIGNvc3Q6IHt9LCBpc1VuaXF1ZTogdHJ1ZSwgYnVpbGRUaW1lOiAwIH1cbl07XG5cbmNvbnN0IFVOSVRfSU5GTzogVW5pdEluZm9bXSA9IFtcbiAgICB7IGlkOiAnc3dvcmRzbWFuJywgbmFtZTogJ1N3b3Jkc21hbicsIGRlc2NyaXB0aW9uOiAnQmFzaWMgbWVsZWUgaW5mYW50cnkuJywgY29zdDogeyBmb29kOiA2MCwgZ29sZDogMjAgfSwgcmVxdWlyZWRCdWlsZGluZzogJ2JhcnJhY2tzJywgdHJhaW5UaW1lOiAyMiB9LFxuICAgIHsgaWQ6ICdhcmNoZXInLCBuYW1lOiAnQXJjaGVyJywgZGVzY3JpcHRpb246ICdSYW5nZWQgdW5pdCBlZmZlY3RpdmUgYWdhaW5zdCBpbmZhbnRyeS4nLCBjb3N0OiB7IGZvb2Q6IDMwLCB3b29kOiA0MCB9LCByZXF1aXJlZEJ1aWxkaW5nOiAnYXJjaGVyeVJhbmdlJywgdHJhaW5UaW1lOiAyNSB9LFxuICAgIHsgaWQ6ICdrbmlnaHQnLCBuYW1lOiAnS25pZ2h0JywgZGVzY3JpcHRpb246ICdGYXN0IGFuZCBwb3dlcmZ1bCBjYXZhbHJ5LicsIGNvc3Q6IHsgZm9vZDogNjAsIGdvbGQ6IDc1IH0sIHJlcXVpcmVkQnVpbGRpbmc6ICdzdGFibGUnLCB0cmFpblRpbWU6IDMwIH0sXG4gICAgeyBpZDogJ2NhdGFwdWx0JywgbmFtZTogJ0NhdGFwdWx0JywgZGVzY3JpcHRpb246ICdTaWVnZSBlbmdpbmUgZGV2YXN0YXRpbmcgdG8gYnVpbGRpbmdzLicsIGNvc3Q6IHsgd29vZDogMTUwLCBnb2xkOiAxNTAgfSwgcmVxdWlyZWRCdWlsZGluZzogJ3NpZWdlV29ya3Nob3AnLCB0cmFpblRpbWU6IDQ1IH0sXG5dO1xuXG5jb25zdCBHQVRIRVJfSU5GTzogUmVjb3JkPFJlc291cmNlTm9kZVR5cGUsIHsgcmF0ZTogbnVtYmVyIH0+ID0ge1xuICAgIGZvb2Q6IHsgcmF0ZTogMTAgfSxcbiAgICB3b29kOiB7IHJhdGU6IDggfSxcbiAgICBnb2xkOiB7IHJhdGU6IDUgfSxcbiAgICBzdG9uZTogeyByYXRlOiA2IH0sXG59XG5cbmNvbnN0IGluaXRpYWxCdWlsZGluZ3NTdGF0ZTogQnVpbGRpbmdzID0ge1xuICAgIGhvdXNlczogW10sIGJhcnJhY2tzOiBbXSwgYXJjaGVyeVJhbmdlOiBbXSwgc3RhYmxlOiBbXSwgc2llZ2VXb3Jrc2hvcDogW10sIGJsYWNrc21pdGg6IFtdLCB3YXRjaFRvd2VyOiBbXSwgdG93bkNlbnRlcjogW11cbn07XG5cbmNvbnN0IE1BUF9ESU1FTlNJT05TID0geyB3aWR0aDogMjUsIGhlaWdodDogMTggfTtcblxuY29uc3QgR2FtZVBhZ2U6IFJlYWN0LkZDID0gKCkgPT4ge1xuICAgIGNvbnN0IFtnYW1lU3RhdGUsIHNldEdhbWVTdGF0ZV0gPSB1c2VTdGF0ZTxHYW1lU3RhdHVzPihHYW1lU3RhdHVzLk1FTlUpO1xuICAgIGNvbnN0IFtjaXZpbGl6YXRpb24sIHNldENpdmlsaXphdGlvbl0gPSB1c2VTdGF0ZTxDaXZpbGl6YXRpb24gfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbcmVzb3VyY2VzLCBzZXRSZXNvdXJjZXNdID0gdXNlU3RhdGU8UmVzb3VyY2VzPih7IGZvb2Q6IDIwMCwgd29vZDogMTUwLCBnb2xkOiA1MCwgc3RvbmU6IDEwMCB9KTtcbiAgICBjb25zdCBbdW5pdHMsIHNldFVuaXRzXSA9IHVzZVN0YXRlPFVuaXRzPih7IHZpbGxhZ2VyczogW10sIG1pbGl0YXJ5OiBbXSB9KTtcbiAgICBjb25zdCBbYnVpbGRpbmdzLCBzZXRCdWlsZGluZ3NdID0gdXNlU3RhdGU8QnVpbGRpbmdzPihpbml0aWFsQnVpbGRpbmdzU3RhdGUpO1xuICAgIGNvbnN0IFtjdXJyZW50QWdlLCBzZXRDdXJyZW50QWdlXSA9IHVzZVN0YXRlPHN0cmluZz4oJ05vbWFkaWMgQWdlJyk7XG4gICAgY29uc3QgW2dhbWVMb2csIHNldEdhbWVMb2ddID0gdXNlU3RhdGU8R2FtZUxvZ0VudHJ5W10+KFtdKTtcbiAgICBjb25zdCBbY3VycmVudEV2ZW50LCBzZXRDdXJyZW50RXZlbnRdID0gdXNlU3RhdGU8R2FtZUV2ZW50IHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW3Jlc291cmNlRGVsdGFzLCBzZXRSZXNvdXJjZURlbHRhc10gPSB1c2VTdGF0ZTxSZXNvdXJjZURlbHRhcz4oe30pO1xuICAgIGNvbnN0IFthY3Rpdml0eVN0YXR1cywgc2V0QWN0aXZpdHlTdGF0dXNdID0gdXNlU3RhdGU8c3RyaW5nPignWW91ciBzdG9yeSBiZWdpbnMuLi4nKTtcbiAgICBjb25zdCBbbm90aWZpY2F0aW9ucywgc2V0Tm90aWZpY2F0aW9uc10gPSB1c2VTdGF0ZTxVSU5vdGlmaWNhdGlvbltdPihbXSk7XG4gICAgY29uc3QgW3VubGltaXRlZFJlc291cmNlcywgc2V0VW5saW1pdGVkUmVzb3VyY2VzXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgICBjb25zdCBbYWxsU2F2ZXMsIHNldEFsbFNhdmVzXSA9IHVzZVN0YXRlPHN0cmluZ1tdPihbXSk7XG4gICAgY29uc3QgW2N1cnJlbnRTYXZlTmFtZSwgc2V0Q3VycmVudFNhdmVOYW1lXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IFtwbGF5ZXJBY3Rpb24sIHNldFBsYXllckFjdGlvbl0gPSB1c2VTdGF0ZTxQbGF5ZXJBY3Rpb25TdGF0ZT4obnVsbCk7XG4gICAgY29uc3QgW2FjdGl2ZVRhc2tzLCBzZXRBY3RpdmVUYXNrc10gPSB1c2VTdGF0ZTxHYW1lVGFza1tdPihbXSk7XG4gICAgY29uc3QgW3Jlc291cmNlTm9kZXMsIHNldFJlc291cmNlTm9kZXNdID0gdXNlU3RhdGU8UmVzb3VyY2VOb2RlW10+KFtdKTtcbiAgICBcbiAgICAvLyBQYW5lbCBTdGF0ZXNcbiAgICBjb25zdCBbYnVpbGRQYW5lbFN0YXRlLCBzZXRCdWlsZFBhbmVsU3RhdGVdID0gdXNlU3RhdGU8eyBpc09wZW46IGJvb2xlYW47IHZpbGxhZ2VySWQ6IHN0cmluZyB8IG51bGw7IGFuY2hvclJlY3Q6IERPTVJlY3QgfCBudWxsIH0+KHsgaXNPcGVuOiBmYWxzZSwgdmlsbGFnZXJJZDogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICBjb25zdCBbdW5pdE1hbmFnZW1lbnRQYW5lbCwgc2V0VW5pdE1hbmFnZW1lbnRQYW5lbF0gPSB1c2VTdGF0ZTx7IGlzT3BlbjogYm9vbGVhbjsgdHlwZTogJ3ZpbGxhZ2VycycgfCAnbWlsaXRhcnknIHwgbnVsbDsgYW5jaG9yUmVjdDogRE9NUmVjdCB8IG51bGw7IH0+KHsgaXNPcGVuOiBmYWxzZSwgdHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICBjb25zdCBbYnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwsIHNldEJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsXSA9IHVzZVN0YXRlPHsgaXNPcGVuOiBib29sZWFuOyB0eXBlOiBCdWlsZGluZ1R5cGUgfCBudWxsOyBpbnN0YW5jZUlkPzogc3RyaW5nOyBhbmNob3JSZWN0OiBET01SZWN0IHwgbnVsbDsgfT4oeyBpc09wZW46IGZhbHNlLCB0eXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIGNvbnN0IFthbGxCdWlsZGluZ3NQYW5lbCwgc2V0QWxsQnVpbGRpbmdzUGFuZWxdID0gdXNlU3RhdGU8eyBpc09wZW46IGJvb2xlYW47IGFuY2hvclJlY3Q6IERPTVJlY3QgfCBudWxsOyB9Pih7IGlzT3BlbjogZmFsc2UsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgY29uc3QgW2Fzc2lnbm1lbnRQYW5lbFN0YXRlLCBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZV0gPSB1c2VTdGF0ZTx7IGlzT3BlbjogYm9vbGVhbjsgdGFyZ2V0SWQ6IHN0cmluZyB8IG51bGw7IHRhcmdldFR5cGU6ICdyZXNvdXJjZScgfCAnY29uc3RydWN0aW9uJyB8IG51bGw7IGFuY2hvclJlY3Q6IERPTVJlY3QgfCBudWxsOyB9Pih7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIGNvbnN0IFtjaXZQYW5lbFN0YXRlLCBzZXRDaXZQYW5lbFN0YXRlXSA9IHVzZVN0YXRlPHsgaXNPcGVuOiBib29sZWFuOyBhbmNob3JSZWN0OiBET01SZWN0IHwgbnVsbDsgfT4oeyBpc09wZW46IGZhbHNlLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuXG4gICAgY29uc3QgZGVsdGFUaW1lb3V0UmVmID0gdXNlUmVmPHsgW2tleSBpbiBrZXlvZiBSZXNvdXJjZXNdPzogbnVtYmVyIH0+KHt9KTtcbiAgICBjb25zdCBldmVudFRpbWVyUmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG5cbiAgICBjb25zdCBwb3B1bGF0aW9uID0ge1xuICAgICAgICBjdXJyZW50OiB1bml0cy52aWxsYWdlcnMubGVuZ3RoICsgdW5pdHMubWlsaXRhcnkubGVuZ3RoLFxuICAgICAgICBjYXBhY2l0eTogKGJ1aWxkaW5ncy50b3duQ2VudGVyPy5sZW5ndGggPiAwID8gMjAgOiAwKSArIGJ1aWxkaW5ncy5ob3VzZXMubGVuZ3RoICogNSxcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGZldGNoU2F2ZXMgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gYXdhaXQgZ2V0QWxsU2F2ZU5hbWVzKCk7XG4gICAgICAgIHNldEFsbFNhdmVzKG5hbWVzKTtcbiAgICB9LCBbXSk7XG4gICAgXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgZmV0Y2hTYXZlcygpO1xuICAgIH0sIFtmZXRjaFNhdmVzXSk7XG4gICAgXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGdhbWVTdGF0ZSA9PT0gR2FtZVN0YXR1cy5QTEFZSU5HICYmIGNpdmlsaXphdGlvbiAmJiBjdXJyZW50U2F2ZU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxTdGF0ZTogRnVsbEdhbWVTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBjaXZpbGl6YXRpb24sXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLFxuICAgICAgICAgICAgICAgIHVuaXRzLFxuICAgICAgICAgICAgICAgIGJ1aWxkaW5ncyxcbiAgICAgICAgICAgICAgICBjdXJyZW50QWdlLFxuICAgICAgICAgICAgICAgIGdhbWVMb2csXG4gICAgICAgICAgICAgICAgYWN0aXZlVGFza3MsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VOb2RlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzYXZlR2FtZVN0YXRlKGN1cnJlbnRTYXZlTmFtZSwgZnVsbFN0YXRlKTtcbiAgICAgICAgfVxuICAgIH0sIFtjaXZpbGl6YXRpb24sIHJlc291cmNlcywgdW5pdHMsIGJ1aWxkaW5ncywgY3VycmVudEFnZSwgZ2FtZUxvZywgZ2FtZVN0YXRlLCBjdXJyZW50U2F2ZU5hbWUsIGFjdGl2ZVRhc2tzLCByZXNvdXJjZU5vZGVzXSk7XG5cbiAgICBjb25zdCBhZGROb3RpZmljYXRpb24gPSB1c2VDYWxsYmFjaygobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkID0gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWA7XG4gICAgICAgIHNldE5vdGlmaWNhdGlvbnMocHJldiA9PiBbLi4ucHJldiwgeyBpZCwgbWVzc2FnZSB9XSk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgcmVtb3ZlTm90aWZpY2F0aW9uID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgc2V0Tm90aWZpY2F0aW9ucyhwcmV2ID0+IHByZXYuZmlsdGVyKG4gPT4gbi5pZCAhPT0gaWQpKTtcbiAgICB9LCBbXSk7XG4gICAgXG4gICAgY29uc3QgYWRkVG9Mb2cgPSB1c2VDYWxsYmFjaygobWVzc2FnZTogc3RyaW5nLCBpY29uOiBMb2dJY29uVHlwZSkgPT4ge1xuICAgICAgICBzZXRHYW1lTG9nKHByZXYgPT4gW3sgaWQ6IGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLCBtZXNzYWdlLCBpY29uIH0sIC4uLnByZXYuc2xpY2UoMCwgMTkpXSk7XG4gICAgfSwgW10pO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZVJlc291cmNlcyA9IHVzZUNhbGxiYWNrKChkZWx0YXM6IFJlc291cmNlRGVsdGFzKSA9PiB7XG4gICAgICAgIHNldFJlc291cmNlcyhwcmV2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Jlc291cmNlcyA9IHsgLi4ucHJldiB9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGVsdGFzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb3VyY2VLZXkgPSBrZXkgYXMga2V5b2YgUmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgIG5ld1Jlc291cmNlc1tyZXNvdXJjZUtleV0gPSBNYXRoLm1heCgwLCBuZXdSZXNvdXJjZXNbcmVzb3VyY2VLZXldICsgKGRlbHRhc1tyZXNvdXJjZUtleV0gPz8gMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ld1Jlc291cmNlcztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0UmVzb3VyY2VEZWx0YXMocHJldiA9PiAoey4uLnByZXYsIC4uLmRlbHRhc30pKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkZWx0YXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc291cmNlS2V5ID0ga2V5IGFzIGtleW9mIFJlc291cmNlcztcbiAgICAgICAgICAgIGlmIChkZWx0YVRpbWVvdXRSZWYuY3VycmVudFtyZXNvdXJjZUtleV0pIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGRlbHRhVGltZW91dFJlZi5jdXJyZW50W3Jlc291cmNlS2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWx0YVRpbWVvdXRSZWYuY3VycmVudFtyZXNvdXJjZUtleV0gPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0UmVzb3VyY2VEZWx0YXMocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RlbHRhcyA9IHsuLi5wcmV2fTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld0RlbHRhc1tyZXNvdXJjZUtleV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdEZWx0YXM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAxNTAwKTtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGhhbmRsZVRhc2tDb21wbGV0aW9uID0gdXNlQ2FsbGJhY2soKHRhc2s6IEdhbWVUYXNrKSA9PiB7XG4gICAgICAgIHN3aXRjaCAodGFzay50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdidWlsZCc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGJ1aWxkaW5nVHlwZSwgdmlsbGFnZXJJZHMsIHBvc2l0aW9uIH0gPSB0YXNrLnBheWxvYWQhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nSW5mbyA9IEJVSUxESU5HU19JTkZPLmZpbmQoYiA9PiBiLmlkID09PSBidWlsZGluZ1R5cGUpITtcbiAgICAgICAgICAgICAgICBjb25zdCBbbmFtZV0gPSBnZXRSYW5kb21OYW1lcygnYnVpbGRpbmcnLCAxKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdCdWlsZGluZzogQnVpbGRpbmdJbnN0YW5jZSA9IHsgaWQ6IHRhc2suaWQsIG5hbWUsIHBvc2l0aW9uOiBwb3NpdGlvbiEgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZXRCdWlsZGluZ3MocCA9PiAoeyAuLi5wLCBbYnVpbGRpbmdUeXBlIV06IFsuLi5wW2J1aWxkaW5nVHlwZSFdLCBuZXdCdWlsZGluZ10gfSkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh2aWxsYWdlcklkcyAmJiB2aWxsYWdlcklkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFRvTG9nKGAke3ZpbGxhZ2VySWRzLmxlbmd0aH0gYnVpbGRlcihzKSBoYXZlIGNvbnN0cnVjdGVkICR7bmFtZX0sIGEgbmV3ICR7YnVpbGRpbmdJbmZvLm5hbWV9LmAsIGJ1aWxkaW5nVHlwZSEpO1xuICAgICAgICAgICAgICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgQ29uc3RydWN0aW9uIG9mICR7bmFtZX0gaXMgY29tcGxldGUuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnZ2F0aGVyJzoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgbm93IGhhbmRsZWQgYnkgdGhlIGdhbWUgbG9vcCBkZXBsZXRpbmcgdGhlIG5vZGUuXG4gICAgICAgICAgICAgICAgLy8gaGFuZGxlVGFza0NvbXBsZXRpb24gZm9yIGdhdGhlciBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBub2RlIGlzIGdvbmUuXG4gICAgICAgICAgICAgICAgLy8gVGhlIHZpbGxhZ2VycyBhc3NpZ25lZCBhcmUgbm93IGlkbGUuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICd0cmFpbl92aWxsYWdlcic6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvdW50IH0gPSB0YXNrLnBheWxvYWQhO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZpbGxhZ2VyTmFtZXMgPSBnZXRSYW5kb21OYW1lcygndmlsbGFnZXInLCBjb3VudCEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZpbGxhZ2VyczogVmlsbGFnZXJbXSA9IG5ld1ZpbGxhZ2VyTmFtZXMubWFwKG5hbWUgPT4gKHsgaWQ6IGAke0RhdGUubm93KCl9LSR7bmFtZX1gLCBuYW1lIH0pKTtcbiAgICAgICAgICAgICAgICBzZXRVbml0cyhwID0+ICh7IC4uLnAsIHZpbGxhZ2VyczogWy4uLnAudmlsbGFnZXJzLCAuLi5uZXdWaWxsYWdlcnNdIH0pKTtcbiAgICAgICAgICAgICAgICBhZGRUb0xvZyhgJHtjb3VudH0gbmV3IHZpbGxhZ2VyKHMpIGhhdmUgam9pbmVkIHlvdXIgc2V0dGxlbWVudC5gLCAndmlsbGFnZXInKTtcbiAgICAgICAgICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgJHtjb3VudH0gbmV3IHZpbGxhZ2VyKHMpIGFyZSByZWFkeSB0byB3b3JrLmApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAndHJhaW5fbWlsaXRhcnknOiB7XG4gICAgICAgICAgICAgICAgIGNvbnN0IHsgdW5pdFR5cGUsIGNvdW50IH0gPSB0YXNrLnBheWxvYWQhO1xuICAgICAgICAgICAgICAgICBjb25zdCB1bml0SW5mbyA9IFVOSVRfSU5GTy5maW5kKHUgPT4gdS5pZCA9PT0gdW5pdFR5cGUpITtcbiAgICAgICAgICAgICAgICAgY29uc3QgbmV3VW5pdE5hbWVzID0gZ2V0UmFuZG9tTmFtZXMoJ3NvbGRpZXInLCBjb3VudCEpO1xuICAgICAgICAgICAgICAgICBjb25zdCBuZXdVbml0czogTWlsaXRhcnlVbml0W10gPSBuZXdVbml0TmFtZXMubWFwKG5hbWUgPT4gKHsgaWQ6IGAke0RhdGUubm93KCl9LSR7dW5pdFR5cGV9LSR7bmFtZX1gLCBuYW1lLCB0aXRsZTogJycsIHVuaXRUeXBlOiB1bml0VHlwZSEgfSkpO1xuICAgICAgICAgICAgICAgICBzZXRVbml0cyhwID0+ICh7IC4uLnAsIG1pbGl0YXJ5OiBbLi4ucC5taWxpdGFyeSwgLi4ubmV3VW5pdHNdIH0pKTtcbiAgICAgICAgICAgICAgICAgYWRkVG9Mb2coYCR7Y291bnR9ICR7dW5pdEluZm8ubmFtZX0ocykgaGF2ZSBiZWVuIHRyYWluZWQuYCwgdW5pdFR5cGUhKTtcbiAgICAgICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYCR7Y291bnR9IG5ldyAke3VuaXRJbmZvLm5hbWV9KHMpIGFyZSByZWFkeSBmb3IgYmF0dGxlLmApO1xuICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2FkdmFuY2VfYWdlJzoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFnZVJlc3VsdCA9IGdldFByZWRlZmluZWRBZ2UoY3VycmVudEFnZSk7XG4gICAgICAgICAgICAgICAgc2V0Q3VycmVudEFnZShhZ2VSZXN1bHQubmV4dEFnZU5hbWUpO1xuICAgICAgICAgICAgICAgIGFkZFRvTG9nKGBZb3UgaGF2ZSBhZHZhbmNlZCB0byB0aGUgJHthZ2VSZXN1bHQubmV4dEFnZU5hbWV9IWAsICdhZ2UnKTtcbiAgICAgICAgICAgICAgICBhZGRUb0xvZyhhZ2VSZXN1bHQuZGVzY3JpcHRpb24sICdhZ2UnKTtcbiAgICAgICAgICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgV2VsY29tZSB0byB0aGUgJHthZ2VSZXN1bHQubmV4dEFnZU5hbWV9IWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgW2N1cnJlbnRBZ2UsIGFkZFRvTG9nXSk7XG4gICAgXG4gICAgLy8gR2FtZSBMb29wXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGdhbWVTdGF0ZSAhPT0gR2FtZVN0YXR1cy5QTEFZSU5HKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGdhbWVMb29wID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGxldCBjb21wbGV0ZWRUYXNrczogR2FtZVRhc2tbXSA9IFtdO1xuICAgICAgICAgICAgbGV0IHJlc291cmNlRGVsdGFzVGhpc1RpY2s6IFJlc291cmNlRGVsdGFzID0ge307XG5cbiAgICAgICAgICAgIGNvbnN0IHN0aWxsQWN0aXZlVGFza3MgPSBhY3RpdmVUYXNrcy5tYXAodGFzayA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSB0YXNrLnN0YXJ0VGltZSArIHRhc2suZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0YXNrLnR5cGUgPT09ICdnYXRoZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSByZXNvdXJjZU5vZGVzLmZpbmQobiA9PiBuLmlkID09PSB0YXNrLnBheWxvYWQ/LnJlc291cmNlTm9kZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlsbGFnZXJDb3VudCA9IHRhc2sucGF5bG9hZD8udmlsbGFnZXJJZHM/Lmxlbmd0aCB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlIHx8IHZpbGxhZ2VyQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZFRhc2tzLnB1c2godGFzayk7IC8vIE9ycGhhbmVkIG9yIGVtcHR5IGdhdGhlciB0YXNrLCBtYXJrIGZvciByZW1vdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBnYXRoZXJSYXRlUGVyVmlsbGFnZXJQZXJTZWNvbmQgPSBHQVRIRVJfSU5GT1tub2RlLnR5cGVdLnJhdGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudEdhdGhlcmVkVGhpc1RpY2sgPSBnYXRoZXJSYXRlUGVyVmlsbGFnZXJQZXJTZWNvbmQgKiB2aWxsYWdlckNvdW50O1xuXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlRGVsdGFzVGhpc1RpY2tbbm9kZS50eXBlXSA9IChyZXNvdXJjZURlbHRhc1RoaXNUaWNrW25vZGUudHlwZV0gfHwgMCkgKyBhbW91bnRHYXRoZXJlZFRoaXNUaWNrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrO1xuXG4gICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbikgYXMgR2FtZVRhc2tbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIHJlc291cmNlIG5vZGVzIHNlcGFyYXRlbHkgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zIHdpdGggc3RhdGVcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXNvdXJjZURlbHRhc1RoaXNUaWNrKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2V0UmVzb3VyY2VzKHByZXZSZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSZXNvdXJjZXMgPSB7IC4uLnByZXZSZXMgfTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGNvbnN0IGtleSBpbiByZXNvdXJjZURlbHRhc1RoaXNUaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNLZXkgPSBrZXkgYXMga2V5b2YgUmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UmVzb3VyY2VzW3Jlc0tleV0gKz0gcmVzb3VyY2VEZWx0YXNUaGlzVGlja1tyZXNLZXldITtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3UmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgc2V0UmVzb3VyY2VOb2RlcyhwcmV2Tm9kZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdOb2RlcyA9IHByZXZOb2Rlcy5tYXAobm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb0RlY3JlbWVudCA9IHJlc291cmNlRGVsdGFzVGhpc1RpY2tbbm9kZS50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbW91bnRUb0RlY3JlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Ftb3VudCA9IG5vZGUuYW1vdW50IC0gYW1vdW50VG9EZWNyZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0Ftb3VudCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRvTG9nKGAke25vZGUuYXNzaWduZWRWaWxsYWdlcnMubGVuZ3RofSB2aWxsYWdlcihzKSBkZXBsZXRlZCBhICR7bm9kZS50eXBlfSBzb3VyY2UsIGdhaW5pbmcgJHtNYXRoLmZsb29yKG5vZGUuYW1vdW50KX0gJHtub2RlLnR5cGV9LmAsIG5vZGUudHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKGBBICR7bm9kZS50eXBlfSBzb3VyY2UgaGFzIGJlZW4gZnVsbHkgZGVwbGV0ZWQuYCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2F0aGVyVGFzayA9IHN0aWxsQWN0aXZlVGFza3MuZmluZCh0ID0+IHQudHlwZSA9PT0gJ2dhdGhlcicgJiYgdC5wYXlsb2FkPy5yZXNvdXJjZU5vZGVJZCA9PT0gbm9kZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGdhdGhlclRhc2spIGNvbXBsZXRlZFRhc2tzLnB1c2goZ2F0aGVyVGFzayk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm5vZGUsIGFtb3VudDogbmV3QW1vdW50IH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pIGFzIFJlc291cmNlTm9kZVtdO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOb2RlcztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZmluYWxBY3RpdmVUYXNrcyA9IHN0aWxsQWN0aXZlVGFza3MuZmlsdGVyKHQgPT4gIWNvbXBsZXRlZFRhc2tzLnNvbWUoY3QgPT4gY3QuaWQgPT09IHQuaWQpKTtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKGZpbmFsQWN0aXZlVGFza3MpO1xuXG4gICAgICAgICAgICBpZiAoY29tcGxldGVkVGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZFRhc2tzLmZvckVhY2goaGFuZGxlVGFza0NvbXBsZXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChnYW1lTG9vcCk7XG4gICAgfSwgW2dhbWVTdGF0ZSwgYWN0aXZlVGFza3MsIHJlc291cmNlTm9kZXMsIGhhbmRsZVRhc2tDb21wbGV0aW9uLCBhZGRUb0xvZ10pO1xuXG5cbiAgICBjb25zdCBoYW5kbGVOZXdFdmVudCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgLy8gRXZlbnRzIHNob3VsZCBub3QgdHJpZ2dlciBpZiBhIG1ham9yIHRhc2sgKGJ1aWxkLCB0cmFpbiwgYWR2YW5jZSBhZ2UpIGlzIGluIHByb2dyZXNzLlxuICAgICAgICAvLyBHYXRoZXJpbmcgcmVzb3VyY2VzIGlzIGEgYmFja2dyb3VuZCB0YXNrIGFuZCBzaG91bGQgbm90IGJsb2NrIGV2ZW50cy5cbiAgICAgICAgY29uc3QgbWFqb3JUYXNrSW5Qcm9ncmVzcyA9IGFjdGl2ZVRhc2tzLnNvbWUodCA9PiB0LnR5cGUgIT09ICdnYXRoZXInKTtcbiAgICAgICAgaWYgKCFjaXZpbGl6YXRpb24gfHwgY3VycmVudEV2ZW50IHx8IG1ham9yVGFza0luUHJvZ3Jlc3MpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGFkZFRvTG9nKCdBIG5ldyBjaGFwdGVyIHVuZm9sZHMuLi4nLCAnZXZlbnQnKTtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBnZXRQcmVkZWZpbmVkR2FtZUV2ZW50KCk7XG4gICAgICAgIHNldEN1cnJlbnRFdmVudChldmVudCk7XG4gICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKCdBIG5ldyBldmVudCByZXF1aXJlcyB5b3VyIGF0dGVudGlvbiEnKTtcbiAgICB9LCBbY2l2aWxpemF0aW9uLCBjdXJyZW50RXZlbnQsIGFjdGl2ZVRhc2tzLCBhZGRUb0xvZ10pO1xuICAgIFxuICAgIGNvbnN0IHNjaGVkdWxlTmV4dEV2ZW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnRUaW1lclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZXZlbnRUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0RXZlbnRUaW1lID0gKDQ1ICsgTWF0aC5yYW5kb20oKSAqIDQ1KSAqIDEwMDA7IC8vIDQ1LTkwIHNlY29uZHNcbiAgICAgICAgZXZlbnRUaW1lclJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiBoYW5kbGVOZXdFdmVudCgpLCBuZXh0RXZlbnRUaW1lKTtcbiAgICB9LCBbaGFuZGxlTmV3RXZlbnRdKTtcblxuICAgIGNvbnN0IGdlbmVyYXRlUmVzb3VyY2VOb2RlcyA9IChleGlzdGluZ1Bvc2l0aW9uczogU2V0PHN0cmluZz4pOiBSZXNvdXJjZU5vZGVbXSA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGVzOiBSZXNvdXJjZU5vZGVbXSA9IFtdO1xuICAgICAgICBjb25zdCB0eXBlczogUmVzb3VyY2VOb2RlVHlwZVtdID0gWydmb29kJywgJ3dvb2QnLCAnZ29sZCcsICdzdG9uZSddO1xuICAgICAgICBjb25zdCBudW1Ob2RlcyA9IDIwICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Ob2RlczsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcG9zOiB7eDogbnVtYmVyLCB5OiBudW1iZXJ9O1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHBvcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTUFQX0RJTUVOU0lPTlMud2lkdGgpLFxuICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVBfRElNRU5TSU9OUy5oZWlnaHQpLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKGV4aXN0aW5nUG9zaXRpb25zLmhhcyhgJHtwb3MueH0sJHtwb3MueX1gKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4aXN0aW5nUG9zaXRpb25zLmFkZChgJHtwb3MueH0sJHtwb3MueX1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHR5cGVzLmxlbmd0aCldO1xuICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDI1MDAgLSA1MDAgKyAxKSkgKyA1MDA7XG5cbiAgICAgICAgICAgIG5vZGVzLnB1c2goeyBpZDogYCR7RGF0ZS5ub3coKX0tbm9kZS0ke2l9YCwgdHlwZSwgcG9zaXRpb246IHBvcywgYW1vdW50LCBhc3NpZ25lZFZpbGxhZ2VyczogW10gfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVTdGFydE5ld0dhbWUgPSAoc2F2ZU5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoYWxsU2F2ZXMuaW5jbHVkZXMoc2F2ZU5hbWUpKSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYEEgc2FnYSBuYW1lZCBcIiR7c2F2ZU5hbWV9XCIgYWxyZWFkeSBleGlzdHMuYCk7IHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZXRHYW1lU3RhdGUoR2FtZVN0YXR1cy5MT0FESU5HKTtcbiAgICAgICAgc2V0Q3VycmVudFNhdmVOYW1lKHNhdmVOYW1lKTtcblxuICAgICAgICBjb25zdCBjaXYgPSBnZXRQcmVkZWZpbmVkQ2l2aWxpemF0aW9uKCk7XG4gICAgICAgIHNldENpdmlsaXphdGlvbihjaXYpO1xuICAgICAgICBzZXRSZXNvdXJjZXMoeyBmb29kOiAyMDAsIHdvb2Q6IDE1MCwgZ29sZDogNTAsIHN0b25lOiAxMDAgfSk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWaWxsYWdlck5hbWVzID0gZ2V0UmFuZG9tTmFtZXMoJ3ZpbGxhZ2VyJywgMyk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWaWxsYWdlcnM6IFZpbGxhZ2VyW10gPSBpbml0aWFsVmlsbGFnZXJOYW1lcy5tYXAobmFtZSA9PiAoeyBpZDogYCR7RGF0ZS5ub3coKX0tJHtuYW1lfWAsIG5hbWUgfSkpO1xuICAgICAgICBzZXRVbml0cyh7IHZpbGxhZ2VyczogaW5pdGlhbFZpbGxhZ2VycywgbWlsaXRhcnk6IFtdIH0pO1xuICAgICAgICBjb25zdCBbaW5pdGlhbFRDTmFtZV0gPSBnZXRSYW5kb21OYW1lcygnYnVpbGRpbmcnLCAxKTtcbiAgICAgICAgY29uc3QgdGNQb3NpdGlvbiA9IHsgeDogTWF0aC5mbG9vcihNQVBfRElNRU5TSU9OUy53aWR0aCAvIDIpLCB5OiBNYXRoLmZsb29yKE1BUF9ESU1FTlNJT05TLmhlaWdodCAvIDIpIH07XG4gICAgICAgIGNvbnN0IGluaXRpYWxUQzogQnVpbGRpbmdJbnN0YW5jZSA9IHsgaWQ6IGAke0RhdGUubm93KCl9LXRjYCwgbmFtZTogaW5pdGlhbFRDTmFtZSwgcG9zaXRpb246IHRjUG9zaXRpb24gfTtcbiAgICAgICAgc2V0QnVpbGRpbmdzKHsuLi5pbml0aWFsQnVpbGRpbmdzU3RhdGUsIHRvd25DZW50ZXI6IFtpbml0aWFsVENdfSk7XG4gICAgICAgIHNldFJlc291cmNlTm9kZXMoZ2VuZXJhdGVSZXNvdXJjZU5vZGVzKG5ldyBTZXQoW2Ake3RjUG9zaXRpb24ueH0sJHt0Y1Bvc2l0aW9uLnl9YF0pKSk7XG4gICAgICAgIHNldEN1cnJlbnRBZ2UoJ05vbWFkaWMgQWdlJyk7XG4gICAgICAgIHNldEdhbWVMb2coW10pO1xuICAgICAgICBzZXRDdXJyZW50RXZlbnQobnVsbCk7XG4gICAgICAgIHNldFVubGltaXRlZFJlc291cmNlcyhmYWxzZSk7XG4gICAgICAgIHNldEFjdGl2ZVRhc2tzKFtdKTtcbiAgICAgICAgYWRkVG9Mb2coYCR7Y2l2Lm5hbWV9IGhhcyBiZWVuIGZvdW5kZWQhYCwgJ3N5c3RlbScpO1xuICAgICAgICBhZGRUb0xvZygnWW91ciBzdG9yeSBiZWdpbnMuLi4nLCAnc3lzdGVtJyk7XG4gICAgICAgIHNldEdhbWVTdGF0ZShHYW1lU3RhdHVzLlBMQVlJTkcpO1xuICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cygnWW91ciBzZXR0bGVtZW50IGF3YWl0cyB5b3VyIGNvbW1hbmQuJyk7XG4gICAgICAgIGZldGNoU2F2ZXMoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0VmlsbGFnZXJUYXNrRGV0YWlscyA9IHVzZUNhbGxiYWNrKCh2aWxsYWdlcklkOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgICAgICBjb25zdCB0YXNrID0gYWN0aXZlVGFza3MuZmluZCh0ID0+IHQucGF5bG9hZD8udmlsbGFnZXJJZHM/LmluY2x1ZGVzKHZpbGxhZ2VySWQpKTtcblxuICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgaWYgKHRhc2sudHlwZSA9PT0gJ2J1aWxkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nSW5mbyA9IEJVSUxESU5HU19JTkZPLmZpbmQoYiA9PiBiLmlkID09PSB0YXNrLnBheWxvYWQhLmJ1aWxkaW5nVHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBCdXN5OiBDb25zdHJ1Y3RpbmcgJHtidWlsZGluZ0luZm8/Lm5hbWUgfHwgJ2EgYnVpbGRpbmcnfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFzay50eXBlID09PSAnZ2F0aGVyJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSByZXNvdXJjZU5vZGVzLmZpbmQobiA9PiBuLmlkID09PSB0YXNrLnBheWxvYWQhLnJlc291cmNlTm9kZUlkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYEJ1c3k6IEdhdGhlcmluZyAke25vZGU/LnR5cGUgfHwgJ3Jlc291cmNlcyd9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICdJZGxlJztcbiAgICB9LCBbYWN0aXZlVGFza3MsIHJlc291cmNlTm9kZXNdKTtcblxuICAgIGNvbnN0IGlzVmlsbGFnZXJCdXN5ID0gdXNlQ2FsbGJhY2soKHZpbGxhZ2VySWQ6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gZ2V0VmlsbGFnZXJUYXNrRGV0YWlscyh2aWxsYWdlcklkKSAhPT0gJ0lkbGUnO1xuICAgIH0sIFtnZXRWaWxsYWdlclRhc2tEZXRhaWxzXSk7XG5cbiAgICBjb25zdCBoYW5kbGVSZXN1bWVHYW1lID0gYXN5bmMgKHNhdmVOYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IGF3YWl0IGxvYWRHYW1lU3RhdGUoc2F2ZU5hbWUpIGFzIEZ1bGxHYW1lU3RhdGU7XG4gICAgICAgIGlmIChzYXZlZFN0YXRlKSB7XG4gICAgICAgICAgICBzZXRHYW1lU3RhdGUoR2FtZVN0YXR1cy5MT0FESU5HKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRTYXZlTmFtZShzYXZlTmFtZSk7XG4gICAgICAgICAgICBzZXRDaXZpbGl6YXRpb24oc2F2ZWRTdGF0ZS5jaXZpbGl6YXRpb24pO1xuICAgICAgICAgICAgc2V0UmVzb3VyY2VzKHNhdmVkU3RhdGUucmVzb3VyY2VzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKChzYXZlZFN0YXRlLnVuaXRzIGFzIGFueSk/LnNvbGRpZXJzKSB7XG4gICAgICAgICAgICAgICAgIGNvbnN0IG1pZ3JhdGVkTWlsaXRhcnk6IE1pbGl0YXJ5VW5pdFtdID0gKHNhdmVkU3RhdGUudW5pdHMgYXMgYW55KS5zb2xkaWVycy5tYXAoKHM6IGFueSkgPT4gKHsgLi4ucywgdW5pdFR5cGU6ICdzd29yZHNtYW4nIH0pKTtcbiAgICAgICAgICAgICAgICAgc2V0VW5pdHMoeyB2aWxsYWdlcnM6IHNhdmVkU3RhdGUudW5pdHMudmlsbGFnZXJzIHx8IFtdLCBtaWxpdGFyeTogbWlncmF0ZWRNaWxpdGFyeSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgIHNldFVuaXRzKHNhdmVkU3RhdGUudW5pdHMgfHwgeyB2aWxsYWdlcnM6IFtdLCBtaWxpdGFyeTogW10gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBmaW5hbEJ1aWxkaW5ncyA9IHsgLi4uaW5pdGlhbEJ1aWxkaW5nc1N0YXRlLCAuLi4oc2F2ZWRTdGF0ZS5idWlsZGluZ3MgfHwge30pIH07XG4gICAgICAgICAgICBjb25zdCBjb25zdHJ1Y3Rpb25UYXNrcyA9IChzYXZlZFN0YXRlLmFjdGl2ZVRhc2tzIHx8IFtdKS5maWx0ZXIodCA9PiB0LnR5cGUgPT09ICdidWlsZCcpO1xuICAgICAgICAgICAgY29uc3Qgb2NjdXBpZWRDZWxscyA9IG5ldyBTZXQoW1xuICAgICAgICAgICAgICAgIC4uLk9iamVjdC52YWx1ZXMoZmluYWxCdWlsZGluZ3MpLmZsYXQoKS5tYXAoKGI6IGFueSkgPT4gYCR7Yi5wb3NpdGlvbi54fSwke2IucG9zaXRpb24ueX1gKSxcbiAgICAgICAgICAgICAgICAuLi5jb25zdHJ1Y3Rpb25UYXNrcy5tYXAodCA9PiBgJHt0LnBheWxvYWQhLnBvc2l0aW9uIS54fSwke3QucGF5bG9hZCEucG9zaXRpb24hLnl9YClcbiAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICBpZiAoIWZpbmFsQnVpbGRpbmdzLnRvd25DZW50ZXIgfHwgZmluYWxCdWlsZGluZ3MudG93bkNlbnRlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgdGNQb3MgPSB7IHg6IDEwLCB5OiA1IH07XG4gICAgICAgICAgICAgICAgd2hpbGUgKG9jY3VwaWVkQ2VsbHMuaGFzKGAke3RjUG9zLnh9LCR7dGNQb3MueX1gKSkgeyB0Y1Bvcy54Kys7IH1cbiAgICAgICAgICAgICAgICBjb25zdCBbdGNOYW1lXSA9IGdldFJhbmRvbU5hbWVzKCdidWlsZGluZycsIDEpO1xuICAgICAgICAgICAgICAgIGZpbmFsQnVpbGRpbmdzLnRvd25DZW50ZXIgPSBbeyBpZDogYCR7RGF0ZS5ub3coKX0tdGNgLCBuYW1lOiB0Y05hbWUsIHBvc2l0aW9uOiB0Y1BvcyB9XTtcbiAgICAgICAgICAgICAgICBvY2N1cGllZENlbGxzLmFkZChgJHt0Y1Bvcy54fSwke3RjUG9zLnl9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGZpcnN0QnVpbGRpbmcgPSBPYmplY3QudmFsdWVzKGZpbmFsQnVpbGRpbmdzKS5mbGF0KClbMF07XG4gICAgICAgICAgICBpZiAoZmlyc3RCdWlsZGluZyAmJiB0eXBlb2YgZmlyc3RCdWlsZGluZyA9PT0gJ29iamVjdCcgJiYgISgncG9zaXRpb24nIGluIGZpcnN0QnVpbGRpbmcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWlncmF0ZWQgPSB7IC4uLmluaXRpYWxCdWlsZGluZ3NTdGF0ZSB9O1xuICAgICAgICAgICAgICAgIGxldCB5ID0gMztcbiAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhmaW5hbEJ1aWxkaW5ncykuZm9yRWFjaCgoW3R5cGUsIGluc3RhbmNlc10pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHggPSA1O1xuICAgICAgICAgICAgICAgICAgICAoaW5zdGFuY2VzIGFzIEJ1aWxkaW5nSW5zdGFuY2VbXSkuZm9yRWFjaChpbnN0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChvY2N1cGllZENlbGxzLmhhcyhgJHt4fSwke3l9YCkpIHsgeCsrOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAobWlncmF0ZWRbdHlwZSBhcyBCdWlsZGluZ1R5cGVdIGFzIEJ1aWxkaW5nSW5zdGFuY2VbXSkucHVzaCh7IC4uLmluc3QsIHBvc2l0aW9uOiB7IHgsIHkgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9jY3VwaWVkQ2VsbHMuYWRkKGAke3h9LCR7eX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZmluYWxCdWlsZGluZ3MgPSBtaWdyYXRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0QnVpbGRpbmdzKGZpbmFsQnVpbGRpbmdzKTtcblxuICAgICAgICAgICAgY29uc3Qgbm9kZXNUb1NldCA9IChzYXZlZFN0YXRlLnJlc291cmNlTm9kZXMgfHwgW10pLm1hcChuID0+ICh7Li4ubiwgYXNzaWduZWRWaWxsYWdlcnM6IG4uYXNzaWduZWRWaWxsYWdlcnMgfHwgW119KSk7XG4gICAgICAgICAgICBpZiAobm9kZXNUb1NldC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgc2V0UmVzb3VyY2VOb2RlcyhnZW5lcmF0ZVJlc291cmNlTm9kZXMob2NjdXBpZWRDZWxscykpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgc2V0UmVzb3VyY2VOb2Rlcyhub2Rlc1RvU2V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0Q3VycmVudEFnZShzYXZlZFN0YXRlLmN1cnJlbnRBZ2UpO1xuICAgICAgICAgICAgc2V0R2FtZUxvZyhzYXZlZFN0YXRlLmdhbWVMb2cpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtaWdyYXRlZFRhc2tzID0gKHNhdmVkU3RhdGUuYWN0aXZlVGFza3MgfHwgW10pLm1hcCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodC50eXBlID09PSAnYnVpbGQnICYmICF0LnBheWxvYWQ/LnZpbGxhZ2VySWRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnQsIHBheWxvYWQ6IHsgLi4udC5wYXlsb2FkLCB2aWxsYWdlcklkczogW10gfSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MobWlncmF0ZWRUYXNrcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldEN1cnJlbnRFdmVudChudWxsKTtcbiAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKCdXZWxjb21lIGJhY2sgdG8geW91ciBzYWdhLicpO1xuICAgICAgICAgICAgc2V0R2FtZVN0YXRlKEdhbWVTdGF0dXMuUExBWUlORyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYENvdWxkIG5vdCBmaW5kIGEgc2F2ZWQgZ2FtZSBuYW1lZCBcIiR7c2F2ZU5hbWV9XCIuYCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXZlbnQgVHJpZ2dlciBUaW1lclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChnYW1lU3RhdGUgIT09IEdhbWVTdGF0dXMuUExBWUlORykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbWFqb3JUYXNrSW5Qcm9ncmVzcyA9IGFjdGl2ZVRhc2tzLnNvbWUodCA9PiB0LnR5cGUgIT09ICdnYXRoZXInKTtcblxuICAgICAgICBpZiAoIWN1cnJlbnRFdmVudCAmJiAhcGxheWVyQWN0aW9uICYmICFtYWpvclRhc2tJblByb2dyZXNzKSB7XG4gICAgICAgICAgICBzY2hlZHVsZU5leHRFdmVudCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VGltZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGV2ZW50VGltZXJSZWYuY3VycmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50VGltZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChldmVudFRpbWVyUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtnYW1lU3RhdGUsIGN1cnJlbnRFdmVudCwgcGxheWVyQWN0aW9uLCBhY3RpdmVUYXNrcywgc2NoZWR1bGVOZXh0RXZlbnRdKTtcblxuICAgIGNvbnN0IGhhbmRsZUV2ZW50Q2hvaWNlID0gKGNob2ljZTogR2FtZUV2ZW50Q2hvaWNlKSA9PiB7XG4gICAgICAgIGFkZFRvTG9nKGBEZWNpc2lvbjogXCIke2Nob2ljZS50ZXh0fVwiYCwgJ2V2ZW50Jyk7XG5cbiAgICAgICAgLy8gMS4gQ2hlY2sgYW5kIGFwcGx5IGNvc3RcbiAgICAgICAgaWYgKGNob2ljZS5jb3N0KSB7XG4gICAgICAgICAgICBjb25zdCBtaXNzaW5nUmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY2hvaWNlLmNvc3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNLZXkgPSBrZXkgYXMga2V5b2YgUmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZXNbcmVzS2V5XSA8IChjaG9pY2UuY29zdFtyZXNLZXldIHx8IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pc3NpbmdSZXMucHVzaChyZXNLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaXNzaW5nUmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYFlvdSBsYWNrIHRoZSByZXF1aXJlZCByZXNvdXJjZXM6ICR7bWlzc2luZ1Jlcy5qb2luKCcsICcpfS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZWdhdGl2ZUNvc3Q6IFJlc291cmNlRGVsdGFzID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjaG9pY2UuY29zdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc0tleSA9IGtleSBhcyBrZXlvZiBSZXNvdXJjZXM7XG4gICAgICAgICAgICAgICAgbmVnYXRpdmVDb3N0W3Jlc0tleV0gPSAtKGNob2ljZS5jb3N0W3Jlc0tleV0gfHwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVSZXNvdXJjZXMobmVnYXRpdmVDb3N0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gMi4gRGV0ZXJtaW5lIHN1Y2Nlc3NcbiAgICAgICAgY29uc3QgaXNTdWNjZXNzID0gY2hvaWNlLnN1Y2Nlc3NDaGFuY2UgPT09IHVuZGVmaW5lZCB8fCBNYXRoLnJhbmRvbSgpIDwgY2hvaWNlLnN1Y2Nlc3NDaGFuY2U7XG4gICAgICAgIGNvbnN0IGVmZmVjdHMgPSBpc1N1Y2Nlc3MgPyBjaG9pY2Uuc3VjY2Vzc0VmZmVjdHMgOiBjaG9pY2UuZmFpbHVyZUVmZmVjdHM7XG5cbiAgICAgICAgaWYgKCFlZmZlY3RzKSB7IC8vIEhhbmRsZSBjYXNlcyB3aXRoIG5vIGZhaWx1cmUgZWZmZWN0IGRlZmluZWRcbiAgICAgICAgICAgIHNldEN1cnJlbnRFdmVudChudWxsKTtcbiAgICAgICAgICAgIHNjaGVkdWxlTmV4dEV2ZW50KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyAzLiBDYWxjdWxhdGUgcmVzb3VyY2UgY2hhbmdlXG4gICAgICAgIGxldCBhbW91bnQgPSAwO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlZmZlY3RzLmFtb3VudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSBlZmZlY3RzLmFtb3VudDtcbiAgICAgICAgICAgIGFtb3VudCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbW91bnQgPSBlZmZlY3RzLmFtb3VudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gNC4gQXBwbHkgZWZmZWN0c1xuICAgICAgICBpZiAoZWZmZWN0cy5yZXNvdXJjZSAhPT0gJ25vbmUnICYmIGFtb3VudCAhPT0gMCkge1xuICAgICAgICAgICAgdXBkYXRlUmVzb3VyY2VzKHsgW2VmZmVjdHMucmVzb3VyY2VdOiBhbW91bnQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDUuIExvZyBhbmQgdXBkYXRlIFVJXG4gICAgICAgIGFkZFRvTG9nKGVmZmVjdHMubG9nLCBlZmZlY3RzLnJlc291cmNlICE9PSAnbm9uZScgPyBlZmZlY3RzLnJlc291cmNlIDogJ3N5c3RlbScpO1xuICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhlZmZlY3RzLmxvZyk7XG4gICAgICAgIHNldEN1cnJlbnRFdmVudChudWxsKTtcbiAgICAgICAgc2NoZWR1bGVOZXh0RXZlbnQoKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlSW5pdGlhdGVCdWlsZCA9ICh2aWxsYWdlcklkOiBzdHJpbmcsIHJlY3Q6IERPTVJlY3QpID0+IHtcbiAgICAgICAgaWYgKGlzVmlsbGFnZXJCdXN5KHZpbGxhZ2VySWQpKSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oXCJUaGlzIHZpbGxhZ2VyIGlzIGFscmVhZHkgYnVzeS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0QnVpbGRQYW5lbFN0YXRlKHsgaXNPcGVuOiB0cnVlLCB2aWxsYWdlcklkLCBhbmNob3JSZWN0OiByZWN0IH0pO1xuICAgICAgICBzZXRVbml0TWFuYWdlbWVudFBhbmVsKHsgaXNPcGVuOiBmYWxzZSwgdHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGhhbmRsZVN0YXJ0UGxhY2VtZW50ID0gKGJ1aWxkaW5nSWQ6IEJ1aWxkaW5nVHlwZSkgPT4ge1xuICAgICAgICBjb25zdCB2aWxsYWdlcklkID0gYnVpbGRQYW5lbFN0YXRlLnZpbGxhZ2VySWQ7XG4gICAgICAgIGlmICghdmlsbGFnZXJJZCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nSW5mbyA9IEJVSUxESU5HU19JTkZPLmZpbmQoYiA9PiBiLmlkID09PSBidWlsZGluZ0lkKTtcbiAgICAgICAgaWYgKCFidWlsZGluZ0luZm8pIHJldHVybjtcblxuICAgICAgICBjb25zdCBpc0FscmVhZHlDb25zdHJ1Y3RpbmcgPSBhY3RpdmVUYXNrcy5zb21lKHQgPT4gdC50eXBlID09PSAnYnVpbGQnICYmIHQucGF5bG9hZD8uYnVpbGRpbmdUeXBlID09PSBidWlsZGluZ0luZm8uaWQpO1xuICAgICAgICBpZiAoYnVpbGRpbmdJbmZvLmlzVW5pcXVlICYmIChidWlsZGluZ3NbYnVpbGRpbmdJbmZvLmlkXS5sZW5ndGggPiAwIHx8IGlzQWxyZWFkeUNvbnN0cnVjdGluZykpIHtcbiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihgWW91IGNhbiBvbmx5IGJ1aWxkIG9uZSAke2J1aWxkaW5nSW5mby5uYW1lfS5gKTsgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb3N0ID0gYnVpbGRpbmdJbmZvLmNvc3Q7XG4gICAgICAgIGlmICghdW5saW1pdGVkUmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBjb25zdCBtaXNzaW5nOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXMgaW4gY29zdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc291cmNlS2V5ID0gcmVzIGFzIGtleW9mIFJlc291cmNlcztcbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VzW3Jlc291cmNlS2V5XSA8IChjb3N0W3Jlc291cmNlS2V5XSA/PyAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgbWlzc2luZy5wdXNoKGAkeyhjb3N0W3Jlc291cmNlS2V5XSA/PyAwKSAtIHJlc291cmNlc1tyZXNvdXJjZUtleV19ICR7cmVzb3VyY2VLZXl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYE5lZWQgJHttaXNzaW5nLmpvaW4oJyBhbmQgJyl9LmApOyByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0UGxheWVyQWN0aW9uKHsgbW9kZTogJ2J1aWxkJywgYnVpbGRpbmdUeXBlOiBidWlsZGluZ0lkLCB2aWxsYWdlcklkIH0pO1xuICAgICAgICBzZXRCdWlsZFBhbmVsU3RhdGUoeyBpc09wZW46IGZhbHNlLCB2aWxsYWdlcklkOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgU2VsZWN0IGEgbG9jYXRpb24gdG8gYnVpbGQgYSAke2J1aWxkaW5nSW5mby5uYW1lfS4gUmlnaHQtY2xpY2sgdG8gY2FuY2VsLmApO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDb25maXJtUGxhY2VtZW50ID0gKHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0pID0+IHtcbiAgICAgICAgaWYgKHBsYXllckFjdGlvbj8ubW9kZSAhPT0gJ2J1aWxkJykgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IGJ1aWxkaW5nVHlwZSwgdmlsbGFnZXJJZCB9ID0gcGxheWVyQWN0aW9uO1xuICAgICAgICBjb25zdCBidWlsZGluZ0luZm8gPSBCVUlMRElOR1NfSU5GTy5maW5kKGIgPT4gYi5pZCA9PT0gYnVpbGRpbmdUeXBlKTtcbiAgICAgICAgY29uc3QgYnVpbGRlciA9IHVuaXRzLnZpbGxhZ2Vycy5maW5kKHYgPT4gdi5pZCA9PT0gdmlsbGFnZXJJZCk7XG4gICAgICAgIGlmICghYnVpbGRpbmdJbmZvIHx8ICFidWlsZGVyKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBpZiAoIXVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgY29uc3QgY29zdCA9IGJ1aWxkaW5nSW5mby5jb3N0O1xuICAgICAgICAgICAgY29uc3QgbmVnYXRpdmVDb3N0OiBSZXNvdXJjZURlbHRhcyA9IHt9O1xuICAgICAgICAgICAgZm9yKGNvbnN0IHJlc291cmNlIGluIGNvc3QpIHtcbiAgICAgICAgICAgICAgICBuZWdhdGl2ZUNvc3RbcmVzb3VyY2UgYXMga2V5b2YgUmVzb3VyY2VzXSA9IC0oY29zdFtyZXNvdXJjZSBhcyBrZXlvZiBSZXNvdXJjZXNdIHx8IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlUmVzb3VyY2VzKG5lZ2F0aXZlQ29zdCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ1aWxkVGltZSA9IGJ1aWxkaW5nSW5mby5idWlsZFRpbWUgKiAxMDAwO1xuICAgICAgICBjb25zdCB0YXNrSWQgPSBgJHtEYXRlLm5vdygpfS1idWlsZC0ke2J1aWxkaW5nVHlwZX1gO1xuICAgICAgICBjb25zdCB0YXNrUGF5bG9hZCA9IHsgYnVpbGRpbmdUeXBlLCB2aWxsYWdlcklkczogW3ZpbGxhZ2VySWRdLCBwb3NpdGlvbiB9O1xuXG4gICAgICAgIGlmICh1bmxpbWl0ZWRSZXNvdXJjZXMpIHtcbiAgICAgICAgICAgICBoYW5kbGVUYXNrQ29tcGxldGlvbih7IGlkOiB0YXNrSWQsIHR5cGU6ICdidWlsZCcsIHN0YXJ0VGltZTogMCwgZHVyYXRpb246IDAsIHBheWxvYWQ6IHsgLi4udGFza1BheWxvYWQsIHBvc2l0aW9uIH0gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrOiBHYW1lVGFzayA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGFza0lkLCBcbiAgICAgICAgICAgICAgICB0eXBlOiAnYnVpbGQnLCBcbiAgICAgICAgICAgICAgICBzdGFydFRpbWU6IERhdGUubm93KCksIFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBidWlsZFRpbWUsIFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHRhc2tQYXlsb2FkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBbLi4ucHJldiwgbmV3VGFza10pO1xuICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYCR7YnVpbGRlci5uYW1lfSBoYXMgc3RhcnRlZCBjb25zdHJ1Y3RpbmcgYSAke2J1aWxkaW5nSW5mby5uYW1lfS5gKTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGAke2J1aWxkZXIubmFtZX0gYmVnYW4gY29uc3RydWN0aW9uIG9mIGEgbmV3ICR7YnVpbGRpbmdJbmZvLm5hbWV9LmAsIGJ1aWxkaW5nVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFBsYXllckFjdGlvbihudWxsKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQ2FuY2VsUGxheWVyQWN0aW9uID0gKCkgPT4ge1xuICAgICAgICBzZXRQbGF5ZXJBY3Rpb24obnVsbCk7XG4gICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKCdDb21tYW5kIGNhbmNlbGxlZC4nKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlRGVtb2xpc2hCdWlsZGluZyA9ICh0eXBlOiBCdWlsZGluZ1R5cGUsIGlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYoYWN0aXZlVGFza3Muc29tZSh0ID0+IHQucGF5bG9hZD8uYnVpbGRpbmdJZCA9PT0gaWQpKSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oXCJDYW5ub3QgZGVtb2xpc2ggYSBidWlsZGluZyB3aXRoIGFuIGFjdGl2ZSB0YXNrLlwiKTsgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nSW5mbyA9IEJVSUxESU5HU19JTkZPLmZpbmQoYiA9PiBiLmlkID09PSB0eXBlKTtcbiAgICAgICAgY29uc3QgYnVpbGRpbmdJbnN0YW5jZSA9IGJ1aWxkaW5nc1t0eXBlXS5maW5kKGIgPT4gYi5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAoIWJ1aWxkaW5nSW5mbyB8fCAhYnVpbGRpbmdJbnN0YW5jZSkgcmV0dXJuO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2hvdXNlcycgJiYgcG9wdWxhdGlvbi5jdXJyZW50ID4gKGJ1aWxkaW5ncy50b3duQ2VudGVyPy5sZW5ndGggPiAwID8gMjAgOiAwKSArIChidWlsZGluZ3MuaG91c2VzLmxlbmd0aCAtIDEpICogNSkge1xuICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihcIkNhbm5vdCBkZW1vbGlzaCB0aGlzIGhvdXNlLCB5b3VyIHBlb3BsZSB3b3VsZCBiZSBob21lbGVzcy5cIik7IHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWZ1bmQ6IFJlc291cmNlRGVsdGFzID0ge307XG4gICAgICAgIGxldCByZWZ1bmRNZXNzYWdlUGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcmVzIGluIGJ1aWxkaW5nSW5mby5jb3N0KSB7XG4gICAgICAgICAgICBjb25zdCByZXNvdXJjZUtleSA9IHJlcyBhcyBrZXlvZiBSZXNvdXJjZXM7XG4gICAgICAgICAgICBjb25zdCBjb3N0ID0gYnVpbGRpbmdJbmZvLmNvc3RbcmVzb3VyY2VLZXldIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBhbW91bnQgPSBNYXRoLmZsb29yKGNvc3QgKiAwLjUpO1xuICAgICAgICAgICAgaWYgKGFtb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICByZWZ1bmRbcmVzb3VyY2VLZXldID0gYW1vdW50O1xuICAgICAgICAgICAgICAgIHJlZnVuZE1lc3NhZ2VQYXJ0cy5wdXNoKGAke2Ftb3VudH0gJHtyZXNvdXJjZUtleX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVSZXNvdXJjZXMocmVmdW5kKTtcbiAgICAgICAgc2V0QnVpbGRpbmdzKHByZXYgPT4gKHsgLi4ucHJldiwgW3R5cGVdOiBwcmV2W3R5cGVdLmZpbHRlcihiID0+IGIuaWQgIT09IGlkKSB9KSk7XG4gICAgICAgIGFkZFRvTG9nKGAke2J1aWxkaW5nSW5zdGFuY2UubmFtZX0gKCR7YnVpbGRpbmdJbmZvLm5hbWV9KSB3YXMgZGVtb2xpc2hlZC5gLCB0eXBlKTtcbiAgICAgICAgaWYgKHJlZnVuZE1lc3NhZ2VQYXJ0cy5sZW5ndGggPiAwKSB7IGFkZE5vdGlmaWNhdGlvbihgU2FsdmFnZWQgJHtyZWZ1bmRNZXNzYWdlUGFydHMuam9pbignLCAnKX0uYCk7IH1cbiAgICAgICAgc2V0QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwoe2lzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVVwZGF0ZUJ1aWxkaW5nID0gKHR5cGU6IEJ1aWxkaW5nVHlwZSwgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldEJ1aWxkaW5ncyhwcmV2ID0+ICh7IC4uLnByZXYsIFt0eXBlXTogcHJldlt0eXBlXS5tYXAoYiA9PiBiLmlkID09PSBpZCA/IHsgLi4uYiwgbmFtZSB9IDogYikgfSkpO1xuICAgICAgICBhZGROb3RpZmljYXRpb24oXCJCdWlsZGluZyByZW5hbWVkLlwiKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlVHJhaW5WaWxsYWdlcnMgPSAoY291bnQ6IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAoYWN0aXZlVGFza3Muc29tZSh0ID0+IHQudHlwZSA9PT0gJ3RyYWluX3ZpbGxhZ2VyJykgfHwgY291bnQgPD0gMCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB2aWxsYWdlckNvc3QgPSA1MDtcbiAgICAgICAgY29uc3QgdG90YWxDb3N0ID0gdmlsbGFnZXJDb3N0ICogY291bnQ7XG4gICAgICAgIGlmIChwb3B1bGF0aW9uLmN1cnJlbnQgKyBjb3VudCA+IHBvcHVsYXRpb24uY2FwYWNpdHkpIHsgYWRkTm90aWZpY2F0aW9uKGBOZWVkIHNwYWNlIGZvciAke2NvdW50fSBtb3JlIHZpbGxhZ2Vycy5gKTsgcmV0dXJuOyB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b3duQ2VudGVyID0gYnVpbGRpbmdzLnRvd25DZW50ZXI/LlswXTtcbiAgICAgICAgaWYgKCF0b3duQ2VudGVyKSB7IGFkZE5vdGlmaWNhdGlvbihgTm8gVG93biBDZW50ZXIgdG8gdHJhaW4gdmlsbGFnZXJzLmApOyByZXR1cm47IH1cblxuICAgICAgICBpZiAoIXVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgaWYgKHJlc291cmNlcy5mb29kIDwgdG90YWxDb3N0KSB7IGFkZE5vdGlmaWNhdGlvbihgTmVlZCAke3RvdGFsQ29zdCAtIHJlc291cmNlcy5mb29kfSBtb3JlIEZvb2QuYCk7IHJldHVybjsgfVxuICAgICAgICAgICAgdXBkYXRlUmVzb3VyY2VzKHsgZm9vZDogLXRvdGFsQ29zdCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFpblRpbWUgPSAxMDAwMCAqIGNvdW50OyAvLyAxMHMgcGVyIHZpbGxhZ2VyXG4gICAgICAgIGlmKHVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgaGFuZGxlVGFza0NvbXBsZXRpb24oeyBpZDogJ2luc3RhbnQnLCB0eXBlOiAndHJhaW5fdmlsbGFnZXInLCBzdGFydFRpbWU6IDAsIGR1cmF0aW9uOiAwLCBwYXlsb2FkOiB7IGNvdW50IH0gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrSWQgPSBgJHtEYXRlLm5vdygpfS10cmFpbi12aWxsYWdlcmA7XG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrOiBHYW1lVGFzayA9IHsgaWQ6IHRhc2tJZCwgdHlwZTogJ3RyYWluX3ZpbGxhZ2VyJywgc3RhcnRUaW1lOiBEYXRlLm5vdygpLCBkdXJhdGlvbjogdHJhaW5UaW1lLCBwYXlsb2FkOiB7IGNvdW50LCBidWlsZGluZ0lkOiB0b3duQ2VudGVyLmlkIH0gfTtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4gWy4uLnByZXYsIG5ld1Rhc2tdKTtcbiAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKGBUcmFpbmluZyAke2NvdW50fSB2aWxsYWdlcihzKS4uLmApO1xuICAgICAgICAgICAgYWRkVG9Mb2coYEJlZ2FuIHRyYWluaW5nICR7Y291bnR9IG5ldyB2aWxsYWdlcihzKS5gLCAndmlsbGFnZXInKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBoYW5kbGVUcmFpblVuaXRzID0gKHVuaXRUeXBlOiBNaWxpdGFyeVVuaXRUeXBlLCBjb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHVuaXRJbmZvID0gVU5JVF9JTkZPLmZpbmQodSA9PiB1LmlkID09PSB1bml0VHlwZSk7XG4gICAgICAgIGlmICghdW5pdEluZm8gfHwgYWN0aXZlVGFza3Muc29tZSh0ID0+IHQucGF5bG9hZD8udW5pdFR5cGUgPT09IHVuaXRUeXBlKSB8fCBjb3VudCA8PSAwKSByZXR1cm47XG4gICAgICAgIGlmIChwb3B1bGF0aW9uLmN1cnJlbnQgKyBjb3VudCA+IHBvcHVsYXRpb24uY2FwYWNpdHkpIHsgYWRkTm90aWZpY2F0aW9uKGBOZWVkIHNwYWNlIGZvciAke2NvdW50fSBtb3JlIHVuaXRzLmApOyByZXR1cm47IH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRyYWluaW5nQnVpbGRpbmcgPSBidWlsZGluZ3NbdW5pdEluZm8ucmVxdWlyZWRCdWlsZGluZ10/LlswXTtcbiAgICAgICAgaWYgKCF0cmFpbmluZ0J1aWxkaW5nKSB7IGFkZE5vdGlmaWNhdGlvbihgTm8gJHt1bml0SW5mby5yZXF1aXJlZEJ1aWxkaW5nfSB0byB0cmFpbiB1bml0cy5gKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgaWYgKCF1bmxpbWl0ZWRSZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ29zdDogUmVzb3VyY2VEZWx0YXMgPSB7fTsgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzIGluIHVuaXRJbmZvLmNvc3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvdXJjZUtleSA9IHJlcyBhcyBrZXlvZiBSZXNvdXJjZXM7XG4gICAgICAgICAgICAgICAgY29uc3QgY29zdCA9ICh1bml0SW5mby5jb3N0W3Jlc291cmNlS2V5XSB8fCAwKSAqIGNvdW50O1xuICAgICAgICAgICAgICAgIHRvdGFsQ29zdFtyZXNvdXJjZUtleV0gPSAtY29zdDtcbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VzW3Jlc291cmNlS2V5XSA8IGNvc3QpIG1pc3NpbmcucHVzaChgJHtjb3N0IC0gcmVzb3VyY2VzW3Jlc291cmNlS2V5XX0gJHtyZXNvdXJjZUtleX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCA+IDApIHsgYWRkTm90aWZpY2F0aW9uKGBOZWVkICR7bWlzc2luZy5qb2luKCcgYW5kICcpfS5gKTsgcmV0dXJuOyB9XG4gICAgICAgICAgICB1cGRhdGVSZXNvdXJjZXModG90YWxDb3N0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFpblRpbWUgPSB1bml0SW5mby50cmFpblRpbWUgKiAxMDAwICogY291bnQ7XG4gICAgICAgIGlmKHVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgaGFuZGxlVGFza0NvbXBsZXRpb24oeyBpZDogJ2luc3RhbnQnLCB0eXBlOiAndHJhaW5fbWlsaXRhcnknLCBzdGFydFRpbWU6IDAsIGR1cmF0aW9uOiAwLCBwYXlsb2FkOiB7IHVuaXRUeXBlLCBjb3VudCB9IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGFza0lkID0gYCR7RGF0ZS5ub3coKX0tdHJhaW4tJHt1bml0VHlwZX1gO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFzazogR2FtZVRhc2sgPSB7IGlkOiB0YXNrSWQsIHR5cGU6ICd0cmFpbl9taWxpdGFyeScsIHN0YXJ0VGltZTogRGF0ZS5ub3coKSwgZHVyYXRpb246IHRyYWluVGltZSwgcGF5bG9hZDogeyB1bml0VHlwZSwgY291bnQsIGJ1aWxkaW5nSWQ6IHRyYWluaW5nQnVpbGRpbmcuaWQgfSB9O1xuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBbLi4ucHJldiwgbmV3VGFza10pO1xuICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYFRyYWluaW5nICR7Y291bnR9ICR7dW5pdEluZm8ubmFtZX0ocykuLi5gKTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGBCZWdhbiB0cmFpbmluZyAke2NvdW50fSBuZXcgJHt1bml0SW5mby5uYW1lfShzKS5gLCB1bml0VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwoeyBpc09wZW46IGZhbHNlLCB0eXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVEaXNtaXNzU3BlY2lmaWNVbml0ID0gKHR5cGU6ICd2aWxsYWdlcnMnIHwgJ21pbGl0YXJ5JywgaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3ZpbGxhZ2VycycgJiYgaXNWaWxsYWdlckJ1c3koaWQpKSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oXCJDYW5ub3QgZGlzbWlzcyBhIGJ1c3kgdmlsbGFnZXIuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVuaXQgPSB1bml0c1t0eXBlXS5maW5kKHUgPT4gdS5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAoIXVuaXQpIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGUgPT09ICd2aWxsYWdlcnMnICYmIHVuaXRzLnZpbGxhZ2Vycy5sZW5ndGggPD0gMSkgeyBhZGROb3RpZmljYXRpb24oXCJDYW5ub3QgZGlzbWlzcyB5b3VyIGxhc3QgdmlsbGFnZXIuXCIpOyByZXR1cm47IH1cbiAgICAgICAgc2V0VW5pdHMocHJldiA9PiAoeyAuLi5wcmV2LCBbdHlwZV06IHByZXZbdHlwZV0uZmlsdGVyKHUgPT4gdS5pZCAhPT0gaWQpIH0pKTtcbiAgICAgICAgY29uc3QgdW5pdFR5cGVOYW1lID0gdHlwZSA9PT0gJ3ZpbGxhZ2VycycgPyAndmlsbGFnZXInIDogKHVuaXQgYXMgTWlsaXRhcnlVbml0KS51bml0VHlwZTtcbiAgICAgICAgYWRkVG9Mb2coYCR7dW5pdC5uYW1lfSB0aGUgJHt1bml0VHlwZU5hbWV9IGhhcyBiZWVuIGRpc21pc3NlZC5gLCB0eXBlID09PSAndmlsbGFnZXJzJyA/ICd2aWxsYWdlcicgOiAodW5pdCBhcyBNaWxpdGFyeVVuaXQpLnVuaXRUeXBlKTtcbiAgICAgICAgYWRkTm90aWZpY2F0aW9uKGAke3VuaXQubmFtZX0gd2FzIGRpc21pc3NlZC5gKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlVXBkYXRlVW5pdCA9ICh0eXBlOiAndmlsbGFnZXJzJyB8ICdtaWxpdGFyeScsIGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgIHNldFVuaXRzKHByZXYgPT4gKHsgLi4ucHJldiwgW3R5cGVdOiBwcmV2W3R5cGVdLm1hcCh1ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFVuaXQgPSB7IC4uLnUsIG5hbWUgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdtaWxpdGFyeScgJiYgdGl0bGUgIT09IHVuZGVmaW5lZCkgeyAodXBkYXRlZFVuaXQgYXMgTWlsaXRhcnlVbml0KS50aXRsZSA9IHRpdGxlOyB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkVW5pdDtcbiAgICAgICAgICAgICAgICB9IHJldHVybiB1O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkpO1xuICAgICAgICBhZGROb3RpZmljYXRpb24oXCJVbml0IHVwZGF0ZWQuXCIpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVBc3NpZ25WaWxsYWdlcnNUb05vZGUgPSAobm9kZUlkOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgaWRsZVZpbGxhZ2VycyA9IHVuaXRzLnZpbGxhZ2Vycy5maWx0ZXIodiA9PiAhaXNWaWxsYWdlckJ1c3kodi5pZCkpO1xuICAgICAgICBpZiAoY291bnQgPD0gMCkgcmV0dXJuO1xuICAgICAgICBsZXQgY2FwcGVkQ291bnQgPSBNYXRoLm1pbihjb3VudCwgaWRsZVZpbGxhZ2Vycy5sZW5ndGgpO1xuICAgICAgICBpZiAoY2FwcGVkQ291bnQgPT09IDApIHsgYWRkTm90aWZpY2F0aW9uKFwiTm8gaWRsZSB2aWxsYWdlcnMgYXZhaWxhYmxlLlwiKTsgcmV0dXJuOyB9XG4gICAgXG4gICAgICAgIGNvbnN0IHZpbGxhZ2Vyc1RvQXNzaWduID0gaWRsZVZpbGxhZ2Vycy5zbGljZSgwLCBjYXBwZWRDb3VudCk7XG4gICAgICAgIGNvbnN0IHZpbGxhZ2VySWRzVG9Bc3NpZ24gPSB2aWxsYWdlcnNUb0Fzc2lnbi5tYXAodiA9PiB2LmlkKTtcbiAgICBcbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHJlc291cmNlTm9kZXMuZmluZChuID0+IG4uaWQgPT09IG5vZGVJZCk7XG4gICAgICAgIGlmICghdGFyZ2V0Tm9kZSkgcmV0dXJuO1xuICAgIFxuICAgICAgICBzZXRSZXNvdXJjZU5vZGVzKHByZXZOb2RlcyA9PiBcbiAgICAgICAgICAgIHByZXZOb2Rlcy5tYXAobiA9PiBuLmlkID09PSBub2RlSWQgPyB7Li4ubiwgYXNzaWduZWRWaWxsYWdlcnM6IFsuLi5uZXcgU2V0KFsuLi5uLmFzc2lnbmVkVmlsbGFnZXJzLCAuLi52aWxsYWdlcklkc1RvQXNzaWduXSldfSA6IG4pXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAodW5saW1pdGVkUmVzb3VyY2VzKSB7IC8vIEluc3RhbnQgZ2F0aGVyIGZvciB0ZXN0IG1vZGVcbiAgICAgICAgICAgIHVwZGF0ZVJlc291cmNlcyh7IFt0YXJnZXROb2RlLnR5cGVdOiB0YXJnZXROb2RlLmFtb3VudCB9KTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGAke2NhcHBlZENvdW50fSB2aWxsYWdlcihzKSBpbnN0YW50bHkgZ2F0aGVyZWQgJHtNYXRoLmZsb29yKHRhcmdldE5vZGUuYW1vdW50KX0gJHt0YXJnZXROb2RlLnR5cGV9LmAsIHRhcmdldE5vZGUudHlwZSk7XG4gICAgICAgICAgICBzZXRSZXNvdXJjZU5vZGVzKHByZXYgPT4gcHJldi5maWx0ZXIobiA9PiBuLmlkICE9PSBub2RlSWQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVGFzayA9IGFjdGl2ZVRhc2tzLmZpbmQodCA9PiB0LnR5cGUgPT09ICdnYXRoZXInICYmIHQucGF5bG9hZD8ucmVzb3VyY2VOb2RlSWQgPT09IG5vZGVJZCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdUYXNrKSB7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBwcmV2Lm1hcCh0ID0+IHQuaWQgPT09IGV4aXN0aW5nVGFzay5pZCA/IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogeyAuLi50LnBheWxvYWQsIHZpbGxhZ2VySWRzOiBbLi4ubmV3IFNldChbLi4udC5wYXlsb2FkIS52aWxsYWdlcklkcyEsIC4uLnZpbGxhZ2VySWRzVG9Bc3NpZ25dKV0gfVxuICAgICAgICAgICAgICAgIH0gOiB0KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICBjb25zdCBuZXdUYXNrOiBHYW1lVGFzayA9IHsgaWQ6IGBnYXRoZXItJHtub2RlSWR9YCwgdHlwZTogJ2dhdGhlcicsIHN0YXJ0VGltZTogRGF0ZS5ub3coKSwgZHVyYXRpb246IDg2NDAwMDAwLCBwYXlsb2FkOiB7IHJlc291cmNlTm9kZUlkOiBub2RlSWQsIHZpbGxhZ2VySWRzOiB2aWxsYWdlcklkc1RvQXNzaWduIH19OyAvLyBEdXJhdGlvbiBpcyBhcmJpdHJhcnksIGxvb3AgaGFuZGxlcyBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4gWy4uLnByZXYsIG5ld1Rhc2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBhZGRUb0xvZyhgJHtjYXBwZWRDb3VudH0gdmlsbGFnZXIocykgYXNzaWduZWQgdG8gZ2F0aGVyICR7dGFyZ2V0Tm9kZS50eXBlfS5gLCB0YXJnZXROb2RlLnR5cGUpO1xuICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgJHtjYXBwZWRDb3VudH0gdmlsbGFnZXIocykgYXJlIG5vdyBnYXRoZXJpbmcgJHt0YXJnZXROb2RlLnR5cGV9LmApO1xuICAgICAgICBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZSh7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVSZWNhbGxWaWxsYWdlcnMgPSAodGFyZ2V0SWQ6IHN0cmluZywgY291bnQ6IG51bWJlciwgdHlwZTogJ3Jlc291cmNlJyB8ICdjb25zdHJ1Y3Rpb24nKSA9PiB7XG4gICAgICAgIGlmICh0eXBlID09PSAncmVzb3VyY2UnKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gcmVzb3VyY2VOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gdGFyZ2V0SWQpO1xuICAgICAgICAgICAgaWYgKCFub2RlIHx8IChub2RlLmFzc2lnbmVkVmlsbGFnZXJzIHx8IFtdKS5sZW5ndGggPCBjb3VudCkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdmlsbGFnZXJzVG9SZWNhbGwgPSBub2RlLmFzc2lnbmVkVmlsbGFnZXJzLnNsaWNlKG5vZGUuYXNzaWduZWRWaWxsYWdlcnMubGVuZ3RoIC0gY291bnQpO1xuICAgICAgICAgICAgc2V0UmVzb3VyY2VOb2RlcyhwcmV2ID0+IHByZXYubWFwKG4gPT4gbi5pZCA9PT0gdGFyZ2V0SWQgPyB7IC4uLm4sIGFzc2lnbmVkVmlsbGFnZXJzOiBuLmFzc2lnbmVkVmlsbGFnZXJzLmZpbHRlcihpZCA9PiAhdmlsbGFnZXJzVG9SZWNhbGwuaW5jbHVkZXMoaWQpKSB9IDogbikpO1xuICAgIFxuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0luZGV4ID0gcHJldi5maW5kSW5kZXgodCA9PiB0LnR5cGUgPT09ICdnYXRoZXInICYmIHQucGF5bG9hZD8ucmVzb3VyY2VOb2RlSWQgPT09IHRhcmdldElkKTtcbiAgICAgICAgICAgICAgICBpZiAodGFza0luZGV4ID09PSAtMSkgcmV0dXJuIHByZXY7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGFzayA9IHByZXZbdGFza0luZGV4XTtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdWaWxsYWdlcnMgPSB0YXNrLnBheWxvYWQhLnZpbGxhZ2VySWRzIS5maWx0ZXIoaWQgPT4gIXZpbGxhZ2Vyc1RvUmVjYWxsLmluY2x1ZGVzKGlkKSk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1ZpbGxhZ2Vycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXYuZmlsdGVyKChfLCBpKSA9PiBpICE9PSB0YXNrSW5kZXgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2Lm1hcCgodCwgaSkgPT4gaSA9PT0gdGFza0luZGV4ID8geyAuLi50LCBwYXlsb2FkOiB7IC4uLnQucGF5bG9hZCwgdmlsbGFnZXJJZHM6IHJlbWFpbmluZ1ZpbGxhZ2VycyB9IH0gOiB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGAke2NvdW50fSB2aWxsYWdlcihzKSByZWNhbGxlZCBmcm9tIGdhdGhlcmluZyAke25vZGUudHlwZX0uYCwgJ3ZpbGxhZ2VyJyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGNvbnN0cnVjdGlvblxuICAgICAgICAgICAgY29uc3QgdGFzayA9IGFjdGl2ZVRhc2tzLmZpbmQodCA9PiB0LmlkID09PSB0YXJnZXRJZCk7XG4gICAgICAgICAgICBpZiAoIXRhc2sgfHwgdGFzay50eXBlICE9PSAnYnVpbGQnIHx8ICh0YXNrLnBheWxvYWQ/LnZpbGxhZ2VySWRzPy5sZW5ndGggPz8gMCkgPCBjb3VudCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB2aWxsYWdlcnNUb1JlY2FsbCA9IHRhc2sucGF5bG9hZCEudmlsbGFnZXJJZHMhLnNsaWNlKHRhc2sucGF5bG9hZCEudmlsbGFnZXJJZHMhLmxlbmd0aCAtIGNvdW50KTtcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1ZpbGxhZ2VycyA9IHRhc2sucGF5bG9hZCEudmlsbGFnZXJJZHMhLmZpbHRlcihpZCA9PiAhdmlsbGFnZXJzVG9SZWNhbGwuaW5jbHVkZXMoaWQpKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdWaWxsYWdlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKFwiQ2Fubm90IHJlY2FsbCB0aGUgbGFzdCBidWlsZGVyLiBUaGlzIHdvdWxkIGNhbmNlbCB0aGUgcHJvamVjdC5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgYnVpbGRpbmdJbmZvID0gQlVJTERJTkdTX0lORk8uZmluZChiID0+IGIuaWQgPT09IHRhc2sucGF5bG9hZCEuYnVpbGRpbmdUeXBlKSE7XG4gICAgICAgICAgICBjb25zdCB0b3RhbFdvcmsgPSBidWlsZGluZ0luZm8uYnVpbGRUaW1lICogMTAwMDtcbiAgICAgICAgICAgIGNvbnN0IG9sZFdvcmtlckNvdW50ID0gdGFzay5wYXlsb2FkIS52aWxsYWdlcklkcyEubGVuZ3RoO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGltZUVsYXBzZWQgPSBEYXRlLm5vdygpIC0gdGFzay5zdGFydFRpbWU7XG4gICAgICAgICAgICBjb25zdCB3b3JrRG9uZSA9IHRpbWVFbGFwc2VkICogb2xkV29ya2VyQ291bnQ7XG4gICAgICAgICAgICBjb25zdCB3b3JrUmVtYWluaW5nID0gTWF0aC5tYXgoMCwgdG90YWxXb3JrIC0gd29ya0RvbmUpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgbmV3V29ya2VyQ291bnQgPSByZW1haW5pbmdWaWxsYWdlcnMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgbmV3UmVtYWluaW5nRHVyYXRpb24gPSB3b3JrUmVtYWluaW5nIC8gbmV3V29ya2VyQ291bnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4gcHJldi5tYXAodCA9PiB0LmlkID09PSB0YXJnZXRJZCA/IHtcbiAgICAgICAgICAgICAgICAuLi50LFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogbmV3UmVtYWluaW5nRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgcGF5bG9hZDogeyAuLi50LnBheWxvYWQsIHZpbGxhZ2VySWRzOiByZW1haW5pbmdWaWxsYWdlcnMgfVxuICAgICAgICAgICAgfSA6IHQpKTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGAke2NvdW50fSB2aWxsYWdlcihzKSByZWNhbGxlZCBmcm9tIGNvbnN0cnVjdGlvbi4gV29yayB3aWxsIG5vdyBwcm9jZWVkIHNsb3dlci5gLCAndmlsbGFnZXInKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZSh7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVBc3NpZ25WaWxsYWdlcnNUb0NvbnN0cnVjdGlvbiA9IChjb25zdHJ1Y3Rpb25JZDogc3RyaW5nLCBjb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkbGVWaWxsYWdlcnMgPSB1bml0cy52aWxsYWdlcnMuZmlsdGVyKHYgPT4gIWlzVmlsbGFnZXJCdXN5KHYuaWQpKTtcbiAgICAgICAgaWYgKGNvdW50IDw9IDApIHJldHVybjtcbiAgICAgICAgbGV0IGNhcHBlZENvdW50ID0gTWF0aC5taW4oY291bnQsIGlkbGVWaWxsYWdlcnMubGVuZ3RoKTtcbiAgICAgICAgaWYgKGNhcHBlZENvdW50ID09PSAwKSB7IGFkZE5vdGlmaWNhdGlvbihcIk5vIGlkbGUgdmlsbGFnZXJzIGF2YWlsYWJsZSB0byBhc3Npc3QuXCIpOyByZXR1cm47IH1cblxuICAgICAgICBjb25zdCB2aWxsYWdlcnNUb0Fzc2lnbiA9IGlkbGVWaWxsYWdlcnMuc2xpY2UoMCwgY2FwcGVkQ291bnQpLm1hcCh2ID0+IHYuaWQpO1xuICAgICAgICBjb25zdCB0YXNrID0gYWN0aXZlVGFza3MuZmluZCh0ID0+IHQuaWQgPT09IGNvbnN0cnVjdGlvbklkKTtcblxuICAgICAgICBpZiAoIXRhc2sgfHwgdGFzay50eXBlICE9PSAnYnVpbGQnKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgYnVpbGRpbmdJbmZvID0gQlVJTERJTkdTX0lORk8uZmluZChiID0+IGIuaWQgPT09IHRhc2sucGF5bG9hZD8uYnVpbGRpbmdUeXBlKTtcbiAgICAgICAgaWYgKCFidWlsZGluZ0luZm8pIHJldHVybjtcblxuICAgICAgICBjb25zdCBiYXNlRHVyYXRpb24gPSBidWlsZGluZ0luZm8uYnVpbGRUaW1lICogMTAwMDtcbiAgICAgICAgY29uc3Qgb2xkV29ya2VyQ291bnQgPSB0YXNrLnBheWxvYWQ/LnZpbGxhZ2VySWRzPy5sZW5ndGggfHwgMTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRpbWVFbGFwc2VkID0gRGF0ZS5ub3coKSAtIHRhc2suc3RhcnRUaW1lO1xuICAgICAgICBjb25zdCB3b3JrRG9uZSA9IHRpbWVFbGFwc2VkICogb2xkV29ya2VyQ291bnQ7XG4gICAgICAgIGNvbnN0IHRvdGFsV29yayA9IGJhc2VEdXJhdGlvbjtcbiAgICAgICAgY29uc3Qgd29ya1JlbWFpbmluZyA9IE1hdGgubWF4KDAsIHRvdGFsV29yayAtIHdvcmtEb25lKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG5ld1dvcmtlckNvdW50ID0gb2xkV29ya2VyQ291bnQgKyBjYXBwZWRDb3VudDtcbiAgICAgICAgY29uc3QgbmV3UmVtYWluaW5nRHVyYXRpb24gPSB3b3JrUmVtYWluaW5nIC8gbmV3V29ya2VyQ291bnQ7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1cGRhdGVkVmlsbGFnZXJJZHMgPSBbLi4udGFzay5wYXlsb2FkIS52aWxsYWdlcklkcyEsIC4uLnZpbGxhZ2Vyc1RvQXNzaWduXTtcblxuICAgICAgICBzZXRBY3RpdmVUYXNrcyhwcmV2ID0+IHByZXYubWFwKHQgPT4gdC5pZCA9PT0gY29uc3RydWN0aW9uSWQgPyB7XG4gICAgICAgICAgICAuLi50LFxuICAgICAgICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgZHVyYXRpb246IG5ld1JlbWFpbmluZ0R1cmF0aW9uLFxuICAgICAgICAgICAgcGF5bG9hZDogeyAuLi50LnBheWxvYWQsIHZpbGxhZ2VySWRzOiB1cGRhdGVkVmlsbGFnZXJJZHMgfVxuICAgICAgICB9IDogdCkpO1xuXG4gICAgICAgIGFkZFRvTG9nKGAke2NhcHBlZENvdW50fSB2aWxsYWdlcihzKSBhcmUgbm93IGFzc2lzdGluZyB3aXRoIHRoZSAke2J1aWxkaW5nSW5mby5uYW1lfS5gLCBidWlsZGluZ0luZm8uaWQpO1xuICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgQ29uc3RydWN0aW9uIG9mIHRoZSAke2J1aWxkaW5nSW5mby5uYW1lfSBpcyBub3cgZmFzdGVyLmApO1xuICAgICAgICBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZSh7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVBc3NpZ25WaWxsYWdlcnMgPSAodGFyZ2V0SWQ6IHN0cmluZywgY291bnQ6IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAoYXNzaWdubWVudFBhbmVsU3RhdGUudGFyZ2V0VHlwZSA9PT0gJ3Jlc291cmNlJykge1xuICAgICAgICAgICAgaGFuZGxlQXNzaWduVmlsbGFnZXJzVG9Ob2RlKHRhcmdldElkLCBjb3VudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoYXNzaWdubWVudFBhbmVsU3RhdGUudGFyZ2V0VHlwZSA9PT0gJ2NvbnN0cnVjdGlvbicpIHtcbiAgICAgICAgICAgIGhhbmRsZUFzc2lnblZpbGxhZ2Vyc1RvQ29uc3RydWN0aW9uKHRhcmdldElkLCBjb3VudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQWR2YW5jZUFnZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKGFjdGl2ZVRhc2tzLnNvbWUodCA9PiB0LnR5cGUgPT09ICdhZHZhbmNlX2FnZScpKSB7IGFkZE5vdGlmaWNhdGlvbihcIkFkdmFuY2VtZW50IGFscmVhZHkgaW4gcHJvZ3Jlc3MuXCIpOyByZXR1cm47IH1cbiAgICAgICAgaWYgKCF1bmxpbWl0ZWRSZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXNvdXJjZXMuZm9vZCA8IDUwMCB8fCByZXNvdXJjZXMuZ29sZCA8IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pc3Npbmc6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlcy5mb29kIDwgNTAwKSBtaXNzaW5nLnB1c2goYCR7NTAwIC0gcmVzb3VyY2VzLmZvb2R9IEZvb2RgKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VzLmdvbGQgPCAyMDApIG1pc3NpbmcucHVzaChgJHsyMDAgLSByZXNvdXJjZXMuZ29sZH0gR29sZGApO1xuICAgICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihgVG8gYWR2YW5jZSwgeW91IG5lZWQgJHttaXNzaW5nLmpvaW4oJyBhbmQgJyl9LmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZVJlc291cmNlcyh7IGZvb2Q6IC01MDAsIGdvbGQ6IC0yMDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSA2MDAwMDtcbiAgICAgICAgaWYodW5saW1pdGVkUmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBoYW5kbGVUYXNrQ29tcGxldGlvbih7IGlkOiAnaW5zdGFudCcsIHR5cGU6ICdhZHZhbmNlX2FnZScsIHN0YXJ0VGltZTogMCwgZHVyYXRpb246IDAsIHBheWxvYWQ6IHt9IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGFza0lkID0gYCR7RGF0ZS5ub3coKX0tYWR2YW5jZV9hZ2VgO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFzazogR2FtZVRhc2sgPSB7IGlkOiB0YXNrSWQsIHR5cGU6ICdhZHZhbmNlX2FnZScsIHN0YXJ0VGltZTogRGF0ZS5ub3coKSwgZHVyYXRpb24gfTtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4gWy4uLnByZXYsIG5ld1Rhc2tdKTtcbiAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKGBZb3VyIHBlb3BsZSBiZWdpbiB0aGUgbG9uZyBqb3VybmV5IHRvIGEgbmV3IGFnZS5gKTtcbiAgICAgICAgICAgIHNldEJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsKHsgaXNPcGVuOiBmYWxzZSwgdHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY29uc3QgaGFuZGxlRXhpdEdhbWUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHNldEN1cnJlbnRTYXZlTmFtZShudWxsKTtcbiAgICAgICAgYXdhaXQgZmV0Y2hTYXZlcygpO1xuICAgICAgICBzZXRHYW1lU3RhdGUoR2FtZVN0YXR1cy5NRU5VKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlRGVsZXRlR2FtZSA9IGFzeW5jIChzYXZlTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGF3YWl0IGRlbGV0ZUdhbWVTdGF0ZShzYXZlTmFtZSk7XG4gICAgICAgIGF3YWl0IGZldGNoU2F2ZXMoKTtcbiAgICAgICAgYWRkTm90aWZpY2F0aW9uKGBEZWxldGVkIHNhZ2E6IFwiJHtzYXZlTmFtZX1cImApO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUb2dnbGVVbmxpbWl0ZWRSZXNvdXJjZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld01vZGUgPSAhdW5saW1pdGVkUmVzb3VyY2VzO1xuICAgICAgICBzZXRVbmxpbWl0ZWRSZXNvdXJjZXMobmV3TW9kZSk7XG5cbiAgICAgICAgaWYgKG5ld01vZGUpIHtcbiAgICAgICAgICAgIC8vIFRlc3QgbW9kZSBpcyBiZWluZyB0dXJuZWQgT05cbiAgICAgICAgICAgIHNldFJlc291cmNlcyh7IGZvb2Q6IDk5OTk5LCB3b29kOiA5OTk5OSwgZ29sZDogOTk5OTksIHN0b25lOiA5OTk5OSB9KTtcbiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihcIlRlc3QgTW9kZTogT04gLSBBbGwgYWN0aXZlIHRhc2tzIGNvbXBsZXRlZC5cIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGRlcGxldGVkTm9kZUlkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGFuZCBjb21wbGV0ZSBhbGwgYWN0aXZlIHRhc2tzXG4gICAgICAgICAgICBhY3RpdmVUYXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLnR5cGUgPT09ICdnYXRoZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrLnBheWxvYWQ/LnJlc291cmNlTm9kZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBsZXRlZE5vZGVJZHMuYWRkKHRhc2sucGF5bG9hZC5yZXNvdXJjZU5vZGVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gcmVzb3VyY2VOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gdGFzay5wYXlsb2FkLnJlc291cmNlTm9kZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG9Mb2coYEluc3RhbnRseSBnYXRoZXJlZCBhbGwgJHtub2RlLnR5cGV9IGZyb20gYSBkZXBsZXRlZCBzb3VyY2UuYCwgbm9kZS50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVRhc2tDb21wbGV0aW9uKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgZGVwbGV0ZWQgcmVzb3VyY2Ugbm9kZXNcbiAgICAgICAgICAgIGlmIChkZXBsZXRlZE5vZGVJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICBzZXRSZXNvdXJjZU5vZGVzKHByZXYgPT4gcHJldi5maWx0ZXIobiA9PiAhZGVwbGV0ZWROb2RlSWRzLmhhcyhuLmlkKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgdGFzayBxdWV1ZVxuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MoW10pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUZXN0IG1vZGUgaXMgYmVpbmcgdHVybmVkIE9GRlxuICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKFwiVGVzdCBNb2RlOiBPRkZcIik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgYnVpbGRpbmdDb3VudHMgPSBPYmplY3Qua2V5cyhidWlsZGluZ3MpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgICAgY29uc3QgYnVpbGRpbmdUeXBlID0ga2V5IGFzIEJ1aWxkaW5nVHlwZTtcbiAgICAgICAgYWNjW2J1aWxkaW5nVHlwZV0gPSBidWlsZGluZ3NbYnVpbGRpbmdUeXBlXS5sZW5ndGg7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30gYXMgUmVjb3JkPEJ1aWxkaW5nVHlwZSwgbnVtYmVyPik7XG4gICAgXG4gICAgY29uc3QgaWRsZVZpbGxhZ2VyQ291bnQgPSB1bml0cy52aWxsYWdlcnMuZmlsdGVyKHYgPT4gIWlzVmlsbGFnZXJCdXN5KHYuaWQpKS5sZW5ndGg7XG4gICAgXG4gICAgY29uc3QgYXNzaWdubWVudFRhcmdldCA9IGFzc2lnbm1lbnRQYW5lbFN0YXRlLnRhcmdldFR5cGUgPT09ICdyZXNvdXJjZSdcbiAgICAgICAgPyByZXNvdXJjZU5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBhc3NpZ25tZW50UGFuZWxTdGF0ZS50YXJnZXRJZClcbiAgICAgICAgOiBhY3RpdmVUYXNrcy5maW5kKHQgPT4gdC50eXBlID09PSAnYnVpbGQnICYmIHQuaWQgPT09IGFzc2lnbm1lbnRQYW5lbFN0YXRlLnRhcmdldElkKTtcblxuICAgIGNvbnN0IGNsb3NlQWxsUGFuZWxzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRVbml0TWFuYWdlbWVudFBhbmVsKHAgPT4gcC5pc09wZW4gPyB7IGlzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSA6IHApO1xuICAgICAgICBzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbChwID0+IHAuaXNPcGVuID8geyBpc09wZW46IGZhbHNlLCB0eXBlOiBudWxsLCBpbnN0YW5jZUlkOiB1bmRlZmluZWQsIGFuY2hvclJlY3Q6IG51bGwgfSA6IHApO1xuICAgICAgICBzZXRCdWlsZFBhbmVsU3RhdGUocCA9PiBwLmlzT3BlbiA/IHsgaXNPcGVuOiBmYWxzZSwgdmlsbGFnZXJJZDogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9IDogcCk7XG4gICAgICAgIHNldEFzc2lnbm1lbnRQYW5lbFN0YXRlKHAgPT4gcC5pc09wZW4gPyB7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0gOiBwKTtcbiAgICAgICAgc2V0Q2l2UGFuZWxTdGF0ZShwID0+IHAuaXNPcGVuID8geyBpc09wZW46IGZhbHNlLCBhbmNob3JSZWN0OiBudWxsIH0gOiBwKTtcbiAgICAgICAgc2V0QWxsQnVpbGRpbmdzUGFuZWwocCA9PiBwLmlzT3BlbiA/IHsgaXNPcGVuOiBmYWxzZSwgYW5jaG9yUmVjdDogbnVsbCB9IDogcCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaGFuZGxlT3BlbkJ1aWxkaW5nUGFuZWwgPSB1c2VDYWxsYmFjaygodHlwZTogQnVpbGRpbmdUeXBlLCBpbnN0YW5jZUlkOiBzdHJpbmcsIHJlY3Q6IERPTVJlY3QpID0+IHtcbiAgICAgICAgY2xvc2VBbGxQYW5lbHMoKTtcbiAgICAgICAgc2V0QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwoeyBpc09wZW46IHRydWUsIHR5cGUsIGluc3RhbmNlSWQsIGFuY2hvclJlY3Q6IHJlY3QgfSk7XG4gICAgfSwgW2Nsb3NlQWxsUGFuZWxzXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzQW55UGFuZWxPcGVuID0gdW5pdE1hbmFnZW1lbnRQYW5lbC5pc09wZW4gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsLmlzT3BlbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRQYW5lbFN0YXRlLmlzT3BlbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFBhbmVsU3RhdGUuaXNPcGVuIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXZQYW5lbFN0YXRlLmlzT3BlbiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxCdWlsZGluZ3NQYW5lbC5pc09wZW47XG5cbiAgICAgICAgICAgIGlmICghaXNBbnlQYW5lbE9wZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5zY2ktZmktcGFuZWwtcG9wdXAnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2xvc2VBbGxQYW5lbHMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXG4gICAgICAgIHVuaXRNYW5hZ2VtZW50UGFuZWwuaXNPcGVuLCBcbiAgICAgICAgYnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwuaXNPcGVuLFxuICAgICAgICBidWlsZFBhbmVsU3RhdGUuaXNPcGVuLFxuICAgICAgICBhc3NpZ25tZW50UGFuZWxTdGF0ZS5pc09wZW4sXG4gICAgICAgIGNpdlBhbmVsU3RhdGUuaXNPcGVuLFxuICAgICAgICBhbGxCdWlsZGluZ3NQYW5lbC5pc09wZW4sXG4gICAgICAgIGNsb3NlQWxsUGFuZWxzXG4gICAgXSk7XG5cbiAgICBjb25zdCByZW5kZXJDb250ZW50ID0gKCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGdhbWVTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBHYW1lU3RhdHVzLk1FTlU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxTdGFydFNjcmVlbiBvbk5ld0dhbWU9e2hhbmRsZVN0YXJ0TmV3R2FtZX0gb25SZXN1bWVHYW1lPXtoYW5kbGVSZXN1bWVHYW1lfSBzYXZlZEdhbWVzPXthbGxTYXZlc30gb25EZWxldGVHYW1lPXtoYW5kbGVEZWxldGVHYW1lfSAvPjtcbiAgICAgICAgICAgIGNhc2UgR2FtZVN0YXR1cy5MT0FESU5HOlxuICAgICAgICAgICAgICAgIHJldHVybiA8TG9hZGluZ1NjcmVlbiAvPjtcbiAgICAgICAgICAgIGNhc2UgR2FtZVN0YXR1cy5QTEFZSU5HOlxuICAgICAgICAgICAgICAgIGlmICghY2l2aWxpemF0aW9uKSByZXR1cm4gPExvYWRpbmdTY3JlZW4gLz47XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxHYW1lVUlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXZpbGl6YXRpb249e2NpdmlsaXphdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM9e3Jlc291cmNlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0cz17dW5pdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdzPXtidWlsZGluZ3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGlvbj17cG9wdWxhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlPXtjdXJyZW50QWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVMb2c9e2dhbWVMb2d9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEV2ZW50PXtjdXJyZW50RXZlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FdmVudENob2ljZT17aGFuZGxlRXZlbnRDaG9pY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VEZWx0YXM9e3Jlc291cmNlRGVsdGFzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5U3RhdHVzPXthY3Rpdml0eVN0YXR1c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bml0TGlzdD17VU5JVF9JTkZPfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nTGlzdD17QlVJTERJTkdTX0lORk99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuVW5pdFBhbmVsPXsodHlwZSwgcmVjdCkgPT4geyBjbG9zZUFsbFBhbmVscygpOyBzZXRVbml0TWFuYWdlbWVudFBhbmVsKHsgaXNPcGVuOiB0cnVlLCB0eXBlLCBhbmNob3JSZWN0OiByZWN0IH0pOyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlbkJ1aWxkaW5nUGFuZWw9e2hhbmRsZU9wZW5CdWlsZGluZ1BhbmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlbkFsbEJ1aWxkaW5nc1BhbmVsPXsocmVjdCkgPT4geyBjbG9zZUFsbFBhbmVscygpOyBzZXRBbGxCdWlsZGluZ3NQYW5lbCh7IGlzT3BlbjogdHJ1ZSwgYW5jaG9yUmVjdDogcmVjdCB9KTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJBY3Rpb249e3BsYXllckFjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm1QbGFjZW1lbnQ9e2hhbmRsZUNvbmZpcm1QbGFjZW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWxQbGF5ZXJBY3Rpb249e2hhbmRsZUNhbmNlbFBsYXllckFjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJ1aWxkaW5nQ2xpY2s9eyhidWlsZGluZywgcmVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUFsbFBhbmVscygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gT2JqZWN0LmtleXMoYnVpbGRpbmdzKS5maW5kKGtleSA9PiBidWlsZGluZ3Nba2V5IGFzIEJ1aWxkaW5nVHlwZV0uc29tZShiID0+IGIuaWQgPT09IGJ1aWxkaW5nLmlkKSkgYXMgQnVpbGRpbmdUeXBlIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlKSBzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogdHJ1ZSwgdHlwZSwgaW5zdGFuY2VJZDogYnVpbGRpbmcuaWQsIGFuY2hvclJlY3Q6IHJlY3QgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBEaW1lbnNpb25zPXtNQVBfRElNRU5TSU9OU31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYXNrcz17YWN0aXZlVGFza3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FeGl0R2FtZT17aGFuZGxlRXhpdEdhbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuQ2l2UGFuZWw9eyhyZWN0KSA9PiB7IGNsb3NlQWxsUGFuZWxzKCk7IHNldENpdlBhbmVsU3RhdGUoeyBpc09wZW46IHRydWUsIGFuY2hvclJlY3Q6IHJlY3QgfSk7IH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VOb2Rlcz17cmVzb3VyY2VOb2Rlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5Bc3NpZ25tZW50UGFuZWw9eyhub2RlSWQsIHJlY3QpID0+IHsgY2xvc2VBbGxQYW5lbHMoKTsgc2V0QXNzaWdubWVudFBhbmVsU3RhdGUoeyBpc09wZW46IHRydWUsIHRhcmdldElkOiBub2RlSWQsIHRhcmdldFR5cGU6ICdyZXNvdXJjZScsIGFuY2hvclJlY3Q6IHJlY3QgfSk7IH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuQ29uc3RydWN0aW9uUGFuZWw9eyhjb25zdHJ1Y3Rpb25JZCwgcmVjdCkgPT4geyBjbG9zZUFsbFBhbmVscygpOyBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZSh7IGlzT3BlbjogdHJ1ZSwgdGFyZ2V0SWQ6IGNvbnN0cnVjdGlvbklkLCB0YXJnZXRUeXBlOiAnY29uc3RydWN0aW9uJywgYW5jaG9yUmVjdDogcmVjdCB9KTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXRoZXJJbmZvPXtHQVRIRVJfSU5GT31cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnVpbGRQYW5lbCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09wZW49e2J1aWxkUGFuZWxTdGF0ZS5pc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0QnVpbGRQYW5lbFN0YXRlKHsgaXNPcGVuOiBmYWxzZSwgdmlsbGFnZXJJZDogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0UGxhY2VtZW50PXtoYW5kbGVTdGFydFBsYWNlbWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM9e3Jlc291cmNlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ0NvdW50cz17YnVpbGRpbmdDb3VudHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdMaXN0PXtCVUlMRElOR1NfSU5GT31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JSZWN0PXtidWlsZFBhbmVsU3RhdGUuYW5jaG9yUmVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8VW5pdE1hbmFnZW1lbnRQYW5lbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3Blbj17dW5pdE1hbmFnZW1lbnRQYW5lbC5pc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0VW5pdE1hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17dW5pdE1hbmFnZW1lbnRQYW5lbC50eXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRzPXt1bml0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZVVuaXQ9e2hhbmRsZVVwZGF0ZVVuaXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EaXNtaXNzVW5pdD17aGFuZGxlRGlzbWlzc1NwZWNpZmljVW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkluaXRpYXRlQnVpbGQ9eyh2aWxsYWdlcklkLCByZWN0KSA9PiB7IGNsb3NlQWxsUGFuZWxzKCk7IGhhbmRsZUluaXRpYXRlQnVpbGQodmlsbGFnZXJJZCwgcmVjdCk7IH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmlsbGFnZXJUYXNrRGV0YWlscz17Z2V0VmlsbGFnZXJUYXNrRGV0YWlsc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JSZWN0PXt1bml0TWFuYWdlbWVudFBhbmVsLmFuY2hvclJlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXtidWlsZGluZ01hbmFnZW1lbnRQYW5lbC5pc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwoeyBpc09wZW46IGZhbHNlLCB0eXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsU3RhdGU9e2J1aWxkaW5nTWFuYWdlbWVudFBhbmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5ncz17YnVpbGRpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nTGlzdD17QlVJTERJTkdTX0lORk99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVCdWlsZGluZz17aGFuZGxlVXBkYXRlQnVpbGRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EZW1vbGlzaEJ1aWxkaW5nPXtoYW5kbGVEZW1vbGlzaEJ1aWxkaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhaW5Vbml0cz17aGFuZGxlVHJhaW5Vbml0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRyYWluVmlsbGFnZXJzPXtoYW5kbGVUcmFpblZpbGxhZ2Vyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM9e3Jlc291cmNlc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1bGF0aW9uPXtwb3B1bGF0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRMaXN0PXtVTklUX0lORk99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BZHZhbmNlQWdlPXtoYW5kbGVBZHZhbmNlQWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhc2tzPXthY3RpdmVUYXNrc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JSZWN0PXtidWlsZGluZ01hbmFnZW1lbnRQYW5lbC5hbmNob3JSZWN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZXNvdXJjZUFzc2lnbm1lbnRQYW5lbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3Blbj17YXNzaWdubWVudFBhbmVsU3RhdGUuaXNPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldEFzc2lnbm1lbnRQYW5lbFN0YXRlKHsgaXNPcGVuOiBmYWxzZSwgdGFyZ2V0SWQ6IG51bGwsIHRhcmdldFR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudFRhcmdldD17YXNzaWdubWVudFRhcmdldCB8fCBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkbGVWaWxsYWdlckNvdW50PXtpZGxlVmlsbGFnZXJDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFzc2lnblZpbGxhZ2Vycz17aGFuZGxlQXNzaWduVmlsbGFnZXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVjYWxsVmlsbGFnZXJzPXtoYW5kbGVSZWNhbGxWaWxsYWdlcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2F0aGVySW5mbz17R0FUSEVSX0lORk99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdMaXN0PXtCVUlMRElOR1NfSU5GT31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JSZWN0PXthc3NpZ25tZW50UGFuZWxTdGF0ZS5hbmNob3JSZWN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDaXZpbGl6YXRpb25QYW5lbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3Blbj17Y2l2UGFuZWxTdGF0ZS5pc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0Q2l2UGFuZWxTdGF0ZSh7IGlzT3BlbjogZmFsc2UsIGFuY2hvclJlY3Q6IG51bGwgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l2aWxpemF0aW9uPXtjaXZpbGl6YXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yUmVjdD17Y2l2UGFuZWxTdGF0ZS5hbmNob3JSZWN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbGxCdWlsZGluZ3NQYW5lbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3Blbj17YWxsQnVpbGRpbmdzUGFuZWwuaXNPcGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldEFsbEJ1aWxkaW5nc1BhbmVsKHsgaXNPcGVuOiBmYWxzZSwgYW5jaG9yUmVjdDogbnVsbCB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ0xpc3Q9e0JVSUxESU5HU19JTkZPfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nQ291bnRzPXtidWlsZGluZ0NvdW50c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYXNrcz17YWN0aXZlVGFza3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuQnVpbGRpbmdQYW5lbD17aGFuZGxlT3BlbkJ1aWxkaW5nUGFuZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yUmVjdD17YWxsQnVpbGRpbmdzUGFuZWwuYW5jaG9yUmVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiA8U3RhcnRTY3JlZW4gb25OZXdHYW1lPXtoYW5kbGVTdGFydE5ld0dhbWV9IG9uUmVzdW1lR2FtZT17aGFuZGxlUmVzdW1lR2FtZX0gc2F2ZWRHYW1lcz17YWxsU2F2ZXN9IG9uRGVsZXRlR2FtZT17aGFuZGxlRGVsZXRlR2FtZX0gLz47XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctc3RvbmUtZGFyayBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTRcIj5cbiAgICAgICAgICAgIHtnYW1lU3RhdGUgPT09IEdhbWVTdGF0dXMuUExBWUlORyAmJiAoXG4gICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlVW5saW1pdGVkUmVzb3VyY2VzfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNCBsZWZ0LTQgei1bMTAxXSBiZy1icmFuZC1nb2xkIHRleHQtc3RvbmUtZGFyayBmb250LWJvbGQgcHktMSBweC0zIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIHNoYWRvdy1sZyBob3ZlcjpzY2FsZS0xMDUgdHJhbnNpdGlvbi10cmFuc2Zvcm1cIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiVG9nZ2xlIHVubGltaXRlZCByZXNvdXJjZXMgdGVzdCBtb2RlXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIFRlc3QgTW9kZToge3VubGltaXRlZFJlc291cmNlcyA/ICdPTicgOiAnT0ZGJ31cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8Tm90aWZpY2F0aW9uTWFuYWdlciBub3RpZmljYXRpb25zPXtub3RpZmljYXRpb25zfSBvblJlbW92ZU5vdGlmaWNhdGlvbj17cmVtb3ZlTm90aWZpY2F0aW9ufSAvPlxuICAgICAgICAgICAgPG1haW4gY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LTd4bCBteC1hdXRvXCI+XG4gICAgICAgICAgICAgICAge3JlbmRlckNvbnRlbnQoKX1cbiAgICAgICAgICAgIDwvbWFpbj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVQYWdlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVJlZiIsIkdhbWVTdGF0dXMiLCJnZXRQcmVkZWZpbmVkQ2l2aWxpemF0aW9uIiwiZ2V0UHJlZGVmaW5lZEdhbWVFdmVudCIsImdldFByZWRlZmluZWRBZ2UiLCJzYXZlR2FtZVN0YXRlIiwibG9hZEdhbWVTdGF0ZSIsImdldEFsbFNhdmVOYW1lcyIsImRlbGV0ZUdhbWVTdGF0ZSIsImdldFJhbmRvbU5hbWVzIiwiR2FtZVVJIiwiU3RhcnRTY3JlZW4iLCJMb2FkaW5nU2NyZWVuIiwiQnVpbGRQYW5lbCIsIk5vdGlmaWNhdGlvbk1hbmFnZXIiLCJVbml0TWFuYWdlbWVudFBhbmVsIiwiQnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwiLCJSZXNvdXJjZUFzc2lnbm1lbnRQYW5lbCIsIkNpdmlsaXphdGlvblBhbmVsIiwiQWxsQnVpbGRpbmdzUGFuZWwiLCJCVUlMRElOR1NfSU5GTyIsImlkIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiY29zdCIsIndvb2QiLCJpc1VuaXF1ZSIsImJ1aWxkVGltZSIsInN0b25lIiwiZ29sZCIsIlVOSVRfSU5GTyIsImZvb2QiLCJyZXF1aXJlZEJ1aWxkaW5nIiwidHJhaW5UaW1lIiwiR0FUSEVSX0lORk8iLCJyYXRlIiwiaW5pdGlhbEJ1aWxkaW5nc1N0YXRlIiwiaG91c2VzIiwiYmFycmFja3MiLCJhcmNoZXJ5UmFuZ2UiLCJzdGFibGUiLCJzaWVnZVdvcmtzaG9wIiwiYmxhY2tzbWl0aCIsIndhdGNoVG93ZXIiLCJ0b3duQ2VudGVyIiwiTUFQX0RJTUVOU0lPTlMiLCJ3aWR0aCIsImhlaWdodCIsIkdhbWVQYWdlIiwiYnVpbGRpbmdzIiwiZ2FtZVN0YXRlIiwic2V0R2FtZVN0YXRlIiwiTUVOVSIsImNpdmlsaXphdGlvbiIsInNldENpdmlsaXphdGlvbiIsInJlc291cmNlcyIsInNldFJlc291cmNlcyIsInVuaXRzIiwic2V0VW5pdHMiLCJ2aWxsYWdlcnMiLCJtaWxpdGFyeSIsInNldEJ1aWxkaW5ncyIsImN1cnJlbnRBZ2UiLCJzZXRDdXJyZW50QWdlIiwiZ2FtZUxvZyIsInNldEdhbWVMb2ciLCJjdXJyZW50RXZlbnQiLCJzZXRDdXJyZW50RXZlbnQiLCJyZXNvdXJjZURlbHRhcyIsInNldFJlc291cmNlRGVsdGFzIiwiYWN0aXZpdHlTdGF0dXMiLCJzZXRBY3Rpdml0eVN0YXR1cyIsIm5vdGlmaWNhdGlvbnMiLCJzZXROb3RpZmljYXRpb25zIiwidW5saW1pdGVkUmVzb3VyY2VzIiwic2V0VW5saW1pdGVkUmVzb3VyY2VzIiwiYWxsU2F2ZXMiLCJzZXRBbGxTYXZlcyIsImN1cnJlbnRTYXZlTmFtZSIsInNldEN1cnJlbnRTYXZlTmFtZSIsInBsYXllckFjdGlvbiIsInNldFBsYXllckFjdGlvbiIsImFjdGl2ZVRhc2tzIiwic2V0QWN0aXZlVGFza3MiLCJyZXNvdXJjZU5vZGVzIiwic2V0UmVzb3VyY2VOb2RlcyIsImJ1aWxkUGFuZWxTdGF0ZSIsInNldEJ1aWxkUGFuZWxTdGF0ZSIsImlzT3BlbiIsInZpbGxhZ2VySWQiLCJhbmNob3JSZWN0IiwidW5pdE1hbmFnZW1lbnRQYW5lbCIsInNldFVuaXRNYW5hZ2VtZW50UGFuZWwiLCJ0eXBlIiwiYnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwiLCJzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbCIsImFsbEJ1aWxkaW5nc1BhbmVsIiwic2V0QWxsQnVpbGRpbmdzUGFuZWwiLCJhc3NpZ25tZW50UGFuZWxTdGF0ZSIsInNldEFzc2lnbm1lbnRQYW5lbFN0YXRlIiwidGFyZ2V0SWQiLCJ0YXJnZXRUeXBlIiwiY2l2UGFuZWxTdGF0ZSIsInNldENpdlBhbmVsU3RhdGUiLCJkZWx0YVRpbWVvdXRSZWYiLCJldmVudFRpbWVyUmVmIiwicG9wdWxhdGlvbiIsImN1cnJlbnQiLCJsZW5ndGgiLCJjYXBhY2l0eSIsImZldGNoU2F2ZXMiLCJuYW1lcyIsIlBMQVlJTkciLCJmdWxsU3RhdGUiLCJhZGROb3RpZmljYXRpb24iLCJtZXNzYWdlIiwiTWF0aCIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJwcmV2IiwicmVtb3ZlTm90aWZpY2F0aW9uIiwiZmlsdGVyIiwibiIsImFkZFRvTG9nIiwiaWNvbiIsInNsaWNlIiwidXBkYXRlUmVzb3VyY2VzIiwiZGVsdGFzIiwibmV3UmVzb3VyY2VzIiwia2V5IiwicmVzb3VyY2VLZXkiLCJtYXgiLCJ3aW5kb3ciLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwibmV3RGVsdGFzIiwiaGFuZGxlVGFza0NvbXBsZXRpb24iLCJ0YXNrIiwiYnVpbGRpbmdUeXBlIiwidmlsbGFnZXJJZHMiLCJwb3NpdGlvbiIsInBheWxvYWQiLCJidWlsZGluZ0luZm8iLCJmaW5kIiwiYiIsIm5ld0J1aWxkaW5nIiwicCIsImNvdW50IiwibmV3VmlsbGFnZXJOYW1lcyIsIm5ld1ZpbGxhZ2VycyIsIm1hcCIsInVuaXRUeXBlIiwidW5pdEluZm8iLCJ1IiwibmV3VW5pdE5hbWVzIiwibmV3VW5pdHMiLCJ0aXRsZSIsImFnZVJlc3VsdCIsIm5leHRBZ2VOYW1lIiwiZ2FtZUxvb3AiLCJzZXRJbnRlcnZhbCIsImNvbXBsZXRlZFRhc2tzIiwicmVzb3VyY2VEZWx0YXNUaGlzVGljayIsInN0aWxsQWN0aXZlVGFza3MiLCJzdGFydFRpbWUiLCJkdXJhdGlvbiIsInB1c2giLCJub2RlIiwicmVzb3VyY2VOb2RlSWQiLCJ2aWxsYWdlckNvdW50IiwiZ2F0aGVyUmF0ZVBlclZpbGxhZ2VyUGVyU2Vjb25kIiwiYW1vdW50R2F0aGVyZWRUaGlzVGljayIsIkJvb2xlYW4iLCJPYmplY3QiLCJrZXlzIiwicHJldlJlcyIsInJlc0tleSIsInByZXZOb2RlcyIsIm5ld05vZGVzIiwiYW1vdW50VG9EZWNyZW1lbnQiLCJuZXdBbW91bnQiLCJhbW91bnQiLCJhc3NpZ25lZFZpbGxhZ2VycyIsImZsb29yIiwiZ2F0aGVyVGFzayIsInQiLCJmaW5hbEFjdGl2ZVRhc2tzIiwic29tZSIsImN0IiwiZm9yRWFjaCIsImNsZWFySW50ZXJ2YWwiLCJoYW5kbGVOZXdFdmVudCIsIm1ham9yVGFza0luUHJvZ3Jlc3MiLCJldmVudCIsInNjaGVkdWxlTmV4dEV2ZW50IiwibmV4dEV2ZW50VGltZSIsImdlbmVyYXRlUmVzb3VyY2VOb2RlcyIsImV4aXN0aW5nUG9zaXRpb25zIiwibm9kZXMiLCJ0eXBlcyIsIm51bU5vZGVzIiwiaSIsInBvcyIsIngiLCJ5IiwiaGFzIiwiYWRkIiwiaGFuZGxlU3RhcnROZXdHYW1lIiwic2F2ZU5hbWUiLCJpbmNsdWRlcyIsIkxPQURJTkciLCJjaXYiLCJpbml0aWFsVmlsbGFnZXJOYW1lcyIsImluaXRpYWxWaWxsYWdlcnMiLCJpbml0aWFsVENOYW1lIiwidGNQb3NpdGlvbiIsImluaXRpYWxUQyIsIlNldCIsImdldFZpbGxhZ2VyVGFza0RldGFpbHMiLCJpc1ZpbGxhZ2VyQnVzeSIsImhhbmRsZVJlc3VtZUdhbWUiLCJzYXZlZFN0YXRlIiwic29sZGllcnMiLCJtaWdyYXRlZE1pbGl0YXJ5IiwicyIsImZpbmFsQnVpbGRpbmdzIiwiY29uc3RydWN0aW9uVGFza3MiLCJvY2N1cGllZENlbGxzIiwidmFsdWVzIiwiZmxhdCIsInRjUG9zIiwidGNOYW1lIiwiZmlyc3RCdWlsZGluZyIsIm1pZ3JhdGVkIiwiZW50cmllcyIsImluc3RhbmNlcyIsImluc3QiLCJub2Rlc1RvU2V0IiwibWlncmF0ZWRUYXNrcyIsImhhbmRsZUV2ZW50Q2hvaWNlIiwiY2hvaWNlIiwidGV4dCIsIm1pc3NpbmdSZXMiLCJqb2luIiwibmVnYXRpdmVDb3N0IiwiaXNTdWNjZXNzIiwic3VjY2Vzc0NoYW5jZSIsInVuZGVmaW5lZCIsImVmZmVjdHMiLCJzdWNjZXNzRWZmZWN0cyIsImZhaWx1cmVFZmZlY3RzIiwiQXJyYXkiLCJpc0FycmF5IiwibWluIiwicmVzb3VyY2UiLCJsb2ciLCJoYW5kbGVJbml0aWF0ZUJ1aWxkIiwicmVjdCIsImhhbmRsZVN0YXJ0UGxhY2VtZW50IiwiYnVpbGRpbmdJZCIsImlzQWxyZWFkeUNvbnN0cnVjdGluZyIsIm1pc3NpbmciLCJyZXMiLCJtb2RlIiwiaGFuZGxlQ29uZmlybVBsYWNlbWVudCIsImJ1aWxkZXIiLCJ2IiwidGFza0lkIiwidGFza1BheWxvYWQiLCJuZXdUYXNrIiwiaGFuZGxlQ2FuY2VsUGxheWVyQWN0aW9uIiwiaGFuZGxlRGVtb2xpc2hCdWlsZGluZyIsImJ1aWxkaW5nSW5zdGFuY2UiLCJyZWZ1bmQiLCJyZWZ1bmRNZXNzYWdlUGFydHMiLCJoYW5kbGVVcGRhdGVCdWlsZGluZyIsImhhbmRsZVRyYWluVmlsbGFnZXJzIiwidmlsbGFnZXJDb3N0IiwidG90YWxDb3N0IiwiaGFuZGxlVHJhaW5Vbml0cyIsInRyYWluaW5nQnVpbGRpbmciLCJoYW5kbGVEaXNtaXNzU3BlY2lmaWNVbml0IiwidW5pdCIsInVuaXRUeXBlTmFtZSIsImhhbmRsZVVwZGF0ZVVuaXQiLCJ1cGRhdGVkVW5pdCIsImhhbmRsZUFzc2lnblZpbGxhZ2Vyc1RvTm9kZSIsIm5vZGVJZCIsImlkbGVWaWxsYWdlcnMiLCJjYXBwZWRDb3VudCIsInZpbGxhZ2Vyc1RvQXNzaWduIiwidmlsbGFnZXJJZHNUb0Fzc2lnbiIsInRhcmdldE5vZGUiLCJleGlzdGluZ1Rhc2siLCJoYW5kbGVSZWNhbGxWaWxsYWdlcnMiLCJ2aWxsYWdlcnNUb1JlY2FsbCIsInRhc2tJbmRleCIsImZpbmRJbmRleCIsInJlbWFpbmluZ1ZpbGxhZ2VycyIsIl8iLCJ0b3RhbFdvcmsiLCJvbGRXb3JrZXJDb3VudCIsInRpbWVFbGFwc2VkIiwid29ya0RvbmUiLCJ3b3JrUmVtYWluaW5nIiwibmV3V29ya2VyQ291bnQiLCJuZXdSZW1haW5pbmdEdXJhdGlvbiIsImhhbmRsZUFzc2lnblZpbGxhZ2Vyc1RvQ29uc3RydWN0aW9uIiwiY29uc3RydWN0aW9uSWQiLCJiYXNlRHVyYXRpb24iLCJ1cGRhdGVkVmlsbGFnZXJJZHMiLCJoYW5kbGVBc3NpZ25WaWxsYWdlcnMiLCJoYW5kbGVBZHZhbmNlQWdlIiwiaGFuZGxlRXhpdEdhbWUiLCJoYW5kbGVEZWxldGVHYW1lIiwiaGFuZGxlVG9nZ2xlVW5saW1pdGVkUmVzb3VyY2VzIiwibmV3TW9kZSIsImRlcGxldGVkTm9kZUlkcyIsInNpemUiLCJidWlsZGluZ0NvdW50cyIsInJlZHVjZSIsImFjYyIsImlkbGVWaWxsYWdlckNvdW50IiwiYXNzaWdubWVudFRhcmdldCIsImNsb3NlQWxsUGFuZWxzIiwiaW5zdGFuY2VJZCIsImhhbmRsZU9wZW5CdWlsZGluZ1BhbmVsIiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiaXNBbnlQYW5lbE9wZW4iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbmRlckNvbnRlbnQiLCJvbk5ld0dhbWUiLCJvblJlc3VtZUdhbWUiLCJzYXZlZEdhbWVzIiwib25EZWxldGVHYW1lIiwib25FdmVudENob2ljZSIsInVuaXRMaXN0IiwiYnVpbGRpbmdMaXN0Iiwib25PcGVuVW5pdFBhbmVsIiwib25PcGVuQnVpbGRpbmdQYW5lbCIsIm9uT3BlbkFsbEJ1aWxkaW5nc1BhbmVsIiwib25Db25maXJtUGxhY2VtZW50Iiwib25DYW5jZWxQbGF5ZXJBY3Rpb24iLCJvbkJ1aWxkaW5nQ2xpY2siLCJidWlsZGluZyIsIm1hcERpbWVuc2lvbnMiLCJvbkV4aXRHYW1lIiwib25PcGVuQ2l2UGFuZWwiLCJvbk9wZW5Bc3NpZ25tZW50UGFuZWwiLCJvbk9wZW5Db25zdHJ1Y3Rpb25QYW5lbCIsImdhdGhlckluZm8iLCJvbkNsb3NlIiwib25TdGFydFBsYWNlbWVudCIsIm9uVXBkYXRlVW5pdCIsIm9uRGlzbWlzc1VuaXQiLCJvbkluaXRpYXRlQnVpbGQiLCJwYW5lbFN0YXRlIiwib25VcGRhdGVCdWlsZGluZyIsIm9uRGVtb2xpc2hCdWlsZGluZyIsIm9uVHJhaW5Vbml0cyIsIm9uVHJhaW5WaWxsYWdlcnMiLCJvbkFkdmFuY2VBZ2UiLCJvbkFzc2lnblZpbGxhZ2VycyIsIm9uUmVjYWxsVmlsbGFnZXJzIiwiZGl2IiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayIsImFyaWEtbGFiZWwiLCJvblJlbW92ZU5vdGlmaWNhdGlvbiIsIm1haW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/page.tsx\n"));

/***/ })

});