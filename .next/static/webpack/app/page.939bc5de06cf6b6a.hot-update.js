"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/StartScreen.tsx":
/*!************************************!*\
  !*** ./components/StartScreen.tsx ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=Trash2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n\nvar _s = $RefreshSig$();\n\n\nconst StartScreen = (param)=>{\n    let { onNewGame, onResumeGame, savedGames, onDeleteGame } = param;\n    _s();\n    const [isNaming, setIsNaming] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [newName, setNewName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const handleStart = ()=>{\n        if (newName.trim().length >= 4) {\n            onNewGame(newName.trim());\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"text-center bg-stone-dark p-8 rounded-lg shadow-2xl border-2 border-stone-light w-full max-w-2xl\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                className: \"text-6xl font-serif text-parchment-light mb-2 tracking-wider\",\n                children: \"Gemini Empires\"\n            }, void 0, false, {\n                fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                lineNumber: 23,\n                columnNumber: 13\n            }, undefined),\n            isNaming ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-2xl font-serif text-brand-gold mb-4\",\n                        children: \"Name Your Saga\"\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                        lineNumber: 27,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"text\",\n                        value: newName,\n                        onChange: (e)=>setNewName(e.target.value),\n                        placeholder: \"At least 4 characters...\",\n                        className: \"bg-parchment-dark text-stone-dark placeholder-stone-light w-full max-w-sm mx-auto text-center font-sans text-xl p-3 rounded-lg border-2 border-stone-light focus:border-brand-gold focus:outline-none\"\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                        lineNumber: 28,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex gap-4 justify-center mt-6\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setIsNaming(false),\n                                className: \"bg-stone-light hover:bg-stone-dark text-white font-bold py-3 px-8 rounded-lg text-xl font-serif tracking-wide transition-transform duration-200 ease-in-out hover:scale-105 shadow-lg\",\n                                children: \"Back\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                lineNumber: 36,\n                                columnNumber: 26\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleStart,\n                                disabled: newName.trim().length < 4,\n                                className: \"bg-brand-red hover:bg-red-700 disabled:bg-stone-dark disabled:text-stone-light/50 disabled:cursor-not-allowed text-white font-bold py-3 px-8 rounded-lg text-xl font-serif tracking-wide transition-transform duration-200 ease-in-out hover:scale-105 shadow-lg\",\n                                children: \"Begin\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                lineNumber: 42,\n                                columnNumber: 25\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                        lineNumber: 35,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                lineNumber: 26,\n                columnNumber: 17\n            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-lg text-parchment-dark mb-8 font-sans\",\n                        children: \"Your Civilization's Saga, Written by AI\"\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                        lineNumber: 53,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-col gap-4 items-center\",\n                        children: [\n                            savedGames.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full max-w-sm\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"text-xl font-serif text-brand-gold mb-2\",\n                                        children: \"Resume a Saga\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                        lineNumber: 57,\n                                        columnNumber: 33\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col gap-3 max-h-48 overflow-y-auto bg-black/20 p-2 rounded-md\",\n                                        children: savedGames.map((name)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>onResumeGame(name),\n                                                        className: \"flex-grow bg-brand-green/80 hover:bg-brand-green text-white font-bold py-2 px-4 rounded-md text-lg font-sans transition-colors duration-200 text-left\",\n                                                        children: name\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                                        lineNumber: 61,\n                                                        columnNumber: 45\n                                                    }, undefined),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: (e)=>{\n                                                            e.stopPropagation();\n                                                            onDeleteGame(name);\n                                                        },\n                                                        className: \"p-2 bg-stone-light/50 hover:bg-brand-red text-parchment-light rounded-md transition-colors\",\n                                                        \"aria-label\": \"Delete \".concat(name),\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                            className: \"w-5 h-5\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                                            lineNumber: 75,\n                                                            columnNumber: 49\n                                                        }, undefined)\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                                        lineNumber: 67,\n                                                        columnNumber: 45\n                                                    }, undefined)\n                                                ]\n                                            }, name, true, {\n                                                fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                                lineNumber: 60,\n                                                columnNumber: 41\n                                            }, undefined))\n                                    }, void 0, false, {\n                                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                        lineNumber: 58,\n                                        columnNumber: 33\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                lineNumber: 56,\n                                columnNumber: 29\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setIsNaming(true),\n                                className: \"bg-brand-red hover:bg-red-700 text-white font-bold py-4 px-8 rounded-lg text-2xl font-serif tracking-wide transition-transform duration-200 ease-in-out hover:scale-105 shadow-lg mt-4\",\n                                children: \"New Saga\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                                lineNumber: 82,\n                                columnNumber: 25\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                        lineNumber: 54,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-8 text-sm text-stone-light font-sans\",\n                        children: savedGames.length > 0 ? \"Start a new saga or resume an existing one.\" : \"Lead your people from a nomadic tribe to a thriving empire. Every game is a unique story.\"\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n                        lineNumber: 89,\n                        columnNumber: 22\n                    }, undefined)\n                ]\n            }, void 0, true)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/components/StartScreen.tsx\",\n        lineNumber: 22,\n        columnNumber: 9\n    }, undefined);\n};\n_s(StartScreen, \"x8Fe/ofRqhTiwetCgv+QqmivWos=\");\n_c = StartScreen;\n/* harmony default export */ __webpack_exports__[\"default\"] = (StartScreen);\nvar _c;\n$RefreshReg$(_c, \"StartScreen\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvU3RhcnRTY3JlZW4udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0M7QUFDRjtBQVN0QyxNQUFNRyxjQUEwQztRQUFDLEVBQUVDLFNBQVMsRUFBRUMsWUFBWSxFQUFFQyxVQUFVLEVBQUVDLFlBQVksRUFBRTs7SUFDbEcsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdSLCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU0sQ0FBQ1MsU0FBU0MsV0FBVyxHQUFHViwrQ0FBUUEsQ0FBQztJQUV2QyxNQUFNVyxjQUFjO1FBQ2hCLElBQUlGLFFBQVFHLElBQUksR0FBR0MsTUFBTSxJQUFJLEdBQUc7WUFDNUJWLFVBQVVNLFFBQVFHLElBQUk7UUFDMUI7SUFDSjtJQUVBLHFCQUNJLDhEQUFDRTtRQUFJQyxXQUFVOzswQkFDWCw4REFBQ0M7Z0JBQUdELFdBQVU7MEJBQStEOzs7Ozs7WUFFNUVSLHlCQUNHLDhEQUFDTztnQkFBSUMsV0FBVTs7a0NBQ1gsOERBQUNFO3dCQUFHRixXQUFVO2tDQUEyQzs7Ozs7O2tDQUN6RCw4REFBQ0c7d0JBQ0dDLE1BQUs7d0JBQ0xDLE9BQU9YO3dCQUNQWSxVQUFVLENBQUNDLElBQU1aLFdBQVdZLEVBQUVDLE1BQU0sQ0FBQ0gsS0FBSzt3QkFDMUNJLGFBQVk7d0JBQ1pULFdBQVU7Ozs7OztrQ0FFZCw4REFBQ0Q7d0JBQUlDLFdBQVU7OzBDQUNWLDhEQUFDVTtnQ0FDRUMsU0FBUyxJQUFNbEIsWUFBWTtnQ0FDM0JPLFdBQVU7MENBQ2I7Ozs7OzswQ0FHRCw4REFBQ1U7Z0NBQ0dDLFNBQVNmO2dDQUNUZ0IsVUFBVWxCLFFBQVFHLElBQUksR0FBR0MsTUFBTSxHQUFHO2dDQUNsQ0UsV0FBVTswQ0FDYjs7Ozs7Ozs7Ozs7Ozs7Ozs7MENBTVQ7O2tDQUNJLDhEQUFDYTt3QkFBRWIsV0FBVTtrQ0FBNkM7Ozs7OztrQ0FDMUQsOERBQUNEO3dCQUFJQyxXQUFVOzs0QkFDVlYsV0FBV1EsTUFBTSxHQUFHLG1CQUNqQiw4REFBQ0M7Z0NBQUlDLFdBQVU7O2tEQUNYLDhEQUFDYzt3Q0FBR2QsV0FBVTtrREFBMEM7Ozs7OztrREFDeEQsOERBQUNEO3dDQUFJQyxXQUFVO2tEQUNWVixXQUFXeUIsR0FBRyxDQUFDQyxDQUFBQSxxQkFDWiw4REFBQ2pCO2dEQUFlQyxXQUFVOztrRUFDdEIsOERBQUNVO3dEQUNHQyxTQUFTLElBQU10QixhQUFhMkI7d0RBQzVCaEIsV0FBVTtrRUFFVGdCOzs7Ozs7a0VBRUwsOERBQUNOO3dEQUNHQyxTQUFTLENBQUNKOzREQUNOQSxFQUFFVSxlQUFlOzREQUNqQjFCLGFBQWF5Qjt3REFDakI7d0RBQ0FoQixXQUFVO3dEQUNWa0IsY0FBWSxVQUFlLE9BQUxGO2tFQUV0Qiw0RUFBQzlCLGtGQUFNQTs0REFBQ2MsV0FBVTs7Ozs7Ozs7Ozs7OytDQWZoQmdCOzs7Ozs7Ozs7Ozs7Ozs7OzBDQXNCMUIsOERBQUNOO2dDQUNHQyxTQUFTLElBQU1sQixZQUFZO2dDQUMzQk8sV0FBVTswQ0FDYjs7Ozs7Ozs7Ozs7O2tDQUlKLDhEQUFDYTt3QkFBRWIsV0FBVTtrQ0FDVFYsV0FBV1EsTUFBTSxHQUFHLElBQ2YsZ0RBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBTzlCO0dBeEZNWDtLQUFBQTtBQTBGTiwrREFBZUEsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL1N0YXJ0U2NyZWVuLnRzeD9jNzBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFRyYXNoMiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5cbmludGVyZmFjZSBTdGFydFNjcmVlblByb3BzIHtcbiAgICBvbk5ld0dhbWU6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgb25SZXN1bWVHYW1lOiAobmFtZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIHNhdmVkR2FtZXM6IHN0cmluZ1tdO1xuICAgIG9uRGVsZXRlR2FtZTogKG5hbWU6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuY29uc3QgU3RhcnRTY3JlZW46IFJlYWN0LkZDPFN0YXJ0U2NyZWVuUHJvcHM+ID0gKHsgb25OZXdHYW1lLCBvblJlc3VtZUdhbWUsIHNhdmVkR2FtZXMsIG9uRGVsZXRlR2FtZSB9KSA9PiB7XG4gICAgY29uc3QgW2lzTmFtaW5nLCBzZXRJc05hbWluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW25ld05hbWUsIHNldE5ld05hbWVdID0gdXNlU3RhdGUoJycpO1xuXG4gICAgY29uc3QgaGFuZGxlU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChuZXdOYW1lLnRyaW0oKS5sZW5ndGggPj0gNCkge1xuICAgICAgICAgICAgb25OZXdHYW1lKG5ld05hbWUudHJpbSgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBiZy1zdG9uZS1kYXJrIHAtOCByb3VuZGVkLWxnIHNoYWRvdy0yeGwgYm9yZGVyLTIgYm9yZGVyLXN0b25lLWxpZ2h0IHctZnVsbCBtYXgtdy0yeGxcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTZ4bCBmb250LXNlcmlmIHRleHQtcGFyY2htZW50LWxpZ2h0IG1iLTIgdHJhY2tpbmctd2lkZXJcIj5HZW1pbmkgRW1waXJlczwvaDE+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHtpc05hbWluZyA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LThcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtc2VyaWYgdGV4dC1icmFuZC1nb2xkIG1iLTRcIj5OYW1lIFlvdXIgU2FnYTwvaDI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25ld05hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5ld05hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBdCBsZWFzdCA0IGNoYXJhY3RlcnMuLi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcGFyY2htZW50LWRhcmsgdGV4dC1zdG9uZS1kYXJrIHBsYWNlaG9sZGVyLXN0b25lLWxpZ2h0IHctZnVsbCBtYXgtdy1zbSBteC1hdXRvIHRleHQtY2VudGVyIGZvbnQtc2FucyB0ZXh0LXhsIHAtMyByb3VuZGVkLWxnIGJvcmRlci0yIGJvcmRlci1zdG9uZS1saWdodCBmb2N1czpib3JkZXItYnJhbmQtZ29sZCBmb2N1czpvdXRsaW5lLW5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTQganVzdGlmeS1jZW50ZXIgbXQtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc05hbWluZyhmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctc3RvbmUtbGlnaHQgaG92ZXI6Ymctc3RvbmUtZGFyayB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0zIHB4LTggcm91bmRlZC1sZyB0ZXh0LXhsIGZvbnQtc2VyaWYgdHJhY2tpbmctd2lkZSB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0yMDAgZWFzZS1pbi1vdXQgaG92ZXI6c2NhbGUtMTA1IHNoYWRvdy1sZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU3RhcnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e25ld05hbWUudHJpbSgpLmxlbmd0aCA8IDR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYnJhbmQtcmVkIGhvdmVyOmJnLXJlZC03MDAgZGlzYWJsZWQ6Ymctc3RvbmUtZGFyayBkaXNhYmxlZDp0ZXh0LXN0b25lLWxpZ2h0LzUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS0zIHB4LTggcm91bmRlZC1sZyB0ZXh0LXhsIGZvbnQtc2VyaWYgdHJhY2tpbmctd2lkZSB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi0yMDAgZWFzZS1pbi1vdXQgaG92ZXI6c2NhbGUtMTA1IHNoYWRvdy1sZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQmVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1sZyB0ZXh0LXBhcmNobWVudC1kYXJrIG1iLTggZm9udC1zYW5zXCI+WW91ciBDaXZpbGl6YXRpb24ncyBTYWdhLCBXcml0dGVuIGJ5IEFJPC9wPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTQgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2F2ZWRHYW1lcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlcmlmIHRleHQtYnJhbmQtZ29sZCBtYi0yXCI+UmVzdW1lIGEgU2FnYTwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMyBtYXgtaC00OCBvdmVyZmxvdy15LWF1dG8gYmctYmxhY2svMjAgcC0yIHJvdW5kZWQtbWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzYXZlZEdhbWVzLm1hcChuYW1lID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17bmFtZX0gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25SZXN1bWVHYW1lKG5hbWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC1ncm93IGJnLWJyYW5kLWdyZWVuLzgwIGhvdmVyOmJnLWJyYW5kLWdyZWVuIHRleHQtd2hpdGUgZm9udC1ib2xkIHB5LTIgcHgtNCByb3VuZGVkLW1kIHRleHQtbGcgZm9udC1zYW5zIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMCB0ZXh0LWxlZnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRlbGV0ZUdhbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIGJnLXN0b25lLWxpZ2h0LzUwIGhvdmVyOmJnLWJyYW5kLXJlZCB0ZXh0LXBhcmNobWVudC1saWdodCByb3VuZGVkLW1kIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2BEZWxldGUgJHtuYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFzaDIgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc05hbWluZyh0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1icmFuZC1yZWQgaG92ZXI6YmctcmVkLTcwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS00IHB4LTggcm91bmRlZC1sZyB0ZXh0LTJ4bCBmb250LXNlcmlmIHRyYWNraW5nLXdpZGUgdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tMjAwIGVhc2UtaW4tb3V0IGhvdmVyOnNjYWxlLTEwNSBzaGFkb3ctbGcgbXQtNFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3IFNhZ2FcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTggdGV4dC1zbSB0ZXh0LXN0b25lLWxpZ2h0IGZvbnQtc2Fuc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3NhdmVkR2FtZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXCJTdGFydCBhIG5ldyBzYWdhIG9yIHJlc3VtZSBhbiBleGlzdGluZyBvbmUuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiTGVhZCB5b3VyIHBlb3BsZSBmcm9tIGEgbm9tYWRpYyB0cmliZSB0byBhIHRocml2aW5nIGVtcGlyZS4gRXZlcnkgZ2FtZSBpcyBhIHVuaXF1ZSBzdG9yeS5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3RhcnRTY3JlZW47XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsIlRyYXNoMiIsIlN0YXJ0U2NyZWVuIiwib25OZXdHYW1lIiwib25SZXN1bWVHYW1lIiwic2F2ZWRHYW1lcyIsIm9uRGVsZXRlR2FtZSIsImlzTmFtaW5nIiwic2V0SXNOYW1pbmciLCJuZXdOYW1lIiwic2V0TmV3TmFtZSIsImhhbmRsZVN0YXJ0IiwidHJpbSIsImxlbmd0aCIsImRpdiIsImNsYXNzTmFtZSIsImgxIiwiaDIiLCJpbnB1dCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsInBsYWNlaG9sZGVyIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwicCIsImgzIiwibWFwIiwibmFtZSIsInN0b3BQcm9wYWdhdGlvbiIsImFyaWEtbGFiZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/StartScreen.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./services/dbService.ts":
/*!*******************************!*\
  !*** ./services/dbService.ts ***!
  \*******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteGameState: function() { return /* binding */ deleteGameState; },\n/* harmony export */   getAllSaveNames: function() { return /* binding */ getAllSaveNames; },\n/* harmony export */   loadGameState: function() { return /* binding */ loadGameState; },\n/* harmony export */   saveGameState: function() { return /* binding */ saveGameState; }\n/* harmony export */ });\nconst DB_NAME = \"GeminiEmpiresDB\";\nconst STORE_NAME = \"gameState\";\nconst DB_VERSION = 1;\nconst openDB = ()=>{\n    return new Promise((resolve, reject)=>{\n        const request = indexedDB.open(DB_NAME, DB_VERSION);\n        request.onupgradeneeded = ()=>{\n            const db = request.result;\n            if (!db.objectStoreNames.contains(STORE_NAME)) {\n                db.createObjectStore(STORE_NAME);\n            }\n        };\n        request.onsuccess = ()=>{\n            resolve(request.result);\n        };\n        request.onerror = ()=>{\n            console.error(\"IndexedDB error:\", request.error);\n            reject(request.error);\n        };\n    });\n};\nconst saveGameState = async (saveName, state)=>{\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readwrite\");\n        const store = transaction.objectStore(STORE_NAME);\n        store.put(state, saveName);\n        return new Promise((resolve, reject)=>{\n            transaction.oncomplete = ()=>resolve();\n            transaction.onerror = ()=>reject(transaction.error);\n        });\n    } catch (error) {\n        console.error(\"Failed to save game state:\", error);\n    }\n};\nconst loadGameState = async (saveName)=>{\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readonly\");\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.get(saveName);\n        return new Promise((resolve, reject)=>{\n            request.onsuccess = ()=>{\n                resolve(request.result);\n            };\n            request.onerror = ()=>{\n                console.error(\"Failed to load game state:\", request.error);\n                reject(request.error);\n            };\n        });\n    } catch (error) {\n        console.error(\"Failed to open DB for loading:\", error);\n        return undefined;\n    }\n};\nconst getAllSaveNames = async ()=>{\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readonly\");\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.getAllKeys();\n        return new Promise((resolve, reject)=>{\n            request.onsuccess = ()=>{\n                resolve(request.result);\n            };\n            request.onerror = ()=>{\n                console.error(\"Failed to get all save names:\", request.error);\n                reject(request.error);\n            };\n        });\n    } catch (error) {\n        console.error(\"Failed to open DB for getting save names:\", error);\n        return [];\n    }\n};\nconst deleteGameState = async (saveName)=>{\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readwrite\");\n        const store = transaction.objectStore(STORE_NAME);\n        store.delete(saveName);\n        return new Promise((resolve, reject)=>{\n            transaction.oncomplete = ()=>resolve();\n            transaction.onerror = ()=>reject(transaction.error);\n        });\n    } catch (error) {\n        console.error(\"Failed to delete game state:\", error);\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NlcnZpY2VzL2RiU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUEsTUFBTUEsVUFBVTtBQUNoQixNQUFNQyxhQUFhO0FBQ25CLE1BQU1DLGFBQWE7QUFFbkIsTUFBTUMsU0FBUztJQUNYLE9BQU8sSUFBSUMsUUFBUSxDQUFDQyxTQUFTQztRQUN6QixNQUFNQyxVQUFVQyxVQUFVQyxJQUFJLENBQUNULFNBQVNFO1FBRXhDSyxRQUFRRyxlQUFlLEdBQUc7WUFDdEIsTUFBTUMsS0FBS0osUUFBUUssTUFBTTtZQUN6QixJQUFJLENBQUNELEdBQUdFLGdCQUFnQixDQUFDQyxRQUFRLENBQUNiLGFBQWE7Z0JBQzNDVSxHQUFHSSxpQkFBaUIsQ0FBQ2Q7WUFDekI7UUFDSjtRQUVBTSxRQUFRUyxTQUFTLEdBQUc7WUFDaEJYLFFBQVFFLFFBQVFLLE1BQU07UUFDMUI7UUFFQUwsUUFBUVUsT0FBTyxHQUFHO1lBQ2RDLFFBQVFDLEtBQUssQ0FBQyxvQkFBb0JaLFFBQVFZLEtBQUs7WUFDL0NiLE9BQU9DLFFBQVFZLEtBQUs7UUFDeEI7SUFDSjtBQUNKO0FBRU8sTUFBTUMsZ0JBQWdCLE9BQU9DLFVBQWtCQztJQUNsRCxJQUFJO1FBQ0EsTUFBTVgsS0FBSyxNQUFNUjtRQUNqQixNQUFNb0IsY0FBY1osR0FBR1ksV0FBVyxDQUFDdEIsWUFBWTtRQUMvQyxNQUFNdUIsUUFBUUQsWUFBWUUsV0FBVyxDQUFDeEI7UUFDdEN1QixNQUFNRSxHQUFHLENBQUNKLE9BQU9EO1FBRWpCLE9BQU8sSUFBSWpCLFFBQWMsQ0FBQ0MsU0FBU0M7WUFDL0JpQixZQUFZSSxVQUFVLEdBQUcsSUFBTXRCO1lBQy9Ca0IsWUFBWU4sT0FBTyxHQUFHLElBQU1YLE9BQU9pQixZQUFZSixLQUFLO1FBQ3hEO0lBQ0osRUFBRSxPQUFPQSxPQUFPO1FBQ1pELFFBQVFDLEtBQUssQ0FBQyw4QkFBOEJBO0lBQ2hEO0FBQ0osRUFBRTtBQUVLLE1BQU1TLGdCQUFnQixPQUFPUDtJQUNoQyxJQUFJO1FBQ0EsTUFBTVYsS0FBSyxNQUFNUjtRQUNqQixNQUFNb0IsY0FBY1osR0FBR1ksV0FBVyxDQUFDdEIsWUFBWTtRQUMvQyxNQUFNdUIsUUFBUUQsWUFBWUUsV0FBVyxDQUFDeEI7UUFDdEMsTUFBTU0sVUFBVWlCLE1BQU1LLEdBQUcsQ0FBQ1I7UUFFMUIsT0FBTyxJQUFJakIsUUFBUSxDQUFDQyxTQUFTQztZQUN6QkMsUUFBUVMsU0FBUyxHQUFHO2dCQUNoQlgsUUFBUUUsUUFBUUssTUFBTTtZQUMxQjtZQUNBTCxRQUFRVSxPQUFPLEdBQUc7Z0JBQ2RDLFFBQVFDLEtBQUssQ0FBQyw4QkFBOEJaLFFBQVFZLEtBQUs7Z0JBQ3pEYixPQUFPQyxRQUFRWSxLQUFLO1lBQ3hCO1FBQ0o7SUFDSixFQUFFLE9BQU9BLE9BQU87UUFDWkQsUUFBUUMsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBT1c7SUFDWDtBQUNKLEVBQUU7QUFFSyxNQUFNQyxrQkFBa0I7SUFDMUIsSUFBSTtRQUNELE1BQU1wQixLQUFLLE1BQU1SO1FBQ2pCLE1BQU1vQixjQUFjWixHQUFHWSxXQUFXLENBQUN0QixZQUFZO1FBQy9DLE1BQU11QixRQUFRRCxZQUFZRSxXQUFXLENBQUN4QjtRQUN0QyxNQUFNTSxVQUFVaUIsTUFBTVEsVUFBVTtRQUVoQyxPQUFPLElBQUk1QixRQUFRLENBQUNDLFNBQVNDO1lBQ3pCQyxRQUFRUyxTQUFTLEdBQUc7Z0JBQ2hCWCxRQUFRRSxRQUFRSyxNQUFNO1lBQzFCO1lBQ0FMLFFBQVFVLE9BQU8sR0FBRztnQkFDZEMsUUFBUUMsS0FBSyxDQUFDLGlDQUFpQ1osUUFBUVksS0FBSztnQkFDNURiLE9BQU9DLFFBQVFZLEtBQUs7WUFDeEI7UUFDSjtJQUNKLEVBQUUsT0FBT0EsT0FBTztRQUNaRCxRQUFRQyxLQUFLLENBQUMsNkNBQTZDQTtRQUMzRCxPQUFPLEVBQUU7SUFDYjtBQUNKLEVBQUM7QUFFTSxNQUFNYyxrQkFBa0IsT0FBT1o7SUFDbEMsSUFBSTtRQUNBLE1BQU1WLEtBQUssTUFBTVI7UUFDakIsTUFBTW9CLGNBQWNaLEdBQUdZLFdBQVcsQ0FBQ3RCLFlBQVk7UUFDL0MsTUFBTXVCLFFBQVFELFlBQVlFLFdBQVcsQ0FBQ3hCO1FBQ3RDdUIsTUFBTVUsTUFBTSxDQUFDYjtRQUViLE9BQU8sSUFBSWpCLFFBQWMsQ0FBQ0MsU0FBU0M7WUFDL0JpQixZQUFZSSxVQUFVLEdBQUcsSUFBTXRCO1lBQy9Ca0IsWUFBWU4sT0FBTyxHQUFHLElBQU1YLE9BQU9pQixZQUFZSixLQUFLO1FBQ3hEO0lBQ0osRUFBRSxPQUFPQSxPQUFPO1FBQ1pELFFBQVFDLEtBQUssQ0FBQyxnQ0FBZ0NBO0lBQ2xEO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zZXJ2aWNlcy9kYlNlcnZpY2UudHM/Zjg0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEZ1bGxHYW1lU3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmNvbnN0IERCX05BTUUgPSAnR2VtaW5pRW1waXJlc0RCJztcbmNvbnN0IFNUT1JFX05BTUUgPSAnZ2FtZVN0YXRlJztcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xuXG5jb25zdCBvcGVuREIgPSAoKTogUHJvbWlzZTxJREJEYXRhYmFzZT4gPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihEQl9OQU1FLCBEQl9WRVJTSU9OKTtcblxuICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7XG4gICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoU1RPUkVfTkFNRSkpIHtcbiAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5yZXN1bHQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbmRleGVkREIgZXJyb3I6XCIsIHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHNhdmVHYW1lU3RhdGUgPSBhc3luYyAoc2F2ZU5hbWU6IHN0cmluZywgc3RhdGU6IEZ1bGxHYW1lU3RhdGUpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EQigpO1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcbiAgICAgICAgc3RvcmUucHV0KHN0YXRlLCBzYXZlTmFtZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9ICgpID0+IHJlc29sdmUoKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uZXJyb3IgPSAoKSA9PiByZWplY3QodHJhbnNhY3Rpb24uZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHNhdmUgZ2FtZSBzdGF0ZTpcIiwgZXJyb3IpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBsb2FkR2FtZVN0YXRlID0gYXN5bmMgKHNhdmVOYW1lOiBzdHJpbmcpOiBQcm9taXNlPEZ1bGxHYW1lU3RhdGUgfCB1bmRlZmluZWQ+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EQigpO1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkb25seScpO1xuICAgICAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUuZ2V0KHNhdmVOYW1lKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0IGFzIEZ1bGxHYW1lU3RhdGUgfCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvYWQgZ2FtZSBzdGF0ZTpcIiwgcmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBvcGVuIERCIGZvciBsb2FkaW5nOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldEFsbFNhdmVOYW1lcyA9IGFzeW5jICgpOiBQcm9taXNlPHN0cmluZ1tdPiA9PiB7XG4gICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRCKCk7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5nZXRBbGxLZXlzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCBhcyBzdHJpbmdbXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IGFsbCBzYXZlIG5hbWVzOlwiLCByZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIG9wZW4gREIgZm9yIGdldHRpbmcgc2F2ZSBuYW1lczpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZGVsZXRlR2FtZVN0YXRlID0gYXN5bmMgKHNhdmVOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EQigpO1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcbiAgICAgICAgc3RvcmUuZGVsZXRlKHNhdmVOYW1lKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25lcnJvciA9ICgpID0+IHJlamVjdCh0cmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIGdhbWUgc3RhdGU6XCIsIGVycm9yKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbIkRCX05BTUUiLCJTVE9SRV9OQU1FIiwiREJfVkVSU0lPTiIsIm9wZW5EQiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxdWVzdCIsImluZGV4ZWREQiIsIm9wZW4iLCJvbnVwZ3JhZGVuZWVkZWQiLCJkYiIsInJlc3VsdCIsIm9iamVjdFN0b3JlTmFtZXMiLCJjb250YWlucyIsImNyZWF0ZU9iamVjdFN0b3JlIiwib25zdWNjZXNzIiwib25lcnJvciIsImNvbnNvbGUiLCJlcnJvciIsInNhdmVHYW1lU3RhdGUiLCJzYXZlTmFtZSIsInN0YXRlIiwidHJhbnNhY3Rpb24iLCJzdG9yZSIsIm9iamVjdFN0b3JlIiwicHV0Iiwib25jb21wbGV0ZSIsImxvYWRHYW1lU3RhdGUiLCJnZXQiLCJ1bmRlZmluZWQiLCJnZXRBbGxTYXZlTmFtZXMiLCJnZXRBbGxLZXlzIiwiZGVsZXRlR2FtZVN0YXRlIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./services/dbService.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types */ \"(app-pages-browser)/./types.ts\");\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/geminiService */ \"(app-pages-browser)/./services/geminiService.ts\");\n/* harmony import */ var _services_dbService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/services/dbService */ \"(app-pages-browser)/./services/dbService.ts\");\n/* harmony import */ var _services_nameService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/services/nameService */ \"(app-pages-browser)/./services/nameService.ts\");\n/* harmony import */ var _components_GameUI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/GameUI */ \"(app-pages-browser)/./components/GameUI.tsx\");\n/* harmony import */ var _components_StartScreen__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/StartScreen */ \"(app-pages-browser)/./components/StartScreen.tsx\");\n/* harmony import */ var _components_LoadingScreen__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/LoadingScreen */ \"(app-pages-browser)/./components/LoadingScreen.tsx\");\n/* harmony import */ var _components_BuildPanel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/BuildPanel */ \"(app-pages-browser)/./components/BuildPanel.tsx\");\n/* harmony import */ var _components_NotificationManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/NotificationManager */ \"(app-pages-browser)/./components/NotificationManager.tsx\");\n/* harmony import */ var _components_UnitManagementPanel__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/UnitManagementPanel */ \"(app-pages-browser)/./components/UnitManagementPanel.tsx\");\n/* harmony import */ var _components_BuildingManagementPanel__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/BuildingManagementPanel */ \"(app-pages-browser)/./components/BuildingManagementPanel.tsx\");\n/* harmony import */ var _components_ResourceAssignmentPanel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/components/ResourceAssignmentPanel */ \"(app-pages-browser)/./components/ResourceAssignmentPanel.tsx\");\n/* harmony import */ var _components_SettingsPanel__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/components/SettingsPanel */ \"(app-pages-browser)/./components/SettingsPanel.tsx\");\n/* harmony import */ var _components_CivilizationPanel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/components/CivilizationPanel */ \"(app-pages-browser)/./components/CivilizationPanel.tsx\");\n/* harmony import */ var _components_AllBuildingsPanel__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/components/AllBuildingsPanel */ \"(app-pages-browser)/./components/AllBuildingsPanel.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst BUILDINGS_INFO = [\n    {\n        id: \"houses\",\n        name: \"House\",\n        description: \"Increases population capacity by 5.\",\n        cost: {\n            wood: 50\n        },\n        isUnique: false,\n        buildTime: 15\n    },\n    {\n        id: \"barracks\",\n        name: \"Barracks\",\n        description: \"Allows training of Swordsmen.\",\n        cost: {\n            wood: 150,\n            stone: 50\n        },\n        isUnique: true,\n        buildTime: 60\n    },\n    {\n        id: \"archeryRange\",\n        name: \"Archery Range\",\n        description: \"Allows training of Archers.\",\n        cost: {\n            wood: 175\n        },\n        isUnique: true,\n        buildTime: 60\n    },\n    {\n        id: \"stable\",\n        name: \"Stables\",\n        description: \"Allows training of Knights.\",\n        cost: {\n            wood: 175,\n            gold: 75\n        },\n        isUnique: true,\n        buildTime: 75\n    },\n    {\n        id: \"siegeWorkshop\",\n        name: \"Siege Workshop\",\n        description: \"Constructs powerful Catapults.\",\n        cost: {\n            wood: 200,\n            gold: 150\n        },\n        isUnique: true,\n        buildTime: 90\n    },\n    {\n        id: \"blacksmith\",\n        name: \"Blacksmith\",\n        description: \"Researches infantry and cavalry upgrades.\",\n        cost: {\n            wood: 100,\n            gold: 100\n        },\n        isUnique: true,\n        buildTime: 45\n    },\n    {\n        id: \"watchTower\",\n        name: \"Watch Tower\",\n        description: \"Provides defense against raids.\",\n        cost: {\n            stone: 125\n        },\n        isUnique: true,\n        buildTime: 45\n    },\n    {\n        id: \"townCenter\",\n        name: \"Town Center\",\n        description: \"The heart of your settlement.\",\n        cost: {},\n        isUnique: true,\n        buildTime: 0\n    }\n];\nconst UNIT_INFO = [\n    {\n        id: \"swordsman\",\n        name: \"Swordsman\",\n        description: \"Basic melee infantry.\",\n        cost: {\n            food: 60,\n            gold: 20\n        },\n        requiredBuilding: \"barracks\",\n        trainTime: 22\n    },\n    {\n        id: \"archer\",\n        name: \"Archer\",\n        description: \"Ranged unit effective against infantry.\",\n        cost: {\n            food: 30,\n            wood: 40\n        },\n        requiredBuilding: \"archeryRange\",\n        trainTime: 25\n    },\n    {\n        id: \"knight\",\n        name: \"Knight\",\n        description: \"Fast and powerful cavalry.\",\n        cost: {\n            food: 60,\n            gold: 75\n        },\n        requiredBuilding: \"stable\",\n        trainTime: 30\n    },\n    {\n        id: \"catapult\",\n        name: \"Catapult\",\n        description: \"Siege engine devastating to buildings.\",\n        cost: {\n            wood: 150,\n            gold: 150\n        },\n        requiredBuilding: \"siegeWorkshop\",\n        trainTime: 45\n    }\n];\nconst GATHER_INFO = {\n    food: {\n        rate: 100\n    },\n    wood: {\n        rate: 80\n    },\n    gold: {\n        rate: 50\n    },\n    stone: {\n        rate: 60\n    }\n};\nconst initialBuildingsState = {\n    houses: [],\n    barracks: [],\n    archeryRange: [],\n    stable: [],\n    siegeWorkshop: [],\n    blacksmith: [],\n    watchTower: [],\n    townCenter: []\n};\nconst MAP_DIMENSIONS = {\n    width: 25,\n    height: 18\n};\nconst GamePage = ()=>{\n    var _buildings_townCenter;\n    _s();\n    const [gameState, setGameState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.MENU);\n    const [civilization, setCivilization] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [resources, setResources] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        food: 200,\n        wood: 150,\n        gold: 50,\n        stone: 100\n    });\n    const [units, setUnits] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        villagers: [],\n        military: []\n    });\n    const [buildings, setBuildings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialBuildingsState);\n    const [currentAge, setCurrentAge] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"Nomadic Age\");\n    const [gameLog, setGameLog] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentEvent, setCurrentEvent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [resourceDeltas, setResourceDeltas] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [activityStatus, setActivityStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"Your story begins...\");\n    const [notifications, setNotifications] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [unlimitedResources, setUnlimitedResources] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [allSaves, setAllSaves] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentSaveName, setCurrentSaveName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [playerAction, setPlayerAction] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [activeTasks, setActiveTasks] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [constructingBuildings, setConstructingBuildings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [resourceNodes, setResourceNodes] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [panelOpacity, setPanelOpacity] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(1.0);\n    // Panel States\n    const [buildPanelState, setBuildPanelState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        villagerId: null,\n        anchorRect: null\n    });\n    const [unitManagementPanel, setUnitManagementPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        type: null,\n        anchorRect: null\n    });\n    const [buildingManagementPanel, setBuildingManagementPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        type: null,\n        anchorRect: null\n    });\n    const [allBuildingsPanel, setAllBuildingsPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        anchorRect: null\n    });\n    const [assignmentPanelState, setAssignmentPanelState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        targetId: null,\n        targetType: null,\n        anchorRect: null\n    });\n    const [settingsPanelState, setSettingsPanelState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        anchorRect: null\n    });\n    const [civPanelState, setCivPanelState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        anchorRect: null\n    });\n    const deltaTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    const eventTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const population = {\n        current: units.villagers.length + units.military.length,\n        capacity: (((_buildings_townCenter = buildings.townCenter) === null || _buildings_townCenter === void 0 ? void 0 : _buildings_townCenter.length) > 0 ? 20 : 0) + buildings.houses.length * 5\n    };\n    const fetchSaves = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        const names = await (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.getAllSaveNames)();\n        setAllSaves(names);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        fetchSaves();\n    }, [\n        fetchSaves\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (gameState === _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING && civilization && currentSaveName) {\n            const fullState = {\n                civilization,\n                resources,\n                units,\n                buildings,\n                currentAge,\n                gameLog,\n                activeTasks,\n                constructingBuildings,\n                resourceNodes\n            };\n            (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.saveGameState)(currentSaveName, fullState);\n        }\n    }, [\n        civilization,\n        resources,\n        units,\n        buildings,\n        currentAge,\n        gameLog,\n        gameState,\n        currentSaveName,\n        activeTasks,\n        constructingBuildings,\n        resourceNodes\n    ]);\n    const addNotification = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message)=>{\n        const id = \"\".concat(Date.now(), \"-\").concat(Math.random());\n        setNotifications((prev)=>[\n                ...prev,\n                {\n                    id,\n                    message\n                }\n            ]);\n    }, []);\n    const removeNotification = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setNotifications((prev)=>prev.filter((n)=>n.id !== id));\n    }, []);\n    const addToLog = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((message, icon)=>{\n        setGameLog((prev)=>[\n                {\n                    id: \"\".concat(Date.now(), \"-\").concat(Math.random()),\n                    message,\n                    icon\n                },\n                ...prev.slice(0, 19)\n            ]);\n    }, []);\n    const updateResources = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((deltas)=>{\n        setResources((prev)=>{\n            const newResources = {\n                ...prev\n            };\n            for(const key in deltas){\n                const resourceKey = key;\n                var _deltas_resourceKey;\n                newResources[resourceKey] = Math.max(0, newResources[resourceKey] + ((_deltas_resourceKey = deltas[resourceKey]) !== null && _deltas_resourceKey !== void 0 ? _deltas_resourceKey : 0));\n            }\n            return newResources;\n        });\n        setResourceDeltas((prev)=>({\n                ...prev,\n                ...deltas\n            }));\n        for(const key in deltas){\n            const resourceKey = key;\n            if (deltaTimeoutRef.current[resourceKey]) {\n                window.clearTimeout(deltaTimeoutRef.current[resourceKey]);\n            }\n            deltaTimeoutRef.current[resourceKey] = window.setTimeout(()=>{\n                setResourceDeltas((prev)=>{\n                    const newDeltas = {\n                        ...prev\n                    };\n                    delete newDeltas[resourceKey];\n                    return newDeltas;\n                });\n            }, 1500);\n        }\n    }, []);\n    const handleTaskCompletion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((task)=>{\n        switch(task.type){\n            case \"build\":\n                {\n                    const { buildingType, villagerIds, position } = task.payload;\n                    const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === buildingType);\n                    const [name] = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"building\", 1);\n                    const newBuilding = {\n                        id: task.id,\n                        name,\n                        position: position\n                    };\n                    setConstructingBuildings((prev)=>prev.filter((b)=>b.id !== task.id));\n                    setBuildings((p)=>({\n                            ...p,\n                            [buildingType]: [\n                                ...p[buildingType],\n                                newBuilding\n                            ]\n                        }));\n                    if (villagerIds && villagerIds.length > 0) {\n                        addToLog(\"\".concat(villagerIds.length, \" builder(s) have constructed \").concat(name, \", a new \").concat(buildingInfo.name, \".\"), buildingType);\n                        setActivityStatus(\"Construction of \".concat(name, \" is complete.\"));\n                    }\n                    break;\n                }\n            case \"gather\":\n                {\n                    break;\n                }\n            case \"train_villager\":\n                {\n                    const { count } = task.payload;\n                    const newVillagerNames = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"villager\", count);\n                    const newVillagers = newVillagerNames.map((name)=>({\n                            id: \"\".concat(Date.now(), \"-\").concat(name),\n                            name\n                        }));\n                    setUnits((p)=>({\n                            ...p,\n                            villagers: [\n                                ...p.villagers,\n                                ...newVillagers\n                            ]\n                        }));\n                    addToLog(\"\".concat(count, \" new villager(s) have joined your settlement.\"), \"villager\");\n                    setActivityStatus(\"\".concat(count, \" new villager(s) are ready to work.\"));\n                    break;\n                }\n            case \"train_military\":\n                {\n                    const { unitType, count } = task.payload;\n                    const unitInfo = UNIT_INFO.find((u)=>u.id === unitType);\n                    const newUnitNames = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"soldier\", count);\n                    const newUnits = newUnitNames.map((name)=>({\n                            id: \"\".concat(Date.now(), \"-\").concat(unitType, \"-\").concat(name),\n                            name,\n                            title: \"\",\n                            unitType: unitType\n                        }));\n                    setUnits((p)=>({\n                            ...p,\n                            military: [\n                                ...p.military,\n                                ...newUnits\n                            ]\n                        }));\n                    addToLog(\"\".concat(count, \" \").concat(unitInfo.name, \"(s) have been trained.\"), unitType);\n                    setActivityStatus(\"\".concat(count, \" new \").concat(unitInfo.name, \"(s) are ready for battle.\"));\n                    break;\n                }\n            case \"advance_age\":\n                {\n                    const ageResult = (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_3__.getPredefinedAge)(currentAge);\n                    setCurrentAge(ageResult.nextAgeName);\n                    addToLog(\"You have advanced to the \".concat(ageResult.nextAgeName, \"!\"), \"age\");\n                    addToLog(ageResult.description, \"age\");\n                    setActivityStatus(\"Welcome to the \".concat(ageResult.nextAgeName, \"!\"));\n                    break;\n                }\n        }\n    }, [\n        currentAge,\n        updateResources,\n        addToLog\n    ]);\n    // Game Loop\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const gameLoop = setInterval(()=>{\n            const now = Date.now();\n            let completedTasks = [];\n            let resourceDeltasThisTick = {};\n            const stillActiveTasks = activeTasks.map((task)=>{\n                if (now >= task.startTime + task.duration) {\n                    completedTasks.push(task);\n                    return null;\n                }\n                if (task.type === \"gather\") {\n                    var _task_payload_villagerIds, _task_payload;\n                    const node = resourceNodes.find((n)=>{\n                        var _task_payload;\n                        return n.id === ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : _task_payload.resourceNodeId);\n                    });\n                    const villagerCount = ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : (_task_payload_villagerIds = _task_payload.villagerIds) === null || _task_payload_villagerIds === void 0 ? void 0 : _task_payload_villagerIds.length) || 0;\n                    if (!node || villagerCount === 0) {\n                        return null; // Orphaned task, mark for removal\n                    }\n                    const gatherRatePerVillagerPerSecond = GATHER_INFO[node.type].rate / 10;\n                    const amountGatheredThisTick = gatherRatePerVillagerPerSecond * villagerCount;\n                    resourceDeltasThisTick[node.type] = (resourceDeltasThisTick[node.type] || 0) + amountGatheredThisTick;\n                }\n                return task;\n            }).filter(Boolean);\n            // Update resource nodes separately to avoid race conditions with state\n            if (Object.keys(resourceDeltasThisTick).length > 0) {\n                setResources((prevRes)=>{\n                    const newResources = {\n                        ...prevRes\n                    };\n                    for(const key in resourceDeltasThisTick){\n                        const resKey = key;\n                        newResources[resKey] += resourceDeltasThisTick[resKey];\n                    }\n                    return newResources;\n                });\n                setResourceNodes((prevNodes)=>{\n                    let nodesWereDepleted = false;\n                    const newNodes = prevNodes.map((node)=>{\n                        const amountToDecrement = resourceDeltasThisTick[node.type];\n                        if (amountToDecrement) {\n                            const newAmount = node.amount - amountToDecrement;\n                            if (newAmount <= 0) {\n                                addToLog(\"\".concat(node.assignedVillagers.length, \" villager(s) depleted a \").concat(node.type, \" source, gaining \").concat(Math.floor(node.amount), \" \").concat(node.type, \".\"), node.type);\n                                setActivityStatus(\"A \".concat(node.type, \" source has been fully depleted.\"));\n                                nodesWereDepleted = true;\n                                const gatherTask = stillActiveTasks.find((t)=>{\n                                    var _t_payload;\n                                    return t.type === \"gather\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.resourceNodeId) === node.id;\n                                });\n                                if (gatherTask) completedTasks.push(gatherTask);\n                                return null;\n                            }\n                            return {\n                                ...node,\n                                amount: newAmount\n                            };\n                        }\n                        return node;\n                    }).filter(Boolean);\n                    if (nodesWereDepleted) {\n                    // This will filter out the completed gather tasks in the next step\n                    }\n                    return newNodes;\n                });\n            }\n            const finalActiveTasks = stillActiveTasks.filter((t)=>!completedTasks.some((ct)=>ct.id === t.id));\n            setActiveTasks(finalActiveTasks);\n            if (completedTasks.length > 0) {\n                completedTasks.forEach(handleTaskCompletion);\n            }\n        }, 1000);\n        return ()=>clearInterval(gameLoop);\n    }, [\n        activeTasks,\n        resourceNodes,\n        handleTaskCompletion,\n        addToLog\n    ]);\n    const handleNewEvent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const nonGatheringTasks = activeTasks.filter((t)=>t.type !== \"gather\");\n        if (!civilization || currentEvent || nonGatheringTasks.length > 0) return;\n        addToLog(\"A new chapter unfolds...\", \"event\");\n        const event = (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_3__.getPredefinedGameEvent)();\n        setCurrentEvent(event);\n        setActivityStatus(\"A new event requires your attention!\");\n    }, [\n        civilization,\n        currentEvent,\n        activeTasks,\n        addToLog\n    ]);\n    const scheduleNextEvent = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (eventTimerRef.current) {\n            clearTimeout(eventTimerRef.current);\n        }\n        const nextEventTime = (45 + Math.random() * 45) * 1000; // 45-90 seconds\n        eventTimerRef.current = setTimeout(()=>handleNewEvent(), nextEventTime);\n    }, [\n        handleNewEvent\n    ]);\n    const generateResourceNodes = (existingPositions)=>{\n        const nodes = [];\n        const types = [\n            \"food\",\n            \"wood\",\n            \"gold\",\n            \"stone\"\n        ];\n        const numNodes = 20 + Math.floor(Math.random() * 10);\n        for(let i = 0; i < numNodes; i++){\n            let pos;\n            do {\n                pos = {\n                    x: Math.floor(Math.random() * MAP_DIMENSIONS.width),\n                    y: Math.floor(Math.random() * MAP_DIMENSIONS.height)\n                };\n            }while (existingPositions.has(\"\".concat(pos.x, \",\").concat(pos.y)));\n            existingPositions.add(\"\".concat(pos.x, \",\").concat(pos.y));\n            const type = types[Math.floor(Math.random() * types.length)];\n            const amount = Math.floor(Math.random() * (2500 - 500 + 1)) + 500;\n            nodes.push({\n                id: \"\".concat(Date.now(), \"-node-\").concat(i),\n                type,\n                position: pos,\n                amount,\n                assignedVillagers: []\n            });\n        }\n        return nodes;\n    };\n    const handleStartNewGame = (saveName)=>{\n        if (allSaves.includes(saveName)) {\n            addNotification('A saga named \"'.concat(saveName, '\" already exists.'));\n            return;\n        }\n        setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.LOADING);\n        setCurrentSaveName(saveName);\n        const civ = (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_3__.getPredefinedCivilization)();\n        setCivilization(civ);\n        setResources({\n            food: 200,\n            wood: 150,\n            gold: 50,\n            stone: 100\n        });\n        const initialVillagerNames = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"villager\", 3);\n        const initialVillagers = initialVillagerNames.map((name)=>({\n                id: \"\".concat(Date.now(), \"-\").concat(name),\n                name\n            }));\n        setUnits({\n            villagers: initialVillagers,\n            military: []\n        });\n        const [initialTCName] = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"building\", 1);\n        const tcPosition = {\n            x: Math.floor(MAP_DIMENSIONS.width / 2),\n            y: Math.floor(MAP_DIMENSIONS.height / 2)\n        };\n        const initialTC = {\n            id: \"\".concat(Date.now(), \"-tc\"),\n            name: initialTCName,\n            position: tcPosition\n        };\n        setBuildings({\n            ...initialBuildingsState,\n            townCenter: [\n                initialTC\n            ]\n        });\n        setResourceNodes(generateResourceNodes(new Set([\n            \"\".concat(tcPosition.x, \",\").concat(tcPosition.y)\n        ])));\n        setCurrentAge(\"Nomadic Age\");\n        setGameLog([]);\n        setCurrentEvent(null);\n        setUnlimitedResources(false);\n        setActiveTasks([]);\n        setConstructingBuildings([]);\n        addToLog(\"\".concat(civ.name, \" has been founded!\"), \"system\");\n        addToLog(\"Your story begins...\", \"system\");\n        setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING);\n        setActivityStatus(\"Your settlement awaits your command.\");\n        fetchSaves();\n    };\n    const getVillagerTaskDetails = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((villagerId)=>{\n        const task = activeTasks.find((t)=>{\n            var _t_payload_villagerIds, _t_payload;\n            return (_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : (_t_payload_villagerIds = _t_payload.villagerIds) === null || _t_payload_villagerIds === void 0 ? void 0 : _t_payload_villagerIds.includes(villagerId);\n        });\n        if (task) {\n            if (task.type === \"build\") {\n                const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === task.payload.buildingType);\n                return \"Busy: Constructing \".concat((buildingInfo === null || buildingInfo === void 0 ? void 0 : buildingInfo.name) || \"a building\");\n            }\n            if (task.type === \"gather\") {\n                const node = resourceNodes.find((n)=>n.id === task.payload.resourceNodeId);\n                return \"Busy: Gathering \".concat((node === null || node === void 0 ? void 0 : node.type) || \"resources\");\n            }\n        }\n        return \"Idle\";\n    }, [\n        activeTasks,\n        resourceNodes\n    ]);\n    const isVillagerBusy = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((villagerId)=>{\n        return getVillagerTaskDetails(villagerId) !== \"Idle\";\n    }, [\n        getVillagerTaskDetails\n    ]);\n    const handleResumeGame = async (saveName)=>{\n        const savedState = await (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.loadGameState)(saveName);\n        if (savedState) {\n            var _savedState_units;\n            setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.LOADING);\n            setCurrentSaveName(saveName);\n            setCivilization(savedState.civilization);\n            setResources(savedState.resources);\n            if ((_savedState_units = savedState.units) === null || _savedState_units === void 0 ? void 0 : _savedState_units.soldiers) {\n                const migratedMilitary = savedState.units.soldiers.map((s)=>({\n                        ...s,\n                        unitType: \"swordsman\"\n                    }));\n                setUnits({\n                    villagers: savedState.units.villagers || [],\n                    military: migratedMilitary\n                });\n            } else {\n                setUnits(savedState.units || {\n                    villagers: [],\n                    military: []\n                });\n            }\n            let finalBuildings = {\n                ...initialBuildingsState,\n                ...savedState.buildings || {}\n            };\n            const occupiedCells = new Set(Object.values(finalBuildings).flat().map((b)=>\"\".concat(b.position.x, \",\").concat(b.position.y)));\n            if (!finalBuildings.townCenter || finalBuildings.townCenter.length === 0) {\n                let tcPos = {\n                    x: 10,\n                    y: 5\n                };\n                while(occupiedCells.has(\"\".concat(tcPos.x, \",\").concat(tcPos.y))){\n                    tcPos.x++;\n                }\n                const [tcName] = (0,_services_nameService__WEBPACK_IMPORTED_MODULE_5__.getRandomNames)(\"building\", 1);\n                finalBuildings.townCenter = [\n                    {\n                        id: \"\".concat(Date.now(), \"-tc\"),\n                        name: tcName,\n                        position: tcPos\n                    }\n                ];\n                occupiedCells.add(\"\".concat(tcPos.x, \",\").concat(tcPos.y));\n            }\n            const firstBuilding = Object.values(finalBuildings).flat()[0];\n            if (firstBuilding && typeof firstBuilding === \"object\" && !(\"position\" in firstBuilding)) {\n                const migrated = {\n                    ...initialBuildingsState\n                };\n                let y = 3;\n                Object.entries(finalBuildings).forEach((param)=>{\n                    let [type, instances] = param;\n                    let x = 5;\n                    instances.forEach((inst)=>{\n                        while(occupiedCells.has(\"\".concat(x, \",\").concat(y))){\n                            x++;\n                        }\n                        migrated[type].push({\n                            ...inst,\n                            position: {\n                                x,\n                                y\n                            }\n                        });\n                        occupiedCells.add(\"\".concat(x, \",\").concat(y));\n                        x++;\n                    });\n                });\n                finalBuildings = migrated;\n            }\n            setBuildings(finalBuildings);\n            const nodesToSet = (savedState.resourceNodes || []).map((n)=>({\n                    ...n,\n                    assignedVillagers: n.assignedVillagers || []\n                }));\n            if (nodesToSet.length === 0) {\n                setResourceNodes(generateResourceNodes(occupiedCells));\n            } else {\n                setResourceNodes(nodesToSet);\n            }\n            setCurrentAge(savedState.currentAge);\n            setGameLog(savedState.gameLog);\n            setActiveTasks((savedState.activeTasks || []).map((t)=>{\n                var _t_payload;\n                // Migration for old save format\n                if (t.type === \"build\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.villagerId)) {\n                    return {\n                        ...t,\n                        payload: {\n                            ...t.payload,\n                            villagerIds: [\n                                t.payload.villagerId\n                            ],\n                            villagerId: undefined\n                        }\n                    };\n                }\n                return t;\n            }));\n            setConstructingBuildings((savedState.constructingBuildings || []).map((c)=>{\n                // Migration for old save format\n                if (c.villagerId) {\n                    return {\n                        ...c,\n                        villagerIds: [\n                            c.villagerId\n                        ],\n                        villagerId: undefined\n                    };\n                }\n                return c;\n            }));\n            setCurrentEvent(null);\n            setActivityStatus(\"Welcome back to your saga.\");\n            setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING);\n        } else {\n            addNotification('Could not find a saved game named \"'.concat(saveName, '\".'));\n        }\n    };\n    // Event Trigger Timer\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Events should not trigger if a major task (build, train, advance age) is in progress.\n        // Gathering resources is a background task and should not block events.\n        const majorTaskInProgress = activeTasks.some((t)=>t.type !== \"gather\");\n        if (gameState === _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING && !currentEvent && !playerAction && !majorTaskInProgress) {\n            scheduleNextEvent();\n        } else if (eventTimerRef.current) {\n            clearTimeout(eventTimerRef.current);\n        }\n        return ()=>{\n            if (eventTimerRef.current) {\n                clearTimeout(eventTimerRef.current);\n            }\n        };\n    }, [\n        gameState,\n        currentEvent,\n        playerAction,\n        activeTasks,\n        scheduleNextEvent\n    ]);\n    const handleEventChoice = (choice)=>{\n        addToLog('Decision: \"'.concat(choice.text, '\"'), \"event\");\n        // 1. Check and apply cost\n        if (choice.cost) {\n            const missingRes = [];\n            for(const key in choice.cost){\n                const resKey = key;\n                if (resources[resKey] < (choice.cost[resKey] || 0)) {\n                    missingRes.push(resKey);\n                }\n            }\n            if (missingRes.length > 0) {\n                addNotification(\"You lack the required resources: \".concat(missingRes.join(\", \"), \".\"));\n                return;\n            }\n            const negativeCost = {};\n            for(const key in choice.cost){\n                const resKey = key;\n                negativeCost[resKey] = -(choice.cost[resKey] || 0);\n            }\n            updateResources(negativeCost);\n        }\n        // 2. Determine success\n        const isSuccess = choice.successChance === undefined || Math.random() < choice.successChance;\n        const effects = isSuccess ? choice.successEffects : choice.failureEffects;\n        if (!effects) {\n            setCurrentEvent(null);\n            scheduleNextEvent();\n            return;\n        }\n        // 3. Calculate resource change\n        let amount = 0;\n        if (Array.isArray(effects.amount)) {\n            const [min, max] = effects.amount;\n            amount = Math.floor(Math.random() * (max - min + 1)) + min;\n        } else {\n            amount = effects.amount;\n        }\n        // 4. Apply effects\n        if (effects.resource !== \"none\" && amount !== 0) {\n            updateResources({\n                [effects.resource]: amount\n            });\n        }\n        // 5. Log and update UI\n        addToLog(effects.log, effects.resource !== \"none\" ? effects.resource : \"system\");\n        setActivityStatus(effects.log);\n        setCurrentEvent(null);\n        scheduleNextEvent();\n    };\n    const handleInitiateBuild = (villagerId, rect)=>{\n        if (isVillagerBusy(villagerId)) {\n            addNotification(\"This villager is already busy.\");\n            return;\n        }\n        setBuildPanelState({\n            isOpen: true,\n            villagerId,\n            anchorRect: rect\n        });\n        setUnitManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleStartPlacement = (buildingId)=>{\n        const villagerId = buildPanelState.villagerId;\n        if (!villagerId) return;\n        const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === buildingId);\n        if (!buildingInfo) return;\n        if (buildingInfo.isUnique && (buildings[buildingInfo.id].length > 0 || constructingBuildings.some((b)=>b.type === buildingInfo.id))) {\n            addNotification(\"You can only build one \".concat(buildingInfo.name, \".\"));\n            return;\n        }\n        const cost = buildingInfo.cost;\n        if (!unlimitedResources) {\n            const missing = [];\n            for(const res in cost){\n                const resourceKey = res;\n                var _cost_resourceKey;\n                if (resources[resourceKey] < ((_cost_resourceKey = cost[resourceKey]) !== null && _cost_resourceKey !== void 0 ? _cost_resourceKey : 0)) {\n                    var _cost_resourceKey1;\n                    missing.push(\"\".concat(((_cost_resourceKey1 = cost[resourceKey]) !== null && _cost_resourceKey1 !== void 0 ? _cost_resourceKey1 : 0) - resources[resourceKey], \" \").concat(resourceKey));\n                }\n            }\n            if (missing.length > 0) {\n                addNotification(\"Need \".concat(missing.join(\" and \"), \".\"));\n                return;\n            }\n        }\n        setPlayerAction({\n            mode: \"build\",\n            buildingType: buildingId,\n            villagerId\n        });\n        setBuildPanelState({\n            isOpen: false,\n            villagerId: null,\n            anchorRect: null\n        });\n        setActivityStatus(\"Select a location to build a \".concat(buildingInfo.name, \". Right-click to cancel.\"));\n    };\n    const handleConfirmPlacement = (position)=>{\n        if ((playerAction === null || playerAction === void 0 ? void 0 : playerAction.mode) !== \"build\") return;\n        const { buildingType, villagerId } = playerAction;\n        const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === buildingType);\n        const builder = units.villagers.find((v)=>v.id === villagerId);\n        if (!buildingInfo || !builder) return;\n        if (!unlimitedResources) {\n            const cost = buildingInfo.cost;\n            const negativeCost = {};\n            for(const resource in cost){\n                negativeCost[resource] = -(cost[resource] || 0);\n            }\n            updateResources(negativeCost);\n        }\n        const buildTime = buildingInfo.buildTime * 1000;\n        const taskPayload = {\n            buildingType,\n            villagerIds: [\n                villagerId\n            ],\n            position\n        };\n        if (unlimitedResources) {\n            const taskId = \"\".concat(Date.now(), \"-instant-build\");\n            handleTaskCompletion({\n                id: taskId,\n                type: \"build\",\n                startTime: 0,\n                duration: 0,\n                payload: {\n                    ...taskPayload,\n                    position\n                }\n            });\n        } else {\n            const taskId = \"\".concat(Date.now(), \"-build-\").concat(buildingType);\n            const newConstruction = {\n                id: taskId,\n                type: buildingType,\n                position,\n                villagerIds: [\n                    villagerId\n                ]\n            };\n            setConstructingBuildings((prev)=>[\n                    ...prev,\n                    newConstruction\n                ]);\n            const newTask = {\n                id: taskId,\n                type: \"build\",\n                startTime: Date.now(),\n                duration: buildTime,\n                payload: taskPayload\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"\".concat(builder.name, \" has started constructing a \").concat(buildingInfo.name, \".\"));\n            addToLog(\"\".concat(builder.name, \" began construction of a new \").concat(buildingInfo.name, \".\"), buildingType);\n        }\n        setPlayerAction(null);\n    };\n    const handleCancelPlayerAction = ()=>{\n        setPlayerAction(null);\n        setActivityStatus(\"Command cancelled.\");\n    };\n    const handleDemolishBuilding = (type, id)=>{\n        var _buildings_townCenter;\n        if (activeTasks.some((t)=>{\n            var _t_payload;\n            return ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.buildingId) === id;\n        })) {\n            addNotification(\"Cannot demolish a building with an active task.\");\n            return;\n        }\n        const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === type);\n        const buildingInstance = buildings[type].find((b)=>b.id === id);\n        if (!buildingInfo || !buildingInstance) return;\n        if (type === \"houses\" && population.current > (((_buildings_townCenter = buildings.townCenter) === null || _buildings_townCenter === void 0 ? void 0 : _buildings_townCenter.length) > 0 ? 20 : 0) + (buildings.houses.length - 1) * 5) {\n            addNotification(\"Cannot demolish this house, your people would be homeless.\");\n            return;\n        }\n        const refund = {};\n        let refundMessageParts = [];\n        for(const res in buildingInfo.cost){\n            const resourceKey = res;\n            const cost = buildingInfo.cost[resourceKey] || 0;\n            const amount = Math.floor(cost * 0.5);\n            if (amount > 0) {\n                refund[resourceKey] = amount;\n                refundMessageParts.push(\"\".concat(amount, \" \").concat(resourceKey));\n            }\n        }\n        updateResources(refund);\n        setBuildings((prev)=>({\n                ...prev,\n                [type]: prev[type].filter((b)=>b.id !== id)\n            }));\n        addToLog(\"\".concat(buildingInstance.name, \" (\").concat(buildingInfo.name, \") was demolished.\"), type);\n        if (refundMessageParts.length > 0) {\n            addNotification(\"Salvaged \".concat(refundMessageParts.join(\", \"), \".\"));\n        }\n        setBuildingManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleUpdateBuilding = (type, id, name)=>{\n        setBuildings((prev)=>({\n                ...prev,\n                [type]: prev[type].map((b)=>b.id === id ? {\n                        ...b,\n                        name\n                    } : b)\n            }));\n        addNotification(\"Building renamed.\");\n    };\n    const handleTrainVillagers = (count)=>{\n        var _buildings_townCenter;\n        if (activeTasks.some((t)=>t.type === \"train_villager\") || count <= 0) return;\n        const villagerCost = 50;\n        const totalCost = villagerCost * count;\n        if (population.current + count > population.capacity) {\n            addNotification(\"Need space for \".concat(count, \" more villagers.\"));\n            return;\n        }\n        const townCenter = (_buildings_townCenter = buildings.townCenter) === null || _buildings_townCenter === void 0 ? void 0 : _buildings_townCenter[0];\n        if (!townCenter) {\n            addNotification(\"No Town Center to train villagers.\");\n            return;\n        }\n        if (!unlimitedResources) {\n            if (resources.food < totalCost) {\n                addNotification(\"Need \".concat(totalCost - resources.food, \" more Food.\"));\n                return;\n            }\n            updateResources({\n                food: -totalCost\n            });\n        }\n        const trainTime = 10000 * count; // 10s per villager\n        if (unlimitedResources) {\n            handleTaskCompletion({\n                id: \"instant\",\n                type: \"train_villager\",\n                startTime: 0,\n                duration: 0,\n                payload: {\n                    count\n                }\n            });\n        } else {\n            const taskId = \"\".concat(Date.now(), \"-train-villager\");\n            const newTask = {\n                id: taskId,\n                type: \"train_villager\",\n                startTime: Date.now(),\n                duration: trainTime,\n                payload: {\n                    count,\n                    buildingId: townCenter.id\n                }\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"Training \".concat(count, \" villager(s)...\"));\n            addToLog(\"Began training \".concat(count, \" new villager(s).\"), \"villager\");\n        }\n        setBuildingManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleTrainUnits = (unitType, count)=>{\n        var _buildings_unitInfo_requiredBuilding;\n        const unitInfo = UNIT_INFO.find((u)=>u.id === unitType);\n        if (!unitInfo || activeTasks.some((t)=>{\n            var _t_payload;\n            return ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.unitType) === unitType;\n        }) || count <= 0) return;\n        if (population.current + count > population.capacity) {\n            addNotification(\"Need space for \".concat(count, \" more units.\"));\n            return;\n        }\n        const trainingBuilding = (_buildings_unitInfo_requiredBuilding = buildings[unitInfo.requiredBuilding]) === null || _buildings_unitInfo_requiredBuilding === void 0 ? void 0 : _buildings_unitInfo_requiredBuilding[0];\n        if (!trainingBuilding) {\n            addNotification(\"No \".concat(unitInfo.requiredBuilding, \" to train units.\"));\n            return;\n        }\n        if (!unlimitedResources) {\n            const totalCost = {};\n            const missing = [];\n            for(const res in unitInfo.cost){\n                const resourceKey = res;\n                const cost = (unitInfo.cost[resourceKey] || 0) * count;\n                totalCost[resourceKey] = -cost;\n                if (resources[resourceKey] < cost) missing.push(\"\".concat(cost - resources[resourceKey], \" \").concat(resourceKey));\n            }\n            if (missing.length > 0) {\n                addNotification(\"Need \".concat(missing.join(\" and \"), \".\"));\n                return;\n            }\n            updateResources(totalCost);\n        }\n        const trainTime = unitInfo.trainTime * 1000 * count;\n        if (unlimitedResources) {\n            handleTaskCompletion({\n                id: \"instant\",\n                type: \"train_military\",\n                startTime: 0,\n                duration: 0,\n                payload: {\n                    unitType,\n                    count\n                }\n            });\n        } else {\n            const taskId = \"\".concat(Date.now(), \"-train-\").concat(unitType);\n            const newTask = {\n                id: taskId,\n                type: \"train_military\",\n                startTime: Date.now(),\n                duration: trainTime,\n                payload: {\n                    unitType,\n                    count,\n                    buildingId: trainingBuilding.id\n                }\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"Training \".concat(count, \" \").concat(unitInfo.name, \"(s)...\"));\n            addToLog(\"Began training \".concat(count, \" new \").concat(unitInfo.name, \"(s).\"), unitType);\n        }\n        setBuildingManagementPanel({\n            isOpen: false,\n            type: null,\n            anchorRect: null\n        });\n    };\n    const handleDismissSpecificUnit = (type, id)=>{\n        if (type === \"villagers\" && isVillagerBusy(id)) {\n            addNotification(\"Cannot dismiss a busy villager.\");\n            return;\n        }\n        const unit = units[type].find((u)=>u.id === id);\n        if (!unit) return;\n        if (type === \"villagers\" && units.villagers.length <= 1) {\n            addNotification(\"Cannot dismiss your last villager.\");\n            return;\n        }\n        setUnits((prev)=>({\n                ...prev,\n                [type]: prev[type].filter((u)=>u.id !== id)\n            }));\n        const unitTypeName = type === \"villagers\" ? \"villager\" : unit.unitType;\n        addToLog(\"\".concat(unit.name, \" the \").concat(unitTypeName, \" has been dismissed.\"), type === \"villagers\" ? \"villager\" : unit.unitType);\n        addNotification(\"\".concat(unit.name, \" was dismissed.\"));\n    };\n    const handleUpdateUnit = (type, id, name, title)=>{\n        setUnits((prev)=>({\n                ...prev,\n                [type]: prev[type].map((u)=>{\n                    if (u.id === id) {\n                        const updatedUnit = {\n                            ...u,\n                            name\n                        };\n                        if (type === \"military\" && title !== undefined) {\n                            updatedUnit.title = title;\n                        }\n                        return updatedUnit;\n                    }\n                    return u;\n                })\n            }));\n        addNotification(\"Unit updated.\");\n    };\n    const handleAssignVillagersToNode = (nodeId, count)=>{\n        const idleVillagers = units.villagers.filter((v)=>!isVillagerBusy(v.id));\n        if (count <= 0) return;\n        let cappedCount = Math.min(count, idleVillagers.length);\n        if (cappedCount === 0) {\n            addNotification(\"No idle villagers available.\");\n            return;\n        }\n        const villagersToAssign = idleVillagers.slice(0, cappedCount);\n        const villagerIdsToAssign = villagersToAssign.map((v)=>v.id);\n        const targetNode = resourceNodes.find((n)=>n.id === nodeId);\n        if (!targetNode) return;\n        setResourceNodes((prevNodes)=>prevNodes.map((n)=>n.id === nodeId ? {\n                    ...n,\n                    assignedVillagers: [\n                        ...new Set([\n                            ...n.assignedVillagers,\n                            ...villagerIdsToAssign\n                        ])\n                    ]\n                } : n));\n        if (unlimitedResources) {\n            updateResources({\n                [targetNode.type]: targetNode.amount\n            });\n            addToLog(\"\".concat(cappedCount, \" villager(s) instantly gathered \").concat(Math.floor(targetNode.amount), \" \").concat(targetNode.type, \".\"), targetNode.type);\n            setResourceNodes((prev)=>prev.filter((n)=>n.id !== nodeId));\n        } else {\n            const existingTask = activeTasks.find((t)=>{\n                var _t_payload;\n                return t.type === \"gather\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.resourceNodeId) === nodeId;\n            });\n            if (existingTask) {\n                setActiveTasks((prev)=>prev.map((t)=>t.id === existingTask.id ? {\n                            ...t,\n                            payload: {\n                                ...t.payload,\n                                villagerIds: [\n                                    ...new Set([\n                                        ...t.payload.villagerIds,\n                                        ...villagerIdsToAssign\n                                    ])\n                                ]\n                            }\n                        } : t));\n            } else {\n                const newTask = {\n                    id: \"gather-\".concat(nodeId),\n                    type: \"gather\",\n                    startTime: Date.now(),\n                    duration: 86400000,\n                    payload: {\n                        resourceNodeId: nodeId,\n                        villagerIds: villagerIdsToAssign\n                    }\n                }; // Duration is arbitrary, loop handles completion\n                setActiveTasks((prev)=>[\n                        ...prev,\n                        newTask\n                    ]);\n            }\n        }\n        addToLog(\"\".concat(cappedCount, \" villager(s) assigned to gather \").concat(targetNode.type, \".\"), targetNode.type);\n        setActivityStatus(\"\".concat(cappedCount, \" villager(s) are now gathering \").concat(targetNode.type, \".\"));\n        setAssignmentPanelState({\n            isOpen: false,\n            targetId: null,\n            targetType: null,\n            anchorRect: null\n        });\n    };\n    const handleRecallVillagers = (targetId, count, type)=>{\n        if (type === \"resource\") {\n            const node = resourceNodes.find((n)=>n.id === targetId);\n            if (!node || node.assignedVillagers.length < count) return;\n            const villagersToRecall = node.assignedVillagers.slice(node.assignedVillagers.length - count);\n            setResourceNodes((prev)=>prev.map((n)=>n.id === targetId ? {\n                        ...n,\n                        assignedVillagers: n.assignedVillagers.filter((id)=>!villagersToRecall.includes(id))\n                    } : n));\n            setActiveTasks((prev)=>{\n                const taskIndex = prev.findIndex((t)=>{\n                    var _t_payload;\n                    return t.type === \"gather\" && ((_t_payload = t.payload) === null || _t_payload === void 0 ? void 0 : _t_payload.resourceNodeId) === targetId;\n                });\n                if (taskIndex === -1) return prev;\n                const task = prev[taskIndex];\n                const remainingVillagers = task.payload.villagerIds.filter((id)=>!villagersToRecall.includes(id));\n                if (remainingVillagers.length === 0) {\n                    return prev.filter((_, i)=>i !== taskIndex);\n                } else {\n                    return prev.map((t, i)=>i === taskIndex ? {\n                            ...t,\n                            payload: {\n                                ...t.payload,\n                                villagerIds: remainingVillagers\n                            }\n                        } : t);\n                }\n            });\n            addToLog(\"\".concat(count, \" villager(s) recalled from gathering \").concat(node.type, \".\"), \"villager\");\n        } else {\n            const construction = constructingBuildings.find((c)=>c.id === targetId);\n            const task = activeTasks.find((t)=>t.id === targetId);\n            if (!construction || !task || construction.villagerIds.length < count) return;\n            const villagersToRecall = construction.villagerIds.slice(construction.villagerIds.length - count);\n            const remainingVillagers = construction.villagerIds.filter((id)=>!villagersToRecall.includes(id));\n            if (remainingVillagers.length === 0) {\n                addNotification(\"Cannot recall the last builder. This would cancel the project.\");\n                return;\n            }\n            const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === construction.type);\n            const totalWork = buildingInfo.buildTime * 1000;\n            const oldWorkerCount = construction.villagerIds.length;\n            const timeElapsed = Date.now() - task.startTime;\n            const workDone = timeElapsed * oldWorkerCount;\n            const workRemaining = Math.max(0, totalWork - workDone);\n            const newWorkerCount = remainingVillagers.length;\n            const newRemainingDuration = workRemaining / newWorkerCount;\n            setConstructingBuildings((prev)=>prev.map((c)=>c.id === targetId ? {\n                        ...c,\n                        villagerIds: remainingVillagers\n                    } : c));\n            setActiveTasks((prev)=>prev.map((t)=>t.id === targetId ? {\n                        ...t,\n                        startTime: Date.now(),\n                        duration: newRemainingDuration,\n                        payload: {\n                            ...t.payload,\n                            villagerIds: remainingVillagers\n                        }\n                    } : t));\n            addToLog(\"\".concat(count, \" villager(s) recalled from construction. Work will now proceed slower.\"), \"villager\");\n        }\n        setAssignmentPanelState({\n            isOpen: false,\n            targetId: null,\n            targetType: null,\n            anchorRect: null\n        });\n    };\n    const handleAssignVillagersToConstruction = (constructionId, count)=>{\n        var _task_payload_villagerIds, _task_payload;\n        const idleVillagers = units.villagers.filter((v)=>!isVillagerBusy(v.id));\n        if (count <= 0) return;\n        let cappedCount = Math.min(count, idleVillagers.length);\n        if (cappedCount === 0) {\n            addNotification(\"No idle villagers available to assist.\");\n            return;\n        }\n        const villagersToAssign = idleVillagers.slice(0, cappedCount).map((v)=>v.id);\n        const task = activeTasks.find((t)=>t.id === constructionId);\n        const construction = constructingBuildings.find((c)=>c.id === constructionId);\n        if (!task || !construction) return;\n        const buildingInfo = BUILDINGS_INFO.find((b)=>b.id === construction.type);\n        if (!buildingInfo) return;\n        const baseDuration = buildingInfo.buildTime * 1000;\n        const oldWorkerCount = ((_task_payload = task.payload) === null || _task_payload === void 0 ? void 0 : (_task_payload_villagerIds = _task_payload.villagerIds) === null || _task_payload_villagerIds === void 0 ? void 0 : _task_payload_villagerIds.length) || 1;\n        const timeElapsed = Date.now() - task.startTime;\n        const workDone = timeElapsed * oldWorkerCount;\n        const totalWork = baseDuration;\n        const workRemaining = Math.max(0, totalWork - workDone);\n        const newWorkerCount = oldWorkerCount + cappedCount;\n        const newRemainingDuration = workRemaining / newWorkerCount;\n        const updatedVillagerIds = [\n            ...task.payload.villagerIds,\n            ...villagersToAssign\n        ];\n        setActiveTasks((prev)=>prev.map((t)=>t.id === constructionId ? {\n                    ...t,\n                    startTime: Date.now(),\n                    duration: newRemainingDuration,\n                    payload: {\n                        ...t.payload,\n                        villagerIds: updatedVillagerIds\n                    }\n                } : t));\n        setConstructingBuildings((prev)=>prev.map((c)=>c.id === constructionId ? {\n                    ...c,\n                    villagerIds: updatedVillagerIds\n                } : c));\n        addToLog(\"\".concat(cappedCount, \" villager(s) are now assisting with the \").concat(buildingInfo.name, \".\"), buildingInfo.id);\n        setActivityStatus(\"Construction of the \".concat(buildingInfo.name, \" is now faster.\"));\n        setAssignmentPanelState({\n            isOpen: false,\n            targetId: null,\n            targetType: null,\n            anchorRect: null\n        });\n    };\n    const handleAssignVillagers = (targetId, count)=>{\n        if (assignmentPanelState.targetType === \"resource\") {\n            handleAssignVillagersToNode(targetId, count);\n        } else if (assignmentPanelState.targetType === \"construction\") {\n            handleAssignVillagersToConstruction(targetId, count);\n        }\n    };\n    const handleAdvanceAge = async ()=>{\n        if (activeTasks.some((t)=>t.type === \"advance_age\")) {\n            addNotification(\"Advancement already in progress.\");\n            return;\n        }\n        if (!unlimitedResources) {\n            if (resources.food < 500 || resources.gold < 200) {\n                const missing = [];\n                if (resources.food < 500) missing.push(\"\".concat(500 - resources.food, \" Food\"));\n                if (resources.gold < 200) missing.push(\"\".concat(200 - resources.gold, \" Gold\"));\n                addNotification(\"To advance, you need \".concat(missing.join(\" and \"), \".\"));\n                return;\n            }\n            updateResources({\n                food: -500,\n                gold: -200\n            });\n        }\n        const duration = 60000;\n        if (unlimitedResources) {\n            handleTaskCompletion({\n                id: \"instant\",\n                type: \"advance_age\",\n                startTime: 0,\n                duration: 0\n            });\n        } else {\n            const taskId = \"\".concat(Date.now(), \"-advance_age\");\n            const newTask = {\n                id: taskId,\n                type: \"advance_age\",\n                startTime: Date.now(),\n                duration\n            };\n            setActiveTasks((prev)=>[\n                    ...prev,\n                    newTask\n                ]);\n            setActivityStatus(\"Your people begin the long journey to a new age.\");\n            setBuildingManagementPanel({\n                isOpen: false,\n                type: null,\n                anchorRect: null\n            });\n        }\n    };\n    const handleExitGame = async ()=>{\n        setCurrentSaveName(null);\n        await fetchSaves();\n        setGameState(_types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.MENU);\n    };\n    const handleDeleteGame = async (saveName)=>{\n        await (0,_services_dbService__WEBPACK_IMPORTED_MODULE_4__.deleteGameState)(saveName);\n        await fetchSaves();\n        addNotification('Deleted saga: \"'.concat(saveName, '\"'));\n    };\n    const handleToggleUnlimitedResources = ()=>{\n        const newMode = !unlimitedResources;\n        setUnlimitedResources(newMode);\n        if (newMode) {\n            setResources({\n                food: 99999,\n                wood: 99999,\n                gold: 99999,\n                stone: 99999\n            });\n            addNotification(\"Test Mode: ON\");\n        } else {\n            addNotification(\"Test Mode: OFF\");\n        }\n    };\n    const buildingCounts = Object.keys(buildings).reduce((acc, key)=>{\n        const buildingType = key;\n        acc[buildingType] = buildings[buildingType].length;\n        return acc;\n    }, {});\n    const idleVillagerCount = units.villagers.filter((v)=>!isVillagerBusy(v.id)).length;\n    const assignmentTarget = assignmentPanelState.targetType === \"resource\" ? resourceNodes.find((n)=>n.id === assignmentPanelState.targetId) : constructingBuildings.find((c)=>c.id === assignmentPanelState.targetId);\n    const closeAllPanels = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setUnitManagementPanel((p)=>p.isOpen ? {\n                isOpen: false,\n                type: null,\n                anchorRect: null\n            } : p);\n        setBuildingManagementPanel((p)=>p.isOpen ? {\n                isOpen: false,\n                type: null,\n                instanceId: undefined,\n                anchorRect: null\n            } : p);\n        setBuildPanelState((p)=>p.isOpen ? {\n                isOpen: false,\n                villagerId: null,\n                anchorRect: null\n            } : p);\n        setAssignmentPanelState((p)=>p.isOpen ? {\n                isOpen: false,\n                targetId: null,\n                targetType: null,\n                anchorRect: null\n            } : p);\n        setSettingsPanelState((p)=>p.isOpen ? {\n                isOpen: false,\n                anchorRect: null\n            } : p);\n        setCivPanelState((p)=>p.isOpen ? {\n                isOpen: false,\n                anchorRect: null\n            } : p);\n        setAllBuildingsPanel((p)=>p.isOpen ? {\n                isOpen: false,\n                anchorRect: null\n            } : p);\n    }, []);\n    const handleOpenBuildingPanel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((type, instanceId, rect)=>{\n        closeAllPanels();\n        setBuildingManagementPanel({\n            isOpen: true,\n            type,\n            instanceId,\n            anchorRect: rect\n        });\n    }, [\n        closeAllPanels\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleClickOutside = (event)=>{\n            const isAnyPanelOpen = unitManagementPanel.isOpen || buildingManagementPanel.isOpen || buildPanelState.isOpen || assignmentPanelState.isOpen || settingsPanelState.isOpen || civPanelState.isOpen || allBuildingsPanel.isOpen;\n            if (!isAnyPanelOpen) {\n                return;\n            }\n            const target = event.target;\n            if (target.closest(\".sci-fi-panel-popup\")) {\n                return;\n            }\n            closeAllPanels();\n        };\n        document.addEventListener(\"mousedown\", handleClickOutside);\n        return ()=>{\n            document.removeEventListener(\"mousedown\", handleClickOutside);\n        };\n    }, [\n        unitManagementPanel.isOpen,\n        buildingManagementPanel.isOpen,\n        buildPanelState.isOpen,\n        assignmentPanelState.isOpen,\n        settingsPanelState.isOpen,\n        civPanelState.isOpen,\n        allBuildingsPanel.isOpen,\n        closeAllPanels\n    ]);\n    const renderContent = ()=>{\n        switch(gameState){\n            case _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.MENU:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_StartScreen__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                    onNewGame: handleStartNewGame,\n                    onResumeGame: handleResumeGame,\n                    savedGames: allSaves,\n                    onDeleteGame: handleDeleteGame\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 999,\n                    columnNumber: 24\n                }, undefined);\n            case _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.LOADING:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingScreen__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 1001,\n                    columnNumber: 24\n                }, undefined);\n            case _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING:\n                if (!civilization) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingScreen__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 1003,\n                    columnNumber: 43\n                }, undefined);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_GameUI__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            civilization: civilization,\n                            resources: resources,\n                            units: units,\n                            buildings: buildings,\n                            population: population,\n                            currentAge: currentAge,\n                            gameLog: gameLog,\n                            currentEvent: currentEvent,\n                            onEventChoice: handleEventChoice,\n                            resourceDeltas: resourceDeltas,\n                            activityStatus: activityStatus,\n                            unitList: UNIT_INFO,\n                            buildingList: BUILDINGS_INFO,\n                            onOpenUnitPanel: (type, rect)=>{\n                                closeAllPanels();\n                                setUnitManagementPanel({\n                                    isOpen: true,\n                                    type,\n                                    anchorRect: rect\n                                });\n                            },\n                            onOpenBuildingPanel: handleOpenBuildingPanel,\n                            onOpenAllBuildingsPanel: (rect)=>{\n                                closeAllPanels();\n                                setAllBuildingsPanel({\n                                    isOpen: true,\n                                    anchorRect: rect\n                                });\n                            },\n                            playerAction: playerAction,\n                            onConfirmPlacement: handleConfirmPlacement,\n                            onCancelPlayerAction: handleCancelPlayerAction,\n                            onBuildingClick: (building, rect)=>{\n                                closeAllPanels();\n                                const type = Object.keys(buildings).find((key)=>buildings[key].some((b)=>b.id === building.id));\n                                if (type) setBuildingManagementPanel({\n                                    isOpen: true,\n                                    type,\n                                    instanceId: building.id,\n                                    anchorRect: rect\n                                });\n                            },\n                            mapDimensions: MAP_DIMENSIONS,\n                            constructingBuildings: constructingBuildings,\n                            activeTasks: activeTasks,\n                            onExitGame: handleExitGame,\n                            onOpenSettingsPanel: (rect)=>{\n                                closeAllPanels();\n                                setSettingsPanelState({\n                                    isOpen: true,\n                                    anchorRect: rect\n                                });\n                            },\n                            onOpenCivPanel: (rect)=>{\n                                closeAllPanels();\n                                setCivPanelState({\n                                    isOpen: true,\n                                    anchorRect: rect\n                                });\n                            },\n                            resourceNodes: resourceNodes,\n                            onOpenAssignmentPanel: (nodeId, rect)=>{\n                                closeAllPanels();\n                                setAssignmentPanelState({\n                                    isOpen: true,\n                                    targetId: nodeId,\n                                    targetType: \"resource\",\n                                    anchorRect: rect\n                                });\n                            },\n                            onOpenConstructionPanel: (constructionId, rect)=>{\n                                closeAllPanels();\n                                setAssignmentPanelState({\n                                    isOpen: true,\n                                    targetId: constructionId,\n                                    targetType: \"construction\",\n                                    anchorRect: rect\n                                });\n                            },\n                            gatherInfo: GATHER_INFO\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1006,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_BuildPanel__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                            isOpen: buildPanelState.isOpen,\n                            onClose: ()=>setBuildPanelState({\n                                    isOpen: false,\n                                    villagerId: null,\n                                    anchorRect: null\n                                }),\n                            onStartPlacement: handleStartPlacement,\n                            resources: resources,\n                            buildingCounts: buildingCounts,\n                            buildingList: BUILDINGS_INFO,\n                            anchorRect: buildPanelState.anchorRect,\n                            panelOpacity: panelOpacity\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1042,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_UnitManagementPanel__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                            isOpen: unitManagementPanel.isOpen,\n                            onClose: ()=>setUnitManagementPanel({\n                                    isOpen: false,\n                                    type: null,\n                                    anchorRect: null\n                                }),\n                            type: unitManagementPanel.type,\n                            units: units,\n                            onUpdateUnit: handleUpdateUnit,\n                            onDismissUnit: handleDismissSpecificUnit,\n                            onInitiateBuild: (villagerId, rect)=>{\n                                closeAllPanels();\n                                handleInitiateBuild(villagerId, rect);\n                            },\n                            getVillagerTaskDetails: getVillagerTaskDetails,\n                            anchorRect: unitManagementPanel.anchorRect,\n                            panelOpacity: panelOpacity\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1052,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_BuildingManagementPanel__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                            isOpen: buildingManagementPanel.isOpen,\n                            onClose: ()=>setBuildingManagementPanel({\n                                    isOpen: false,\n                                    type: null,\n                                    anchorRect: null\n                                }),\n                            panelState: buildingManagementPanel,\n                            buildings: buildings,\n                            buildingList: BUILDINGS_INFO,\n                            onUpdateBuilding: handleUpdateBuilding,\n                            onDemolishBuilding: handleDemolishBuilding,\n                            onTrainUnits: handleTrainUnits,\n                            onTrainVillagers: handleTrainVillagers,\n                            resources: resources,\n                            population: population,\n                            unitList: UNIT_INFO,\n                            onAdvanceAge: handleAdvanceAge,\n                            activeTasks: activeTasks,\n                            anchorRect: buildingManagementPanel.anchorRect,\n                            panelOpacity: panelOpacity\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1064,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ResourceAssignmentPanel__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                            isOpen: assignmentPanelState.isOpen,\n                            onClose: ()=>setAssignmentPanelState({\n                                    isOpen: false,\n                                    targetId: null,\n                                    targetType: null,\n                                    anchorRect: null\n                                }),\n                            assignmentTarget: assignmentTarget || null,\n                            idleVillagerCount: idleVillagerCount,\n                            onAssignVillagers: handleAssignVillagers,\n                            onRecallVillagers: handleRecallVillagers,\n                            gatherInfo: GATHER_INFO,\n                            buildingList: BUILDINGS_INFO,\n                            anchorRect: assignmentPanelState.anchorRect,\n                            panelOpacity: panelOpacity\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1082,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SettingsPanel__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                            isOpen: settingsPanelState.isOpen,\n                            onClose: ()=>setSettingsPanelState({\n                                    isOpen: false,\n                                    anchorRect: null\n                                }),\n                            anchorRect: settingsPanelState.anchorRect,\n                            opacity: panelOpacity,\n                            onOpacityChange: setPanelOpacity\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1094,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CivilizationPanel__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                            isOpen: civPanelState.isOpen,\n                            onClose: ()=>setCivPanelState({\n                                    isOpen: false,\n                                    anchorRect: null\n                                }),\n                            civilization: civilization,\n                            anchorRect: civPanelState.anchorRect,\n                            panelOpacity: panelOpacity\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1101,\n                            columnNumber: 25\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AllBuildingsPanel__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                            isOpen: allBuildingsPanel.isOpen,\n                            onClose: ()=>setAllBuildingsPanel({\n                                    isOpen: false,\n                                    anchorRect: null\n                                }),\n                            buildingList: BUILDINGS_INFO,\n                            buildingCounts: buildingCounts,\n                            constructingBuildings: constructingBuildings,\n                            onOpenBuildingPanel: handleOpenBuildingPanel,\n                            anchorRect: allBuildingsPanel.anchorRect,\n                            panelOpacity: panelOpacity\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/page.tsx\",\n                            lineNumber: 1108,\n                            columnNumber: 25\n                        }, undefined)\n                    ]\n                }, void 0, true);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_StartScreen__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                    onNewGame: handleStartNewGame,\n                    onResumeGame: handleResumeGame,\n                    savedGames: allSaves,\n                    onDeleteGame: handleDeleteGame\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/page.tsx\",\n                    lineNumber: 1121,\n                    columnNumber: 24\n                }, undefined);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-stone-dark flex items-center justify-center p-4\",\n        children: [\n            gameState === _types__WEBPACK_IMPORTED_MODULE_2__.GameStatus.PLAYING && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleToggleUnlimitedResources,\n                className: \"fixed bottom-4 left-4 z-[101] bg-brand-gold text-stone-dark font-bold py-1 px-3 rounded-full text-xs shadow-lg hover:scale-105 transition-transform\",\n                \"aria-label\": \"Toggle unlimited resources test mode\",\n                children: [\n                    \"Test Mode: \",\n                    unlimitedResources ? \"ON\" : \"OFF\"\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/page.tsx\",\n                lineNumber: 1128,\n                columnNumber: 18\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_NotificationManager__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                notifications: notifications,\n                onRemoveNotification: removeNotification\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/page.tsx\",\n                lineNumber: 1136,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"w-full max-w-7xl mx-auto\",\n                children: renderContent()\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/page.tsx\",\n                lineNumber: 1137,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/src/app/page.tsx\",\n        lineNumber: 1126,\n        columnNumber: 9\n    }, undefined);\n};\n_s(GamePage, \"l+9PRlPFKiu/fRK2fKupt6+sgGw=\");\n_c = GamePage;\n/* harmony default export */ __webpack_exports__[\"default\"] = (GamePage);\nvar _c;\n$RefreshReg$(_c, \"GamePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a1QsZ0JBQWdCQTs0QkFDaEJsUCx1QkFBdUJBOzRCQUN2QjBRLHFCQUFxQmpCOzRCQUNyQi9PLFlBQVlNLGtCQUFrQk4sVUFBVTs0QkFDeENOLGNBQWNBOzs7Ozs7OztZQUk5QjtnQkFDSSxxQkFBTyw4REFBQzlFLCtEQUFXQTtvQkFBQzRVLFdBQVcvSDtvQkFBb0JnSSxjQUFjbkg7b0JBQWtCb0gsWUFBWTVRO29CQUFVNlEsY0FBY3RCOzs7Ozs7UUFDL0g7SUFDSjtJQUVBLHFCQUNJLDhEQUFDdUQ7UUFBSUMsV0FBVTs7WUFDVnpVLGNBQWNsRCw4Q0FBVUEsQ0FBQ3NILE9BQU8sa0JBQzVCLDhEQUFDc1E7Z0JBQ0VDLFNBQVN6RDtnQkFDVHVELFdBQVU7Z0JBQ1ZHLGNBQVc7O29CQUNkO29CQUNlcFQscUJBQXFCLE9BQU87Ozs7Ozs7MEJBR2hELDhEQUFDN0Qsd0VBQW1CQTtnQkFBQzJELGVBQWVBO2dCQUFldVQsc0JBQXNCaFE7Ozs7OzswQkFDekUsOERBQUNpUTtnQkFBS0wsV0FBVTswQkFDWHRDOzs7Ozs7Ozs7Ozs7QUFJakI7R0Fsa0NNclM7S0FBQUE7QUFva0NOLCtEQUFlQSxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvcGFnZS50c3g/ZjY4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBHYW1lU3RhdHVzLCB0eXBlIENpdmlsaXphdGlvbiwgdHlwZSBSZXNvdXJjZXMsIHR5cGUgVW5pdHMsIHR5cGUgQnVpbGRpbmdzLCB0eXBlIEdhbWVFdmVudCwgdHlwZSBHYW1lTG9nRW50cnksIHR5cGUgTG9nSWNvblR5cGUsIHR5cGUgUmVzb3VyY2VEZWx0YXMsIEJ1aWxkaW5nVHlwZSwgQnVpbGRpbmdJbmZvLCBVSU5vdGlmaWNhdGlvbiwgRnVsbEdhbWVTdGF0ZSwgVmlsbGFnZXIsIE1pbGl0YXJ5VW5pdCwgVW5pdEluZm8sIE1pbGl0YXJ5VW5pdFR5cGUsIEdhbWVUYXNrLCBDb25zdHJ1Y3RpbmdCdWlsZGluZywgVGFza1R5cGUsIFJlc291cmNlTm9kZSwgUmVzb3VyY2VOb2RlVHlwZSwgUGxheWVyQWN0aW9uU3RhdGUsIEdhbWVFdmVudENob2ljZSB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgZ2V0UHJlZGVmaW5lZENpdmlsaXphdGlvbiwgZ2V0UHJlZGVmaW5lZEdhbWVFdmVudCwgZ2V0UHJlZGVmaW5lZEFnZSB9IGZyb20gJ0Avc2VydmljZXMvZ2VtaW5pU2VydmljZSc7XG5pbXBvcnQgeyBzYXZlR2FtZVN0YXRlLCBsb2FkR2FtZVN0YXRlLCBnZXRBbGxTYXZlTmFtZXMsIGRlbGV0ZUdhbWVTdGF0ZSB9IGZyb20gJ0Avc2VydmljZXMvZGJTZXJ2aWNlJztcbmltcG9ydCB7IGdldFJhbmRvbU5hbWVzIH0gZnJvbSAnQC9zZXJ2aWNlcy9uYW1lU2VydmljZSc7XG5pbXBvcnQgR2FtZVVJIGZyb20gJ0AvY29tcG9uZW50cy9HYW1lVUknO1xuaW1wb3J0IFN0YXJ0U2NyZWVuIGZyb20gJ0AvY29tcG9uZW50cy9TdGFydFNjcmVlbic7XG5pbXBvcnQgTG9hZGluZ1NjcmVlbiBmcm9tICdAL2NvbXBvbmVudHMvTG9hZGluZ1NjcmVlbic7XG5pbXBvcnQgQnVpbGRQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvQnVpbGRQYW5lbCc7XG5pbXBvcnQgTm90aWZpY2F0aW9uTWFuYWdlciBmcm9tICdAL2NvbXBvbmVudHMvTm90aWZpY2F0aW9uTWFuYWdlcic7XG5pbXBvcnQgVW5pdE1hbmFnZW1lbnRQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvVW5pdE1hbmFnZW1lbnRQYW5lbCc7XG5pbXBvcnQgQnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwgZnJvbSAnQC9jb21wb25lbnRzL0J1aWxkaW5nTWFuYWdlbWVudFBhbmVsJztcbmltcG9ydCBSZXNvdXJjZUFzc2lnbm1lbnRQYW5lbCBmcm9tICdAL2NvbXBvbmVudHMvUmVzb3VyY2VBc3NpZ25tZW50UGFuZWwnO1xuaW1wb3J0IFNldHRpbmdzUGFuZWwgZnJvbSAnQC9jb21wb25lbnRzL1NldHRpbmdzUGFuZWwnO1xuaW1wb3J0IENpdmlsaXphdGlvblBhbmVsIGZyb20gJ0AvY29tcG9uZW50cy9DaXZpbGl6YXRpb25QYW5lbCc7XG5pbXBvcnQgQWxsQnVpbGRpbmdzUGFuZWwgZnJvbSAnQC9jb21wb25lbnRzL0FsbEJ1aWxkaW5nc1BhbmVsJztcblxuY29uc3QgQlVJTERJTkdTX0lORk86IEJ1aWxkaW5nSW5mb1tdID0gW1xuICAgIHsgaWQ6ICdob3VzZXMnLCBuYW1lOiAnSG91c2UnLCBkZXNjcmlwdGlvbjogJ0luY3JlYXNlcyBwb3B1bGF0aW9uIGNhcGFjaXR5IGJ5IDUuJywgY29zdDogeyB3b29kOiA1MCB9LCBpc1VuaXF1ZTogZmFsc2UsIGJ1aWxkVGltZTogMTUgfSxcbiAgICB7IGlkOiAnYmFycmFja3MnLCBuYW1lOiAnQmFycmFja3MnLCBkZXNjcmlwdGlvbjogJ0FsbG93cyB0cmFpbmluZyBvZiBTd29yZHNtZW4uJywgY29zdDogeyB3b29kOiAxNTAsIHN0b25lOiA1MCB9LCBpc1VuaXF1ZTogdHJ1ZSwgYnVpbGRUaW1lOiA2MCB9LFxuICAgIHsgaWQ6ICdhcmNoZXJ5UmFuZ2UnLCBuYW1lOiAnQXJjaGVyeSBSYW5nZScsIGRlc2NyaXB0aW9uOiAnQWxsb3dzIHRyYWluaW5nIG9mIEFyY2hlcnMuJywgY29zdDogeyB3b29kOiAxNzUgfSwgaXNVbmlxdWU6IHRydWUsIGJ1aWxkVGltZTogNjAgfSxcbiAgICB7IGlkOiAnc3RhYmxlJywgbmFtZTogJ1N0YWJsZXMnLCBkZXNjcmlwdGlvbjogJ0FsbG93cyB0cmFpbmluZyBvZiBLbmlnaHRzLicsIGNvc3Q6IHsgd29vZDogMTc1LCBnb2xkOiA3NSB9LCBpc1VuaXF1ZTogdHJ1ZSwgYnVpbGRUaW1lOiA3NSB9LFxuICAgIHsgaWQ6ICdzaWVnZVdvcmtzaG9wJywgbmFtZTogJ1NpZWdlIFdvcmtzaG9wJywgZGVzY3JpcHRpb246ICdDb25zdHJ1Y3RzIHBvd2VyZnVsIENhdGFwdWx0cy4nLCBjb3N0OiB7IHdvb2Q6IDIwMCwgZ29sZDogMTUwIH0sIGlzVW5pcXVlOiB0cnVlLCBidWlsZFRpbWU6IDkwIH0sXG4gICAgeyBpZDogJ2JsYWNrc21pdGgnLCBuYW1lOiAnQmxhY2tzbWl0aCcsIGRlc2NyaXB0aW9uOiAnUmVzZWFyY2hlcyBpbmZhbnRyeSBhbmQgY2F2YWxyeSB1cGdyYWRlcy4nLCBjb3N0OiB7IHdvb2Q6IDEwMCwgZ29sZDogMTAwIH0sIGlzVW5pcXVlOiB0cnVlLCBidWlsZFRpbWU6IDQ1IH0sXG4gICAgeyBpZDogJ3dhdGNoVG93ZXInLCBuYW1lOiAnV2F0Y2ggVG93ZXInLCBkZXNjcmlwdGlvbjogJ1Byb3ZpZGVzIGRlZmVuc2UgYWdhaW5zdCByYWlkcy4nLCBjb3N0OiB7IHN0b25lOiAxMjUgfSwgaXNVbmlxdWU6IHRydWUsIGJ1aWxkVGltZTogNDUgfSxcbiAgICB7IGlkOiAndG93bkNlbnRlcicsIG5hbWU6ICdUb3duIENlbnRlcicsIGRlc2NyaXB0aW9uOiAnVGhlIGhlYXJ0IG9mIHlvdXIgc2V0dGxlbWVudC4nLCBjb3N0OiB7fSwgaXNVbmlxdWU6IHRydWUsIGJ1aWxkVGltZTogMCB9XG5dO1xuXG5jb25zdCBVTklUX0lORk86IFVuaXRJbmZvW10gPSBbXG4gICAgeyBpZDogJ3N3b3Jkc21hbicsIG5hbWU6ICdTd29yZHNtYW4nLCBkZXNjcmlwdGlvbjogJ0Jhc2ljIG1lbGVlIGluZmFudHJ5LicsIGNvc3Q6IHsgZm9vZDogNjAsIGdvbGQ6IDIwIH0sIHJlcXVpcmVkQnVpbGRpbmc6ICdiYXJyYWNrcycsIHRyYWluVGltZTogMjIgfSxcbiAgICB7IGlkOiAnYXJjaGVyJywgbmFtZTogJ0FyY2hlcicsIGRlc2NyaXB0aW9uOiAnUmFuZ2VkIHVuaXQgZWZmZWN0aXZlIGFnYWluc3QgaW5mYW50cnkuJywgY29zdDogeyBmb29kOiAzMCwgd29vZDogNDAgfSwgcmVxdWlyZWRCdWlsZGluZzogJ2FyY2hlcnlSYW5nZScsIHRyYWluVGltZTogMjUgfSxcbiAgICB7IGlkOiAna25pZ2h0JywgbmFtZTogJ0tuaWdodCcsIGRlc2NyaXB0aW9uOiAnRmFzdCBhbmQgcG93ZXJmdWwgY2F2YWxyeS4nLCBjb3N0OiB7IGZvb2Q6IDYwLCBnb2xkOiA3NSB9LCByZXF1aXJlZEJ1aWxkaW5nOiAnc3RhYmxlJywgdHJhaW5UaW1lOiAzMCB9LFxuICAgIHsgaWQ6ICdjYXRhcHVsdCcsIG5hbWU6ICdDYXRhcHVsdCcsIGRlc2NyaXB0aW9uOiAnU2llZ2UgZW5naW5lIGRldmFzdGF0aW5nIHRvIGJ1aWxkaW5ncy4nLCBjb3N0OiB7IHdvb2Q6IDE1MCwgZ29sZDogMTUwIH0sIHJlcXVpcmVkQnVpbGRpbmc6ICdzaWVnZVdvcmtzaG9wJywgdHJhaW5UaW1lOiA0NSB9LFxuXTtcblxuY29uc3QgR0FUSEVSX0lORk86IFJlY29yZDxSZXNvdXJjZU5vZGVUeXBlLCB7IHJhdGU6IG51bWJlciB9PiA9IHtcbiAgICBmb29kOiB7IHJhdGU6IDEwMCB9LCAvLyBSYXRlcyBhcmUgbm93IHBlciAxMCBzZWNvbmRzIGZvciBtb3JlIGludHVpdGl2ZSBudW1iZXJzXG4gICAgd29vZDogeyByYXRlOiA4MCB9LFxuICAgIGdvbGQ6IHsgcmF0ZTogNTAgfSxcbiAgICBzdG9uZTogeyByYXRlOiA2MCB9LFxufVxuXG5jb25zdCBpbml0aWFsQnVpbGRpbmdzU3RhdGU6IEJ1aWxkaW5ncyA9IHtcbiAgICBob3VzZXM6IFtdLCBiYXJyYWNrczogW10sIGFyY2hlcnlSYW5nZTogW10sIHN0YWJsZTogW10sIHNpZWdlV29ya3Nob3A6IFtdLCBibGFja3NtaXRoOiBbXSwgd2F0Y2hUb3dlcjogW10sIHRvd25DZW50ZXI6IFtdXG59O1xuXG5jb25zdCBNQVBfRElNRU5TSU9OUyA9IHsgd2lkdGg6IDI1LCBoZWlnaHQ6IDE4IH07XG5cbmNvbnN0IEdhbWVQYWdlOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgICBjb25zdCBbZ2FtZVN0YXRlLCBzZXRHYW1lU3RhdGVdID0gdXNlU3RhdGU8R2FtZVN0YXR1cz4oR2FtZVN0YXR1cy5NRU5VKTtcbiAgICBjb25zdCBbY2l2aWxpemF0aW9uLCBzZXRDaXZpbGl6YXRpb25dID0gdXNlU3RhdGU8Q2l2aWxpemF0aW9uIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW3Jlc291cmNlcywgc2V0UmVzb3VyY2VzXSA9IHVzZVN0YXRlPFJlc291cmNlcz4oeyBmb29kOiAyMDAsIHdvb2Q6IDE1MCwgZ29sZDogNTAsIHN0b25lOiAxMDAgfSk7XG4gICAgY29uc3QgW3VuaXRzLCBzZXRVbml0c10gPSB1c2VTdGF0ZTxVbml0cz4oeyB2aWxsYWdlcnM6IFtdLCBtaWxpdGFyeTogW10gfSk7XG4gICAgY29uc3QgW2J1aWxkaW5ncywgc2V0QnVpbGRpbmdzXSA9IHVzZVN0YXRlPEJ1aWxkaW5ncz4oaW5pdGlhbEJ1aWxkaW5nc1N0YXRlKTtcbiAgICBjb25zdCBbY3VycmVudEFnZSwgc2V0Q3VycmVudEFnZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCdOb21hZGljIEFnZScpO1xuICAgIGNvbnN0IFtnYW1lTG9nLCBzZXRHYW1lTG9nXSA9IHVzZVN0YXRlPEdhbWVMb2dFbnRyeVtdPihbXSk7XG4gICAgY29uc3QgW2N1cnJlbnRFdmVudCwgc2V0Q3VycmVudEV2ZW50XSA9IHVzZVN0YXRlPEdhbWVFdmVudCB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IFtyZXNvdXJjZURlbHRhcywgc2V0UmVzb3VyY2VEZWx0YXNdID0gdXNlU3RhdGU8UmVzb3VyY2VEZWx0YXM+KHt9KTtcbiAgICBjb25zdCBbYWN0aXZpdHlTdGF0dXMsIHNldEFjdGl2aXR5U3RhdHVzXSA9IHVzZVN0YXRlPHN0cmluZz4oJ1lvdXIgc3RvcnkgYmVnaW5zLi4uJyk7XG4gICAgY29uc3QgW25vdGlmaWNhdGlvbnMsIHNldE5vdGlmaWNhdGlvbnNdID0gdXNlU3RhdGU8VUlOb3RpZmljYXRpb25bXT4oW10pO1xuICAgIGNvbnN0IFt1bmxpbWl0ZWRSZXNvdXJjZXMsIHNldFVubGltaXRlZFJlc291cmNlc10gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gICAgY29uc3QgW2FsbFNhdmVzLCBzZXRBbGxTYXZlc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW10pO1xuICAgIGNvbnN0IFtjdXJyZW50U2F2ZU5hbWUsIHNldEN1cnJlbnRTYXZlTmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbcGxheWVyQWN0aW9uLCBzZXRQbGF5ZXJBY3Rpb25dID0gdXNlU3RhdGU8UGxheWVyQWN0aW9uU3RhdGU+KG51bGwpO1xuICAgIGNvbnN0IFthY3RpdmVUYXNrcywgc2V0QWN0aXZlVGFza3NdID0gdXNlU3RhdGU8R2FtZVRhc2tbXT4oW10pO1xuICAgIGNvbnN0IFtjb25zdHJ1Y3RpbmdCdWlsZGluZ3MsIHNldENvbnN0cnVjdGluZ0J1aWxkaW5nc10gPSB1c2VTdGF0ZTxDb25zdHJ1Y3RpbmdCdWlsZGluZ1tdPihbXSk7XG4gICAgY29uc3QgW3Jlc291cmNlTm9kZXMsIHNldFJlc291cmNlTm9kZXNdID0gdXNlU3RhdGU8UmVzb3VyY2VOb2RlW10+KFtdKTtcbiAgICBjb25zdCBbcGFuZWxPcGFjaXR5LCBzZXRQYW5lbE9wYWNpdHldID0gdXNlU3RhdGUoMS4wKTtcbiAgICBcbiAgICAvLyBQYW5lbCBTdGF0ZXNcbiAgICBjb25zdCBbYnVpbGRQYW5lbFN0YXRlLCBzZXRCdWlsZFBhbmVsU3RhdGVdID0gdXNlU3RhdGU8eyBpc09wZW46IGJvb2xlYW47IHZpbGxhZ2VySWQ6IHN0cmluZyB8IG51bGw7IGFuY2hvclJlY3Q6IERPTVJlY3QgfCBudWxsIH0+KHsgaXNPcGVuOiBmYWxzZSwgdmlsbGFnZXJJZDogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICBjb25zdCBbdW5pdE1hbmFnZW1lbnRQYW5lbCwgc2V0VW5pdE1hbmFnZW1lbnRQYW5lbF0gPSB1c2VTdGF0ZTx7IGlzT3BlbjogYm9vbGVhbjsgdHlwZTogJ3ZpbGxhZ2VycycgfCAnbWlsaXRhcnknIHwgbnVsbDsgYW5jaG9yUmVjdDogRE9NUmVjdCB8IG51bGw7IH0+KHsgaXNPcGVuOiBmYWxzZSwgdHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICBjb25zdCBbYnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwsIHNldEJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsXSA9IHVzZVN0YXRlPHsgaXNPcGVuOiBib29sZWFuOyB0eXBlOiBCdWlsZGluZ1R5cGUgfCBudWxsOyBpbnN0YW5jZUlkPzogc3RyaW5nOyBhbmNob3JSZWN0OiBET01SZWN0IHwgbnVsbDsgfT4oeyBpc09wZW46IGZhbHNlLCB0eXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIGNvbnN0IFthbGxCdWlsZGluZ3NQYW5lbCwgc2V0QWxsQnVpbGRpbmdzUGFuZWxdID0gdXNlU3RhdGU8eyBpc09wZW46IGJvb2xlYW47IGFuY2hvclJlY3Q6IERPTVJlY3QgfCBudWxsOyB9Pih7IGlzT3BlbjogZmFsc2UsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgY29uc3QgW2Fzc2lnbm1lbnRQYW5lbFN0YXRlLCBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZV0gPSB1c2VTdGF0ZTx7IGlzT3BlbjogYm9vbGVhbjsgdGFyZ2V0SWQ6IHN0cmluZyB8IG51bGw7IHRhcmdldFR5cGU6ICdyZXNvdXJjZScgfCAnY29uc3RydWN0aW9uJyB8IG51bGw7IGFuY2hvclJlY3Q6IERPTVJlY3QgfCBudWxsOyB9Pih7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIGNvbnN0IFtzZXR0aW5nc1BhbmVsU3RhdGUsIHNldFNldHRpbmdzUGFuZWxTdGF0ZV0gPSB1c2VTdGF0ZTx7IGlzT3BlbjogYm9vbGVhbjsgYW5jaG9yUmVjdDogRE9NUmVjdCB8IG51bGw7IH0+KHsgaXNPcGVuOiBmYWxzZSwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICBjb25zdCBbY2l2UGFuZWxTdGF0ZSwgc2V0Q2l2UGFuZWxTdGF0ZV0gPSB1c2VTdGF0ZTx7IGlzT3BlbjogYm9vbGVhbjsgYW5jaG9yUmVjdDogRE9NUmVjdCB8IG51bGw7IH0+KHsgaXNPcGVuOiBmYWxzZSwgYW5jaG9yUmVjdDogbnVsbCB9KTtcblxuICAgIGNvbnN0IGRlbHRhVGltZW91dFJlZiA9IHVzZVJlZjx7IFtrZXkgaW4ga2V5b2YgUmVzb3VyY2VzXT86IG51bWJlciB9Pih7fSk7XG4gICAgY29uc3QgZXZlbnRUaW1lclJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuXG4gICAgY29uc3QgcG9wdWxhdGlvbiA9IHtcbiAgICAgICAgY3VycmVudDogdW5pdHMudmlsbGFnZXJzLmxlbmd0aCArIHVuaXRzLm1pbGl0YXJ5Lmxlbmd0aCxcbiAgICAgICAgY2FwYWNpdHk6IChidWlsZGluZ3MudG93bkNlbnRlcj8ubGVuZ3RoID4gMCA/IDIwIDogMCkgKyBidWlsZGluZ3MuaG91c2VzLmxlbmd0aCAqIDUsXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBmZXRjaFNhdmVzID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lcyA9IGF3YWl0IGdldEFsbFNhdmVOYW1lcygpO1xuICAgICAgICBzZXRBbGxTYXZlcyhuYW1lcyk7XG4gICAgfSwgW10pO1xuICAgIFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGZldGNoU2F2ZXMoKTtcbiAgICB9LCBbZmV0Y2hTYXZlc10pO1xuICAgIFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChnYW1lU3RhdGUgPT09IEdhbWVTdGF0dXMuUExBWUlORyAmJiBjaXZpbGl6YXRpb24gJiYgY3VycmVudFNhdmVOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsU3RhdGU6IEZ1bGxHYW1lU3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgY2l2aWxpemF0aW9uLFxuICAgICAgICAgICAgICAgIHJlc291cmNlcyxcbiAgICAgICAgICAgICAgICB1bml0cyxcbiAgICAgICAgICAgICAgICBidWlsZGluZ3MsXG4gICAgICAgICAgICAgICAgY3VycmVudEFnZSxcbiAgICAgICAgICAgICAgICBnYW1lTG9nLFxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhc2tzLFxuICAgICAgICAgICAgICAgIGNvbnN0cnVjdGluZ0J1aWxkaW5ncyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZU5vZGVzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNhdmVHYW1lU3RhdGUoY3VycmVudFNhdmVOYW1lLCBmdWxsU3RhdGUpO1xuICAgICAgICB9XG4gICAgfSwgW2NpdmlsaXphdGlvbiwgcmVzb3VyY2VzLCB1bml0cywgYnVpbGRpbmdzLCBjdXJyZW50QWdlLCBnYW1lTG9nLCBnYW1lU3RhdGUsIGN1cnJlbnRTYXZlTmFtZSwgYWN0aXZlVGFza3MsIGNvbnN0cnVjdGluZ0J1aWxkaW5ncywgcmVzb3VyY2VOb2Rlc10pO1xuXG4gICAgY29uc3QgYWRkTm90aWZpY2F0aW9uID0gdXNlQ2FsbGJhY2soKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gO1xuICAgICAgICBzZXROb3RpZmljYXRpb25zKHByZXYgPT4gWy4uLnByZXYsIHsgaWQsIG1lc3NhZ2UgfV0pO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IHJlbW92ZU5vdGlmaWNhdGlvbiA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldE5vdGlmaWNhdGlvbnMocHJldiA9PiBwcmV2LmZpbHRlcihuID0+IG4uaWQgIT09IGlkKSk7XG4gICAgfSwgW10pO1xuICAgIFxuICAgIGNvbnN0IGFkZFRvTG9nID0gdXNlQ2FsbGJhY2soKG1lc3NhZ2U6IHN0cmluZywgaWNvbjogTG9nSWNvblR5cGUpID0+IHtcbiAgICAgICAgc2V0R2FtZUxvZyhwcmV2ID0+IFt7IGlkOiBgJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCwgbWVzc2FnZSwgaWNvbiB9LCAuLi5wcmV2LnNsaWNlKDAsIDE5KV0pO1xuICAgIH0sIFtdKTtcbiAgICBcbiAgICBjb25zdCB1cGRhdGVSZXNvdXJjZXMgPSB1c2VDYWxsYmFjaygoZGVsdGFzOiBSZXNvdXJjZURlbHRhcykgPT4ge1xuICAgICAgICBzZXRSZXNvdXJjZXMocHJldiA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdSZXNvdXJjZXMgPSB7IC4uLnByZXYgfTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRlbHRhcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc291cmNlS2V5ID0ga2V5IGFzIGtleW9mIFJlc291cmNlcztcbiAgICAgICAgICAgICAgICBuZXdSZXNvdXJjZXNbcmVzb3VyY2VLZXldID0gTWF0aC5tYXgoMCwgbmV3UmVzb3VyY2VzW3Jlc291cmNlS2V5XSArIChkZWx0YXNbcmVzb3VyY2VLZXldID8/IDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdSZXNvdXJjZXM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFJlc291cmNlRGVsdGFzKHByZXYgPT4gKHsuLi5wcmV2LCAuLi5kZWx0YXN9KSk7XG5cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGVsdGFzKSB7XG4gICAgICAgICAgICBjb25zdCByZXNvdXJjZUtleSA9IGtleSBhcyBrZXlvZiBSZXNvdXJjZXM7XG4gICAgICAgICAgICBpZiAoZGVsdGFUaW1lb3V0UmVmLmN1cnJlbnRbcmVzb3VyY2VLZXldKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChkZWx0YVRpbWVvdXRSZWYuY3VycmVudFtyZXNvdXJjZUtleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsdGFUaW1lb3V0UmVmLmN1cnJlbnRbcmVzb3VyY2VLZXldID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFJlc291cmNlRGVsdGFzKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdEZWx0YXMgPSB7Li4ucHJldn07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdEZWx0YXNbcmVzb3VyY2VLZXldO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3RGVsdGFzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMTUwMCk7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBoYW5kbGVUYXNrQ29tcGxldGlvbiA9IHVzZUNhbGxiYWNrKCh0YXNrOiBHYW1lVGFzaykgPT4ge1xuICAgICAgICBzd2l0Y2ggKHRhc2sudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnYnVpbGQnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBidWlsZGluZ1R5cGUsIHZpbGxhZ2VySWRzLCBwb3NpdGlvbiB9ID0gdGFzay5wYXlsb2FkITtcbiAgICAgICAgICAgICAgICBjb25zdCBidWlsZGluZ0luZm8gPSBCVUlMRElOR1NfSU5GTy5maW5kKGIgPT4gYi5pZCA9PT0gYnVpbGRpbmdUeXBlKSE7XG4gICAgICAgICAgICAgICAgY29uc3QgW25hbWVdID0gZ2V0UmFuZG9tTmFtZXMoJ2J1aWxkaW5nJywgMSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QnVpbGRpbmc6IEJ1aWxkaW5nSW5zdGFuY2UgPSB7IGlkOiB0YXNrLmlkLCBuYW1lLCBwb3NpdGlvbjogcG9zaXRpb24hIH07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2V0Q29uc3RydWN0aW5nQnVpbGRpbmdzKHByZXYgPT4gcHJldi5maWx0ZXIoYiA9PiBiLmlkICE9PSB0YXNrLmlkKSk7XG4gICAgICAgICAgICAgICAgc2V0QnVpbGRpbmdzKHAgPT4gKHsgLi4ucCwgW2J1aWxkaW5nVHlwZSFdOiBbLi4ucFtidWlsZGluZ1R5cGUhXSwgbmV3QnVpbGRpbmddIH0pKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodmlsbGFnZXJJZHMgJiYgdmlsbGFnZXJJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRUb0xvZyhgJHt2aWxsYWdlcklkcy5sZW5ndGh9IGJ1aWxkZXIocykgaGF2ZSBjb25zdHJ1Y3RlZCAke25hbWV9LCBhIG5ldyAke2J1aWxkaW5nSW5mby5uYW1lfS5gLCBidWlsZGluZ1R5cGUhKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYENvbnN0cnVjdGlvbiBvZiAke25hbWV9IGlzIGNvbXBsZXRlLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2dhdGhlcic6IHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG5vdyBoYW5kbGVkIGJ5IHRoZSBnYW1lIGxvb3AgZGVwbGV0aW5nIHRoZSBub2RlLlxuICAgICAgICAgICAgICAgIC8vIGhhbmRsZVRhc2tDb21wbGV0aW9uIGZvciBnYXRoZXIgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgbm9kZSBpcyBnb25lLlxuICAgICAgICAgICAgICAgIC8vIFRoZSB2aWxsYWdlcnMgYXNzaWduZWQgYXJlIG5vdyBpZGxlLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAndHJhaW5fdmlsbGFnZXInOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb3VudCB9ID0gdGFzay5wYXlsb2FkITtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWaWxsYWdlck5hbWVzID0gZ2V0UmFuZG9tTmFtZXMoJ3ZpbGxhZ2VyJywgY291bnQhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWaWxsYWdlcnM6IFZpbGxhZ2VyW10gPSBuZXdWaWxsYWdlck5hbWVzLm1hcChuYW1lID0+ICh7IGlkOiBgJHtEYXRlLm5vdygpfS0ke25hbWV9YCwgbmFtZSB9KSk7XG4gICAgICAgICAgICAgICAgc2V0VW5pdHMocCA9PiAoeyAuLi5wLCB2aWxsYWdlcnM6IFsuLi5wLnZpbGxhZ2VycywgLi4ubmV3VmlsbGFnZXJzXSB9KSk7XG4gICAgICAgICAgICAgICAgYWRkVG9Mb2coYCR7Y291bnR9IG5ldyB2aWxsYWdlcihzKSBoYXZlIGpvaW5lZCB5b3VyIHNldHRsZW1lbnQuYCwgJ3ZpbGxhZ2VyJyk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYCR7Y291bnR9IG5ldyB2aWxsYWdlcihzKSBhcmUgcmVhZHkgdG8gd29yay5gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3RyYWluX21pbGl0YXJ5Jzoge1xuICAgICAgICAgICAgICAgICBjb25zdCB7IHVuaXRUeXBlLCBjb3VudCB9ID0gdGFzay5wYXlsb2FkITtcbiAgICAgICAgICAgICAgICAgY29uc3QgdW5pdEluZm8gPSBVTklUX0lORk8uZmluZCh1ID0+IHUuaWQgPT09IHVuaXRUeXBlKSE7XG4gICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VuaXROYW1lcyA9IGdldFJhbmRvbU5hbWVzKCdzb2xkaWVyJywgY291bnQhKTtcbiAgICAgICAgICAgICAgICAgY29uc3QgbmV3VW5pdHM6IE1pbGl0YXJ5VW5pdFtdID0gbmV3VW5pdE5hbWVzLm1hcChuYW1lID0+ICh7IGlkOiBgJHtEYXRlLm5vdygpfS0ke3VuaXRUeXBlfS0ke25hbWV9YCwgbmFtZSwgdGl0bGU6ICcnLCB1bml0VHlwZTogdW5pdFR5cGUhIH0pKTtcbiAgICAgICAgICAgICAgICAgc2V0VW5pdHMocCA9PiAoeyAuLi5wLCBtaWxpdGFyeTogWy4uLnAubWlsaXRhcnksIC4uLm5ld1VuaXRzXSB9KSk7XG4gICAgICAgICAgICAgICAgIGFkZFRvTG9nKGAke2NvdW50fSAke3VuaXRJbmZvLm5hbWV9KHMpIGhhdmUgYmVlbiB0cmFpbmVkLmAsIHVuaXRUeXBlISk7XG4gICAgICAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKGAke2NvdW50fSBuZXcgJHt1bml0SW5mby5uYW1lfShzKSBhcmUgcmVhZHkgZm9yIGJhdHRsZS5gKTtcbiAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdhZHZhbmNlX2FnZSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhZ2VSZXN1bHQgPSBnZXRQcmVkZWZpbmVkQWdlKGN1cnJlbnRBZ2UpO1xuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRBZ2UoYWdlUmVzdWx0Lm5leHRBZ2VOYW1lKTtcbiAgICAgICAgICAgICAgICBhZGRUb0xvZyhgWW91IGhhdmUgYWR2YW5jZWQgdG8gdGhlICR7YWdlUmVzdWx0Lm5leHRBZ2VOYW1lfSFgLCAnYWdlJyk7XG4gICAgICAgICAgICAgICAgYWRkVG9Mb2coYWdlUmVzdWx0LmRlc2NyaXB0aW9uLCAnYWdlJyk7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYFdlbGNvbWUgdG8gdGhlICR7YWdlUmVzdWx0Lm5leHRBZ2VOYW1lfSFgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFtjdXJyZW50QWdlLCB1cGRhdGVSZXNvdXJjZXMsIGFkZFRvTG9nXSk7XG4gICAgXG4gICAgLy8gR2FtZSBMb29wXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgZ2FtZUxvb3AgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgbGV0IGNvbXBsZXRlZFRhc2tzOiBHYW1lVGFza1tdID0gW107XG4gICAgICAgICAgICBsZXQgcmVzb3VyY2VEZWx0YXNUaGlzVGljazogUmVzb3VyY2VEZWx0YXMgPSB7fTtcblxuICAgICAgICAgICAgY29uc3Qgc3RpbGxBY3RpdmVUYXNrcyA9IGFjdGl2ZVRhc2tzLm1hcCh0YXNrID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IHRhc2suc3RhcnRUaW1lICsgdGFzay5kdXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRhc2sudHlwZSA9PT0gJ2dhdGhlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHJlc291cmNlTm9kZXMuZmluZChuID0+IG4uaWQgPT09IHRhc2sucGF5bG9hZD8ucmVzb3VyY2VOb2RlSWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWxsYWdlckNvdW50ID0gdGFzay5wYXlsb2FkPy52aWxsYWdlcklkcz8ubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUgfHwgdmlsbGFnZXJDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE9ycGhhbmVkIHRhc2ssIG1hcmsgZm9yIHJlbW92YWxcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhdGhlclJhdGVQZXJWaWxsYWdlclBlclNlY29uZCA9IEdBVEhFUl9JTkZPW25vZGUudHlwZV0ucmF0ZSAvIDEwO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRHYXRoZXJlZFRoaXNUaWNrID0gZ2F0aGVyUmF0ZVBlclZpbGxhZ2VyUGVyU2Vjb25kICogdmlsbGFnZXJDb3VudDtcblxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZURlbHRhc1RoaXNUaWNrW25vZGUudHlwZV0gPSAocmVzb3VyY2VEZWx0YXNUaGlzVGlja1tub2RlLnR5cGVdIHx8IDApICsgYW1vdW50R2F0aGVyZWRUaGlzVGljaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzaztcblxuICAgICAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pIGFzIEdhbWVUYXNrW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZXNvdXJjZSBub2RlcyBzZXBhcmF0ZWx5IHRvIGF2b2lkIHJhY2UgY29uZGl0aW9ucyB3aXRoIHN0YXRlXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzb3VyY2VEZWx0YXNUaGlzVGljaykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNldFJlc291cmNlcyhwcmV2UmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UmVzb3VyY2VzID0geyAuLi5wcmV2UmVzIH07XG4gICAgICAgICAgICAgICAgICAgIGZvcihjb25zdCBrZXkgaW4gcmVzb3VyY2VEZWx0YXNUaGlzVGljaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzS2V5ID0ga2V5IGFzIGtleW9mIFJlc291cmNlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jlc291cmNlc1tyZXNLZXldICs9IHJlc291cmNlRGVsdGFzVGhpc1RpY2tbcmVzS2V5XSE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Jlc291cmNlcztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNldFJlc291cmNlTm9kZXMocHJldk5vZGVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVzV2VyZURlcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld05vZGVzID0gcHJldk5vZGVzLm1hcChub2RlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudFRvRGVjcmVtZW50ID0gcmVzb3VyY2VEZWx0YXNUaGlzVGlja1tub2RlLnR5cGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtb3VudFRvRGVjcmVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QW1vdW50ID0gbm9kZS5hbW91bnQgLSBhbW91bnRUb0RlY3JlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3QW1vdW50IDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkVG9Mb2coYCR7bm9kZS5hc3NpZ25lZFZpbGxhZ2Vycy5sZW5ndGh9IHZpbGxhZ2VyKHMpIGRlcGxldGVkIGEgJHtub2RlLnR5cGV9IHNvdXJjZSwgZ2FpbmluZyAke01hdGguZmxvb3Iobm9kZS5hbW91bnQpfSAke25vZGUudHlwZX0uYCwgbm9kZS50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYEEgJHtub2RlLnR5cGV9IHNvdXJjZSBoYXMgYmVlbiBmdWxseSBkZXBsZXRlZC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNXZXJlRGVwbGV0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhdGhlclRhc2sgPSBzdGlsbEFjdGl2ZVRhc2tzLmZpbmQodCA9PiB0LnR5cGUgPT09ICdnYXRoZXInICYmIHQucGF5bG9hZD8ucmVzb3VyY2VOb2RlSWQgPT09IG5vZGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihnYXRoZXJUYXNrKSBjb21wbGV0ZWRUYXNrcy5wdXNoKGdhdGhlclRhc2spO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5ub2RlLCBhbW91bnQ6IG5ld0Ftb3VudCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIH0pLmZpbHRlcihCb29sZWFuKSBhcyBSZXNvdXJjZU5vZGVbXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZXNXZXJlRGVwbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBmaWx0ZXIgb3V0IHRoZSBjb21wbGV0ZWQgZ2F0aGVyIHRhc2tzIGluIHRoZSBuZXh0IHN0ZXBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3Tm9kZXM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbmFsQWN0aXZlVGFza3MgPSBzdGlsbEFjdGl2ZVRhc2tzLmZpbHRlcih0ID0+ICFjb21wbGV0ZWRUYXNrcy5zb21lKGN0ID0+IGN0LmlkID09PSB0LmlkKSk7XG4gICAgICAgICAgICBzZXRBY3RpdmVUYXNrcyhmaW5hbEFjdGl2ZVRhc2tzKTtcblxuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZFRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRUYXNrcy5mb3JFYWNoKGhhbmRsZVRhc2tDb21wbGV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoZ2FtZUxvb3ApO1xuICAgIH0sIFthY3RpdmVUYXNrcywgcmVzb3VyY2VOb2RlcywgaGFuZGxlVGFza0NvbXBsZXRpb24sIGFkZFRvTG9nXSk7XG5cblxuICAgIGNvbnN0IGhhbmRsZU5ld0V2ZW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBub25HYXRoZXJpbmdUYXNrcyA9IGFjdGl2ZVRhc2tzLmZpbHRlcih0ID0+IHQudHlwZSAhPT0gJ2dhdGhlcicpO1xuICAgICAgICBpZiAoIWNpdmlsaXphdGlvbiB8fCBjdXJyZW50RXZlbnQgfHwgbm9uR2F0aGVyaW5nVGFza3MubGVuZ3RoID4gMCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgYWRkVG9Mb2coJ0EgbmV3IGNoYXB0ZXIgdW5mb2xkcy4uLicsICdldmVudCcpO1xuICAgICAgICBjb25zdCBldmVudCA9IGdldFByZWRlZmluZWRHYW1lRXZlbnQoKTtcbiAgICAgICAgc2V0Q3VycmVudEV2ZW50KGV2ZW50KTtcbiAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoJ0EgbmV3IGV2ZW50IHJlcXVpcmVzIHlvdXIgYXR0ZW50aW9uIScpO1xuICAgIH0sIFtjaXZpbGl6YXRpb24sIGN1cnJlbnRFdmVudCwgYWN0aXZlVGFza3MsIGFkZFRvTG9nXSk7XG4gICAgXG4gICAgY29uc3Qgc2NoZWR1bGVOZXh0RXZlbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGlmIChldmVudFRpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChldmVudFRpbWVyUmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRFdmVudFRpbWUgPSAoNDUgKyBNYXRoLnJhbmRvbSgpICogNDUpICogMTAwMDsgLy8gNDUtOTAgc2Vjb25kc1xuICAgICAgICBldmVudFRpbWVyUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IGhhbmRsZU5ld0V2ZW50KCksIG5leHRFdmVudFRpbWUpO1xuICAgIH0sIFtoYW5kbGVOZXdFdmVudF0pO1xuXG4gICAgY29uc3QgZ2VuZXJhdGVSZXNvdXJjZU5vZGVzID0gKGV4aXN0aW5nUG9zaXRpb25zOiBTZXQ8c3RyaW5nPik6IFJlc291cmNlTm9kZVtdID0+IHtcbiAgICAgICAgY29uc3Qgbm9kZXM6IFJlc291cmNlTm9kZVtdID0gW107XG4gICAgICAgIGNvbnN0IHR5cGVzOiBSZXNvdXJjZU5vZGVUeXBlW10gPSBbJ2Zvb2QnLCAnd29vZCcsICdnb2xkJywgJ3N0b25lJ107XG4gICAgICAgIGNvbnN0IG51bU5vZGVzID0gMjAgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bU5vZGVzOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwb3M6IHt4OiBudW1iZXIsIHk6IG51bWJlcn07XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgcG9zID0ge1xuICAgICAgICAgICAgICAgICAgICB4OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVBfRElNRU5TSU9OUy53aWR0aCksXG4gICAgICAgICAgICAgICAgICAgIHk6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1BUF9ESU1FTlNJT05TLmhlaWdodCksXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoZXhpc3RpbmdQb3NpdGlvbnMuaGFzKGAke3Bvcy54fSwke3Bvcy55fWApKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhpc3RpbmdQb3NpdGlvbnMuYWRkKGAke3Bvcy54fSwke3Bvcy55fWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdHlwZXMubGVuZ3RoKV07XG4gICAgICAgICAgICBjb25zdCBhbW91bnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMjUwMCAtIDUwMCArIDEpKSArIDUwMDtcblxuICAgICAgICAgICAgbm9kZXMucHVzaCh7IGlkOiBgJHtEYXRlLm5vdygpfS1ub2RlLSR7aX1gLCB0eXBlLCBwb3NpdGlvbjogcG9zLCBhbW91bnQsIGFzc2lnbmVkVmlsbGFnZXJzOiBbXSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVN0YXJ0TmV3R2FtZSA9IChzYXZlTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChhbGxTYXZlcy5pbmNsdWRlcyhzYXZlTmFtZSkpIHtcbiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihgQSBzYWdhIG5hbWVkIFwiJHtzYXZlTmFtZX1cIiBhbHJlYWR5IGV4aXN0cy5gKTsgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldEdhbWVTdGF0ZShHYW1lU3RhdHVzLkxPQURJTkcpO1xuICAgICAgICBzZXRDdXJyZW50U2F2ZU5hbWUoc2F2ZU5hbWUpO1xuXG4gICAgICAgIGNvbnN0IGNpdiA9IGdldFByZWRlZmluZWRDaXZpbGl6YXRpb24oKTtcbiAgICAgICAgc2V0Q2l2aWxpemF0aW9uKGNpdik7XG4gICAgICAgIHNldFJlc291cmNlcyh7IGZvb2Q6IDIwMCwgd29vZDogMTUwLCBnb2xkOiA1MCwgc3RvbmU6IDEwMCB9KTtcbiAgICAgICAgY29uc3QgaW5pdGlhbFZpbGxhZ2VyTmFtZXMgPSBnZXRSYW5kb21OYW1lcygndmlsbGFnZXInLCAzKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbFZpbGxhZ2VyczogVmlsbGFnZXJbXSA9IGluaXRpYWxWaWxsYWdlck5hbWVzLm1hcChuYW1lID0+ICh7IGlkOiBgJHtEYXRlLm5vdygpfS0ke25hbWV9YCwgbmFtZSB9KSk7XG4gICAgICAgIHNldFVuaXRzKHsgdmlsbGFnZXJzOiBpbml0aWFsVmlsbGFnZXJzLCBtaWxpdGFyeTogW10gfSk7XG4gICAgICAgIGNvbnN0IFtpbml0aWFsVENOYW1lXSA9IGdldFJhbmRvbU5hbWVzKCdidWlsZGluZycsIDEpO1xuICAgICAgICBjb25zdCB0Y1Bvc2l0aW9uID0geyB4OiBNYXRoLmZsb29yKE1BUF9ESU1FTlNJT05TLndpZHRoIC8gMiksIHk6IE1hdGguZmxvb3IoTUFQX0RJTUVOU0lPTlMuaGVpZ2h0IC8gMikgfTtcbiAgICAgICAgY29uc3QgaW5pdGlhbFRDOiBCdWlsZGluZ0luc3RhbmNlID0geyBpZDogYCR7RGF0ZS5ub3coKX0tdGNgLCBuYW1lOiBpbml0aWFsVENOYW1lLCBwb3NpdGlvbjogdGNQb3NpdGlvbiB9O1xuICAgICAgICBzZXRCdWlsZGluZ3Moey4uLmluaXRpYWxCdWlsZGluZ3NTdGF0ZSwgdG93bkNlbnRlcjogW2luaXRpYWxUQ119KTtcbiAgICAgICAgc2V0UmVzb3VyY2VOb2RlcyhnZW5lcmF0ZVJlc291cmNlTm9kZXMobmV3IFNldChbYCR7dGNQb3NpdGlvbi54fSwke3RjUG9zaXRpb24ueX1gXSkpKTtcbiAgICAgICAgc2V0Q3VycmVudEFnZSgnTm9tYWRpYyBBZ2UnKTtcbiAgICAgICAgc2V0R2FtZUxvZyhbXSk7XG4gICAgICAgIHNldEN1cnJlbnRFdmVudChudWxsKTtcbiAgICAgICAgc2V0VW5saW1pdGVkUmVzb3VyY2VzKGZhbHNlKTtcbiAgICAgICAgc2V0QWN0aXZlVGFza3MoW10pO1xuICAgICAgICBzZXRDb25zdHJ1Y3RpbmdCdWlsZGluZ3MoW10pO1xuICAgICAgICBhZGRUb0xvZyhgJHtjaXYubmFtZX0gaGFzIGJlZW4gZm91bmRlZCFgLCAnc3lzdGVtJyk7XG4gICAgICAgIGFkZFRvTG9nKCdZb3VyIHN0b3J5IGJlZ2lucy4uLicsICdzeXN0ZW0nKTtcbiAgICAgICAgc2V0R2FtZVN0YXRlKEdhbWVTdGF0dXMuUExBWUlORyk7XG4gICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKCdZb3VyIHNldHRsZW1lbnQgYXdhaXRzIHlvdXIgY29tbWFuZC4nKTtcbiAgICAgICAgZmV0Y2hTYXZlcygpO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRWaWxsYWdlclRhc2tEZXRhaWxzID0gdXNlQ2FsbGJhY2soKHZpbGxhZ2VySWQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBhY3RpdmVUYXNrcy5maW5kKHQgPT4gdC5wYXlsb2FkPy52aWxsYWdlcklkcz8uaW5jbHVkZXModmlsbGFnZXJJZCkpO1xuXG4gICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICBpZiAodGFzay50eXBlID09PSAnYnVpbGQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVpbGRpbmdJbmZvID0gQlVJTERJTkdTX0lORk8uZmluZChiID0+IGIuaWQgPT09IHRhc2sucGF5bG9hZCEuYnVpbGRpbmdUeXBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYEJ1c3k6IENvbnN0cnVjdGluZyAke2J1aWxkaW5nSW5mbz8ubmFtZSB8fCAnYSBidWlsZGluZyd9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXNrLnR5cGUgPT09ICdnYXRoZXInKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHJlc291cmNlTm9kZXMuZmluZChuID0+IG4uaWQgPT09IHRhc2sucGF5bG9hZCEucmVzb3VyY2VOb2RlSWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgQnVzeTogR2F0aGVyaW5nICR7bm9kZT8udHlwZSB8fCAncmVzb3VyY2VzJ31gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gJ0lkbGUnO1xuICAgIH0sIFthY3RpdmVUYXNrcywgcmVzb3VyY2VOb2Rlc10pO1xuXG4gICAgY29uc3QgaXNWaWxsYWdlckJ1c3kgPSB1c2VDYWxsYmFjaygodmlsbGFnZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBnZXRWaWxsYWdlclRhc2tEZXRhaWxzKHZpbGxhZ2VySWQpICE9PSAnSWRsZSc7XG4gICAgfSwgW2dldFZpbGxhZ2VyVGFza0RldGFpbHNdKTtcblxuICAgIGNvbnN0IGhhbmRsZVJlc3VtZUdhbWUgPSBhc3luYyAoc2F2ZU5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBzYXZlZFN0YXRlID0gYXdhaXQgbG9hZEdhbWVTdGF0ZShzYXZlTmFtZSkgYXMgRnVsbEdhbWVTdGF0ZTtcbiAgICAgICAgaWYgKHNhdmVkU3RhdGUpIHtcbiAgICAgICAgICAgIHNldEdhbWVTdGF0ZShHYW1lU3RhdHVzLkxPQURJTkcpO1xuICAgICAgICAgICAgc2V0Q3VycmVudFNhdmVOYW1lKHNhdmVOYW1lKTtcbiAgICAgICAgICAgIHNldENpdmlsaXphdGlvbihzYXZlZFN0YXRlLmNpdmlsaXphdGlvbik7XG4gICAgICAgICAgICBzZXRSZXNvdXJjZXMoc2F2ZWRTdGF0ZS5yZXNvdXJjZXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoKHNhdmVkU3RhdGUudW5pdHMgYXMgYW55KT8uc29sZGllcnMpIHtcbiAgICAgICAgICAgICAgICAgY29uc3QgbWlncmF0ZWRNaWxpdGFyeTogTWlsaXRhcnlVbml0W10gPSAoc2F2ZWRTdGF0ZS51bml0cyBhcyBhbnkpLnNvbGRpZXJzLm1hcCgoczogYW55KSA9PiAoeyAuLi5zLCB1bml0VHlwZTogJ3N3b3Jkc21hbicgfSkpO1xuICAgICAgICAgICAgICAgICBzZXRVbml0cyh7IHZpbGxhZ2Vyczogc2F2ZWRTdGF0ZS51bml0cy52aWxsYWdlcnMgfHwgW10sIG1pbGl0YXJ5OiBtaWdyYXRlZE1pbGl0YXJ5IH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgc2V0VW5pdHMoc2F2ZWRTdGF0ZS51bml0cyB8fCB7IHZpbGxhZ2VyczogW10sIG1pbGl0YXJ5OiBbXSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGZpbmFsQnVpbGRpbmdzID0geyAuLi5pbml0aWFsQnVpbGRpbmdzU3RhdGUsIC4uLihzYXZlZFN0YXRlLmJ1aWxkaW5ncyB8fCB7fSkgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgb2NjdXBpZWRDZWxscyA9IG5ldyBTZXQoT2JqZWN0LnZhbHVlcyhmaW5hbEJ1aWxkaW5ncykuZmxhdCgpLm1hcCgoYjogYW55KSA9PiBgJHtiLnBvc2l0aW9uLnh9LCR7Yi5wb3NpdGlvbi55fWApKTtcblxuICAgICAgICAgICAgaWYgKCFmaW5hbEJ1aWxkaW5ncy50b3duQ2VudGVyIHx8IGZpbmFsQnVpbGRpbmdzLnRvd25DZW50ZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRjUG9zID0geyB4OiAxMCwgeTogNSB9O1xuICAgICAgICAgICAgICAgIHdoaWxlIChvY2N1cGllZENlbGxzLmhhcyhgJHt0Y1Bvcy54fSwke3RjUG9zLnl9YCkpIHsgdGNQb3MueCsrOyB9XG4gICAgICAgICAgICAgICAgY29uc3QgW3RjTmFtZV0gPSBnZXRSYW5kb21OYW1lcygnYnVpbGRpbmcnLCAxKTtcbiAgICAgICAgICAgICAgICBmaW5hbEJ1aWxkaW5ncy50b3duQ2VudGVyID0gW3sgaWQ6IGAke0RhdGUubm93KCl9LXRjYCwgbmFtZTogdGNOYW1lLCBwb3NpdGlvbjogdGNQb3MgfV07XG4gICAgICAgICAgICAgICAgb2NjdXBpZWRDZWxscy5hZGQoYCR7dGNQb3MueH0sJHt0Y1Bvcy55fWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBmaXJzdEJ1aWxkaW5nID0gT2JqZWN0LnZhbHVlcyhmaW5hbEJ1aWxkaW5ncykuZmxhdCgpWzBdO1xuICAgICAgICAgICAgaWYgKGZpcnN0QnVpbGRpbmcgJiYgdHlwZW9mIGZpcnN0QnVpbGRpbmcgPT09ICdvYmplY3QnICYmICEoJ3Bvc2l0aW9uJyBpbiBmaXJzdEJ1aWxkaW5nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pZ3JhdGVkID0geyAuLi5pbml0aWFsQnVpbGRpbmdzU3RhdGUgfTtcbiAgICAgICAgICAgICAgICBsZXQgeSA9IDM7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZmluYWxCdWlsZGluZ3MpLmZvckVhY2goKFt0eXBlLCBpbnN0YW5jZXNdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB4ID0gNTtcbiAgICAgICAgICAgICAgICAgICAgKGluc3RhbmNlcyBhcyBCdWlsZGluZ0luc3RhbmNlW10pLmZvckVhY2goaW5zdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2NjdXBpZWRDZWxscy5oYXMoYCR7eH0sJHt5fWApKSB7IHgrKzsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKG1pZ3JhdGVkW3R5cGUgYXMgQnVpbGRpbmdUeXBlXSBhcyBCdWlsZGluZ0luc3RhbmNlW10pLnB1c2goeyAuLi5pbnN0LCBwb3NpdGlvbjogeyB4LCB5IH0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvY2N1cGllZENlbGxzLmFkZChgJHt4fSwke3l9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZpbmFsQnVpbGRpbmdzID0gbWlncmF0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldEJ1aWxkaW5ncyhmaW5hbEJ1aWxkaW5ncyk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vZGVzVG9TZXQgPSAoc2F2ZWRTdGF0ZS5yZXNvdXJjZU5vZGVzIHx8IFtdKS5tYXAobiA9PiAoey4uLm4sIGFzc2lnbmVkVmlsbGFnZXJzOiBuLmFzc2lnbmVkVmlsbGFnZXJzIHx8IFtdfSkpO1xuICAgICAgICAgICAgaWYgKG5vZGVzVG9TZXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgIHNldFJlc291cmNlTm9kZXMoZ2VuZXJhdGVSZXNvdXJjZU5vZGVzKG9jY3VwaWVkQ2VsbHMpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgIHNldFJlc291cmNlTm9kZXMobm9kZXNUb1NldCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldEN1cnJlbnRBZ2Uoc2F2ZWRTdGF0ZS5jdXJyZW50QWdlKTtcbiAgICAgICAgICAgIHNldEdhbWVMb2coc2F2ZWRTdGF0ZS5nYW1lTG9nKTtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKChzYXZlZFN0YXRlLmFjdGl2ZVRhc2tzIHx8IFtdKS5tYXAodCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gTWlncmF0aW9uIGZvciBvbGQgc2F2ZSBmb3JtYXRcbiAgICAgICAgICAgICAgICBpZiAodC50eXBlID09PSAnYnVpbGQnICYmIHQucGF5bG9hZD8udmlsbGFnZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi50LCBwYXlsb2FkOiB7IC4uLnQucGF5bG9hZCwgdmlsbGFnZXJJZHM6IFt0LnBheWxvYWQudmlsbGFnZXJJZF0sIHZpbGxhZ2VySWQ6IHVuZGVmaW5lZCB9IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgc2V0Q29uc3RydWN0aW5nQnVpbGRpbmdzKChzYXZlZFN0YXRlLmNvbnN0cnVjdGluZ0J1aWxkaW5ncyB8fCBbXSkubWFwKGMgPT4ge1xuICAgICAgICAgICAgICAgICAvLyBNaWdyYXRpb24gZm9yIG9sZCBzYXZlIGZvcm1hdFxuICAgICAgICAgICAgICAgIGlmICgoYyBhcyBhbnkpLnZpbGxhZ2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uYywgdmlsbGFnZXJJZHM6IFsoYyBhcyBhbnkpLnZpbGxhZ2VySWRdLCB2aWxsYWdlcklkOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldEN1cnJlbnRFdmVudChudWxsKTtcbiAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKCdXZWxjb21lIGJhY2sgdG8geW91ciBzYWdhLicpO1xuICAgICAgICAgICAgc2V0R2FtZVN0YXRlKEdhbWVTdGF0dXMuUExBWUlORyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYENvdWxkIG5vdCBmaW5kIGEgc2F2ZWQgZ2FtZSBuYW1lZCBcIiR7c2F2ZU5hbWV9XCIuYCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXZlbnQgVHJpZ2dlciBUaW1lclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIC8vIEV2ZW50cyBzaG91bGQgbm90IHRyaWdnZXIgaWYgYSBtYWpvciB0YXNrIChidWlsZCwgdHJhaW4sIGFkdmFuY2UgYWdlKSBpcyBpbiBwcm9ncmVzcy5cbiAgICAgICAgLy8gR2F0aGVyaW5nIHJlc291cmNlcyBpcyBhIGJhY2tncm91bmQgdGFzayBhbmQgc2hvdWxkIG5vdCBibG9jayBldmVudHMuXG4gICAgICAgIGNvbnN0IG1ham9yVGFza0luUHJvZ3Jlc3MgPSBhY3RpdmVUYXNrcy5zb21lKHQgPT4gdC50eXBlICE9PSAnZ2F0aGVyJyk7XG5cbiAgICAgICAgaWYgKGdhbWVTdGF0ZSA9PT0gR2FtZVN0YXR1cy5QTEFZSU5HICYmICFjdXJyZW50RXZlbnQgJiYgIXBsYXllckFjdGlvbiAmJiAhbWFqb3JUYXNrSW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgc2NoZWR1bGVOZXh0RXZlbnQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudFRpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChldmVudFRpbWVyUmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudFRpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZXZlbnRUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbZ2FtZVN0YXRlLCBjdXJyZW50RXZlbnQsIHBsYXllckFjdGlvbiwgYWN0aXZlVGFza3MsIHNjaGVkdWxlTmV4dEV2ZW50XSk7XG5cbiAgICBjb25zdCBoYW5kbGVFdmVudENob2ljZSA9IChjaG9pY2U6IEdhbWVFdmVudENob2ljZSkgPT4ge1xuICAgICAgICBhZGRUb0xvZyhgRGVjaXNpb246IFwiJHtjaG9pY2UudGV4dH1cImAsICdldmVudCcpO1xuXG4gICAgICAgIC8vIDEuIENoZWNrIGFuZCBhcHBseSBjb3N0XG4gICAgICAgIGlmIChjaG9pY2UuY29zdCkge1xuICAgICAgICAgICAgY29uc3QgbWlzc2luZ1Jlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNob2ljZS5jb3N0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzS2V5ID0ga2V5IGFzIGtleW9mIFJlc291cmNlcztcbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VzW3Jlc0tleV0gPCAoY2hvaWNlLmNvc3RbcmVzS2V5XSB8fCAwKSkge1xuICAgICAgICAgICAgICAgICAgICBtaXNzaW5nUmVzLnB1c2gocmVzS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWlzc2luZ1Jlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKGBZb3UgbGFjayB0aGUgcmVxdWlyZWQgcmVzb3VyY2VzOiAke21pc3NpbmdSZXMuam9pbignLCAnKX0uYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmVnYXRpdmVDb3N0OiBSZXNvdXJjZURlbHRhcyA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY2hvaWNlLmNvc3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNLZXkgPSBrZXkgYXMga2V5b2YgUmVzb3VyY2VzO1xuICAgICAgICAgICAgICAgIG5lZ2F0aXZlQ29zdFtyZXNLZXldID0gLShjaG9pY2UuY29zdFtyZXNLZXldIHx8IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlUmVzb3VyY2VzKG5lZ2F0aXZlQ29zdCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDIuIERldGVybWluZSBzdWNjZXNzXG4gICAgICAgIGNvbnN0IGlzU3VjY2VzcyA9IGNob2ljZS5zdWNjZXNzQ2hhbmNlID09PSB1bmRlZmluZWQgfHwgTWF0aC5yYW5kb20oKSA8IGNob2ljZS5zdWNjZXNzQ2hhbmNlO1xuICAgICAgICBjb25zdCBlZmZlY3RzID0gaXNTdWNjZXNzID8gY2hvaWNlLnN1Y2Nlc3NFZmZlY3RzIDogY2hvaWNlLmZhaWx1cmVFZmZlY3RzO1xuXG4gICAgICAgIGlmICghZWZmZWN0cykgeyAvLyBIYW5kbGUgY2FzZXMgd2l0aCBubyBmYWlsdXJlIGVmZmVjdCBkZWZpbmVkXG4gICAgICAgICAgICBzZXRDdXJyZW50RXZlbnQobnVsbCk7XG4gICAgICAgICAgICBzY2hlZHVsZU5leHRFdmVudCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMy4gQ2FsY3VsYXRlIHJlc291cmNlIGNoYW5nZVxuICAgICAgICBsZXQgYW1vdW50ID0gMDtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZWZmZWN0cy5hbW91bnQpKSB7XG4gICAgICAgICAgICBjb25zdCBbbWluLCBtYXhdID0gZWZmZWN0cy5hbW91bnQ7XG4gICAgICAgICAgICBhbW91bnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYW1vdW50ID0gZWZmZWN0cy5hbW91bnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDQuIEFwcGx5IGVmZmVjdHNcbiAgICAgICAgaWYgKGVmZmVjdHMucmVzb3VyY2UgIT09ICdub25lJyAmJiBhbW91bnQgIT09IDApIHtcbiAgICAgICAgICAgIHVwZGF0ZVJlc291cmNlcyh7IFtlZmZlY3RzLnJlc291cmNlXTogYW1vdW50IH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyA1LiBMb2cgYW5kIHVwZGF0ZSBVSVxuICAgICAgICBhZGRUb0xvZyhlZmZlY3RzLmxvZywgZWZmZWN0cy5yZXNvdXJjZSAhPT0gJ25vbmUnID8gZWZmZWN0cy5yZXNvdXJjZSA6ICdzeXN0ZW0nKTtcbiAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoZWZmZWN0cy5sb2cpO1xuICAgICAgICBzZXRDdXJyZW50RXZlbnQobnVsbCk7XG4gICAgICAgIHNjaGVkdWxlTmV4dEV2ZW50KCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUluaXRpYXRlQnVpbGQgPSAodmlsbGFnZXJJZDogc3RyaW5nLCByZWN0OiBET01SZWN0KSA9PiB7XG4gICAgICAgIGlmIChpc1ZpbGxhZ2VyQnVzeSh2aWxsYWdlcklkKSkge1xuICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKFwiVGhpcyB2aWxsYWdlciBpcyBhbHJlYWR5IGJ1c3kuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldEJ1aWxkUGFuZWxTdGF0ZSh7IGlzT3BlbjogdHJ1ZSwgdmlsbGFnZXJJZCwgYW5jaG9yUmVjdDogcmVjdCB9KTtcbiAgICAgICAgc2V0VW5pdE1hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBoYW5kbGVTdGFydFBsYWNlbWVudCA9IChidWlsZGluZ0lkOiBCdWlsZGluZ1R5cGUpID0+IHtcbiAgICAgICAgY29uc3QgdmlsbGFnZXJJZCA9IGJ1aWxkUGFuZWxTdGF0ZS52aWxsYWdlcklkO1xuICAgICAgICBpZiAoIXZpbGxhZ2VySWQpIHJldHVybjtcblxuICAgICAgICBjb25zdCBidWlsZGluZ0luZm8gPSBCVUlMRElOR1NfSU5GTy5maW5kKGIgPT4gYi5pZCA9PT0gYnVpbGRpbmdJZCk7XG4gICAgICAgIGlmICghYnVpbGRpbmdJbmZvKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGJ1aWxkaW5nSW5mby5pc1VuaXF1ZSAmJiAoYnVpbGRpbmdzW2J1aWxkaW5nSW5mby5pZF0ubGVuZ3RoID4gMCB8fCBjb25zdHJ1Y3RpbmdCdWlsZGluZ3Muc29tZShiID0+IGIudHlwZSA9PT0gYnVpbGRpbmdJbmZvLmlkKSkpIHtcbiAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihgWW91IGNhbiBvbmx5IGJ1aWxkIG9uZSAke2J1aWxkaW5nSW5mby5uYW1lfS5gKTsgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb3N0ID0gYnVpbGRpbmdJbmZvLmNvc3Q7XG4gICAgICAgIGlmICghdW5saW1pdGVkUmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBjb25zdCBtaXNzaW5nOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXMgaW4gY29zdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc291cmNlS2V5ID0gcmVzIGFzIGtleW9mIFJlc291cmNlcztcbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VzW3Jlc291cmNlS2V5XSA8IChjb3N0W3Jlc291cmNlS2V5XSA/PyAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgbWlzc2luZy5wdXNoKGAkeyhjb3N0W3Jlc291cmNlS2V5XSA/PyAwKSAtIHJlc291cmNlc1tyZXNvdXJjZUtleV19ICR7cmVzb3VyY2VLZXl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYE5lZWQgJHttaXNzaW5nLmpvaW4oJyBhbmQgJyl9LmApOyByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0UGxheWVyQWN0aW9uKHsgbW9kZTogJ2J1aWxkJywgYnVpbGRpbmdUeXBlOiBidWlsZGluZ0lkLCB2aWxsYWdlcklkIH0pO1xuICAgICAgICBzZXRCdWlsZFBhbmVsU3RhdGUoeyBpc09wZW46IGZhbHNlLCB2aWxsYWdlcklkOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgU2VsZWN0IGEgbG9jYXRpb24gdG8gYnVpbGQgYSAke2J1aWxkaW5nSW5mby5uYW1lfS4gUmlnaHQtY2xpY2sgdG8gY2FuY2VsLmApO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDb25maXJtUGxhY2VtZW50ID0gKHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0pID0+IHtcbiAgICAgICAgaWYgKHBsYXllckFjdGlvbj8ubW9kZSAhPT0gJ2J1aWxkJykgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IGJ1aWxkaW5nVHlwZSwgdmlsbGFnZXJJZCB9ID0gcGxheWVyQWN0aW9uO1xuICAgICAgICBjb25zdCBidWlsZGluZ0luZm8gPSBCVUlMRElOR1NfSU5GTy5maW5kKGIgPT4gYi5pZCA9PT0gYnVpbGRpbmdUeXBlKTtcbiAgICAgICAgY29uc3QgYnVpbGRlciA9IHVuaXRzLnZpbGxhZ2Vycy5maW5kKHYgPT4gdi5pZCA9PT0gdmlsbGFnZXJJZCk7XG4gICAgICAgIGlmICghYnVpbGRpbmdJbmZvIHx8ICFidWlsZGVyKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBpZiAoIXVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgY29uc3QgY29zdCA9IGJ1aWxkaW5nSW5mby5jb3N0O1xuICAgICAgICAgICAgY29uc3QgbmVnYXRpdmVDb3N0OiBSZXNvdXJjZURlbHRhcyA9IHt9O1xuICAgICAgICAgICAgZm9yKGNvbnN0IHJlc291cmNlIGluIGNvc3QpIHtcbiAgICAgICAgICAgICAgICBuZWdhdGl2ZUNvc3RbcmVzb3VyY2UgYXMga2V5b2YgUmVzb3VyY2VzXSA9IC0oY29zdFtyZXNvdXJjZSBhcyBrZXlvZiBSZXNvdXJjZXNdIHx8IDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlUmVzb3VyY2VzKG5lZ2F0aXZlQ29zdCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ1aWxkVGltZSA9IGJ1aWxkaW5nSW5mby5idWlsZFRpbWUgKiAxMDAwO1xuICAgICAgICBjb25zdCB0YXNrUGF5bG9hZCA9IHsgYnVpbGRpbmdUeXBlLCB2aWxsYWdlcklkczogW3ZpbGxhZ2VySWRdLCBwb3NpdGlvbiB9O1xuXG4gICAgICAgIGlmICh1bmxpbWl0ZWRSZXNvdXJjZXMpIHtcbiAgICAgICAgICAgICBjb25zdCB0YXNrSWQgPSBgJHtEYXRlLm5vdygpfS1pbnN0YW50LWJ1aWxkYDtcbiAgICAgICAgICAgICBoYW5kbGVUYXNrQ29tcGxldGlvbih7IGlkOiB0YXNrSWQsIHR5cGU6ICdidWlsZCcsIHN0YXJ0VGltZTogMCwgZHVyYXRpb246IDAsIHBheWxvYWQ6IHsgLi4udGFza1BheWxvYWQsIHBvc2l0aW9uIH0gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrSWQgPSBgJHtEYXRlLm5vdygpfS1idWlsZC0ke2J1aWxkaW5nVHlwZX1gO1xuICAgICAgICAgICAgY29uc3QgbmV3Q29uc3RydWN0aW9uOiBDb25zdHJ1Y3RpbmdCdWlsZGluZyA9IHsgaWQ6IHRhc2tJZCwgdHlwZTogYnVpbGRpbmdUeXBlLCBwb3NpdGlvbiwgdmlsbGFnZXJJZHM6IFt2aWxsYWdlcklkXSB9O1xuICAgICAgICAgICAgc2V0Q29uc3RydWN0aW5nQnVpbGRpbmdzKHByZXYgPT4gWy4uLnByZXYsIG5ld0NvbnN0cnVjdGlvbl0pO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrOiBHYW1lVGFzayA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGFza0lkLCB0eXBlOiAnYnVpbGQnLCBzdGFydFRpbWU6IERhdGUubm93KCksIGR1cmF0aW9uOiBidWlsZFRpbWUsIHBheWxvYWQ6IHRhc2tQYXlsb2FkXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBbLi4ucHJldiwgbmV3VGFza10pO1xuICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYCR7YnVpbGRlci5uYW1lfSBoYXMgc3RhcnRlZCBjb25zdHJ1Y3RpbmcgYSAke2J1aWxkaW5nSW5mby5uYW1lfS5gKTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGAke2J1aWxkZXIubmFtZX0gYmVnYW4gY29uc3RydWN0aW9uIG9mIGEgbmV3ICR7YnVpbGRpbmdJbmZvLm5hbWV9LmAsIGJ1aWxkaW5nVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFBsYXllckFjdGlvbihudWxsKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQ2FuY2VsUGxheWVyQWN0aW9uID0gKCkgPT4ge1xuICAgICAgICBzZXRQbGF5ZXJBY3Rpb24obnVsbCk7XG4gICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKCdDb21tYW5kIGNhbmNlbGxlZC4nKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlRGVtb2xpc2hCdWlsZGluZyA9ICh0eXBlOiBCdWlsZGluZ1R5cGUsIGlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYoYWN0aXZlVGFza3Muc29tZSh0ID0+IHQucGF5bG9hZD8uYnVpbGRpbmdJZCA9PT0gaWQpKSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oXCJDYW5ub3QgZGVtb2xpc2ggYSBidWlsZGluZyB3aXRoIGFuIGFjdGl2ZSB0YXNrLlwiKTsgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nSW5mbyA9IEJVSUxESU5HU19JTkZPLmZpbmQoYiA9PiBiLmlkID09PSB0eXBlKTtcbiAgICAgICAgY29uc3QgYnVpbGRpbmdJbnN0YW5jZSA9IGJ1aWxkaW5nc1t0eXBlXS5maW5kKGIgPT4gYi5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAoIWJ1aWxkaW5nSW5mbyB8fCAhYnVpbGRpbmdJbnN0YW5jZSkgcmV0dXJuO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2hvdXNlcycgJiYgcG9wdWxhdGlvbi5jdXJyZW50ID4gKGJ1aWxkaW5ncy50b3duQ2VudGVyPy5sZW5ndGggPiAwID8gMjAgOiAwKSArIChidWlsZGluZ3MuaG91c2VzLmxlbmd0aCAtIDEpICogNSkge1xuICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihcIkNhbm5vdCBkZW1vbGlzaCB0aGlzIGhvdXNlLCB5b3VyIHBlb3BsZSB3b3VsZCBiZSBob21lbGVzcy5cIik7IHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWZ1bmQ6IFJlc291cmNlRGVsdGFzID0ge307XG4gICAgICAgIGxldCByZWZ1bmRNZXNzYWdlUGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcmVzIGluIGJ1aWxkaW5nSW5mby5jb3N0KSB7XG4gICAgICAgICAgICBjb25zdCByZXNvdXJjZUtleSA9IHJlcyBhcyBrZXlvZiBSZXNvdXJjZXM7XG4gICAgICAgICAgICBjb25zdCBjb3N0ID0gYnVpbGRpbmdJbmZvLmNvc3RbcmVzb3VyY2VLZXldIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBhbW91bnQgPSBNYXRoLmZsb29yKGNvc3QgKiAwLjUpO1xuICAgICAgICAgICAgaWYgKGFtb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICByZWZ1bmRbcmVzb3VyY2VLZXldID0gYW1vdW50O1xuICAgICAgICAgICAgICAgIHJlZnVuZE1lc3NhZ2VQYXJ0cy5wdXNoKGAke2Ftb3VudH0gJHtyZXNvdXJjZUtleX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVSZXNvdXJjZXMocmVmdW5kKTtcbiAgICAgICAgc2V0QnVpbGRpbmdzKHByZXYgPT4gKHsgLi4ucHJldiwgW3R5cGVdOiBwcmV2W3R5cGVdLmZpbHRlcihiID0+IGIuaWQgIT09IGlkKSB9KSk7XG4gICAgICAgIGFkZFRvTG9nKGAke2J1aWxkaW5nSW5zdGFuY2UubmFtZX0gKCR7YnVpbGRpbmdJbmZvLm5hbWV9KSB3YXMgZGVtb2xpc2hlZC5gLCB0eXBlKTtcbiAgICAgICAgaWYgKHJlZnVuZE1lc3NhZ2VQYXJ0cy5sZW5ndGggPiAwKSB7IGFkZE5vdGlmaWNhdGlvbihgU2FsdmFnZWQgJHtyZWZ1bmRNZXNzYWdlUGFydHMuam9pbignLCAnKX0uYCk7IH1cbiAgICAgICAgc2V0QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwoe2lzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVVwZGF0ZUJ1aWxkaW5nID0gKHR5cGU6IEJ1aWxkaW5nVHlwZSwgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHNldEJ1aWxkaW5ncyhwcmV2ID0+ICh7IC4uLnByZXYsIFt0eXBlXTogcHJldlt0eXBlXS5tYXAoYiA9PiBiLmlkID09PSBpZCA/IHsgLi4uYiwgbmFtZSB9IDogYikgfSkpO1xuICAgICAgICBhZGROb3RpZmljYXRpb24oXCJCdWlsZGluZyByZW5hbWVkLlwiKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlVHJhaW5WaWxsYWdlcnMgPSAoY291bnQ6IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAoYWN0aXZlVGFza3Muc29tZSh0ID0+IHQudHlwZSA9PT0gJ3RyYWluX3ZpbGxhZ2VyJykgfHwgY291bnQgPD0gMCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB2aWxsYWdlckNvc3QgPSA1MDtcbiAgICAgICAgY29uc3QgdG90YWxDb3N0ID0gdmlsbGFnZXJDb3N0ICogY291bnQ7XG4gICAgICAgIGlmIChwb3B1bGF0aW9uLmN1cnJlbnQgKyBjb3VudCA+IHBvcHVsYXRpb24uY2FwYWNpdHkpIHsgYWRkTm90aWZpY2F0aW9uKGBOZWVkIHNwYWNlIGZvciAke2NvdW50fSBtb3JlIHZpbGxhZ2Vycy5gKTsgcmV0dXJuOyB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b3duQ2VudGVyID0gYnVpbGRpbmdzLnRvd25DZW50ZXI/LlswXTtcbiAgICAgICAgaWYgKCF0b3duQ2VudGVyKSB7IGFkZE5vdGlmaWNhdGlvbihgTm8gVG93biBDZW50ZXIgdG8gdHJhaW4gdmlsbGFnZXJzLmApOyByZXR1cm47IH1cblxuICAgICAgICBpZiAoIXVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgaWYgKHJlc291cmNlcy5mb29kIDwgdG90YWxDb3N0KSB7IGFkZE5vdGlmaWNhdGlvbihgTmVlZCAke3RvdGFsQ29zdCAtIHJlc291cmNlcy5mb29kfSBtb3JlIEZvb2QuYCk7IHJldHVybjsgfVxuICAgICAgICAgICAgdXBkYXRlUmVzb3VyY2VzKHsgZm9vZDogLXRvdGFsQ29zdCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFpblRpbWUgPSAxMDAwMCAqIGNvdW50OyAvLyAxMHMgcGVyIHZpbGxhZ2VyXG4gICAgICAgIGlmKHVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgaGFuZGxlVGFza0NvbXBsZXRpb24oeyBpZDogJ2luc3RhbnQnLCB0eXBlOiAndHJhaW5fdmlsbGFnZXInLCBzdGFydFRpbWU6IDAsIGR1cmF0aW9uOiAwLCBwYXlsb2FkOiB7IGNvdW50IH0gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrSWQgPSBgJHtEYXRlLm5vdygpfS10cmFpbi12aWxsYWdlcmA7XG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrOiBHYW1lVGFzayA9IHsgaWQ6IHRhc2tJZCwgdHlwZTogJ3RyYWluX3ZpbGxhZ2VyJywgc3RhcnRUaW1lOiBEYXRlLm5vdygpLCBkdXJhdGlvbjogdHJhaW5UaW1lLCBwYXlsb2FkOiB7IGNvdW50LCBidWlsZGluZ0lkOiB0b3duQ2VudGVyLmlkIH0gfTtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4gWy4uLnByZXYsIG5ld1Rhc2tdKTtcbiAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKGBUcmFpbmluZyAke2NvdW50fSB2aWxsYWdlcihzKS4uLmApO1xuICAgICAgICAgICAgYWRkVG9Mb2coYEJlZ2FuIHRyYWluaW5nICR7Y291bnR9IG5ldyB2aWxsYWdlcihzKS5gLCAndmlsbGFnZXInKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBoYW5kbGVUcmFpblVuaXRzID0gKHVuaXRUeXBlOiBNaWxpdGFyeVVuaXRUeXBlLCBjb3VudDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHVuaXRJbmZvID0gVU5JVF9JTkZPLmZpbmQodSA9PiB1LmlkID09PSB1bml0VHlwZSk7XG4gICAgICAgIGlmICghdW5pdEluZm8gfHwgYWN0aXZlVGFza3Muc29tZSh0ID0+IHQucGF5bG9hZD8udW5pdFR5cGUgPT09IHVuaXRUeXBlKSB8fCBjb3VudCA8PSAwKSByZXR1cm47XG4gICAgICAgIGlmIChwb3B1bGF0aW9uLmN1cnJlbnQgKyBjb3VudCA+IHBvcHVsYXRpb24uY2FwYWNpdHkpIHsgYWRkTm90aWZpY2F0aW9uKGBOZWVkIHNwYWNlIGZvciAke2NvdW50fSBtb3JlIHVuaXRzLmApOyByZXR1cm47IH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRyYWluaW5nQnVpbGRpbmcgPSBidWlsZGluZ3NbdW5pdEluZm8ucmVxdWlyZWRCdWlsZGluZ10/LlswXTtcbiAgICAgICAgaWYgKCF0cmFpbmluZ0J1aWxkaW5nKSB7IGFkZE5vdGlmaWNhdGlvbihgTm8gJHt1bml0SW5mby5yZXF1aXJlZEJ1aWxkaW5nfSB0byB0cmFpbiB1bml0cy5gKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgaWYgKCF1bmxpbWl0ZWRSZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ29zdDogUmVzb3VyY2VEZWx0YXMgPSB7fTsgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzIGluIHVuaXRJbmZvLmNvc3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvdXJjZUtleSA9IHJlcyBhcyBrZXlvZiBSZXNvdXJjZXM7XG4gICAgICAgICAgICAgICAgY29uc3QgY29zdCA9ICh1bml0SW5mby5jb3N0W3Jlc291cmNlS2V5XSB8fCAwKSAqIGNvdW50O1xuICAgICAgICAgICAgICAgIHRvdGFsQ29zdFtyZXNvdXJjZUtleV0gPSAtY29zdDtcbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VzW3Jlc291cmNlS2V5XSA8IGNvc3QpIG1pc3NpbmcucHVzaChgJHtjb3N0IC0gcmVzb3VyY2VzW3Jlc291cmNlS2V5XX0gJHtyZXNvdXJjZUtleX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCA+IDApIHsgYWRkTm90aWZpY2F0aW9uKGBOZWVkICR7bWlzc2luZy5qb2luKCcgYW5kICcpfS5gKTsgcmV0dXJuOyB9XG4gICAgICAgICAgICB1cGRhdGVSZXNvdXJjZXModG90YWxDb3N0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFpblRpbWUgPSB1bml0SW5mby50cmFpblRpbWUgKiAxMDAwICogY291bnQ7XG4gICAgICAgIGlmKHVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgaGFuZGxlVGFza0NvbXBsZXRpb24oeyBpZDogJ2luc3RhbnQnLCB0eXBlOiAndHJhaW5fbWlsaXRhcnknLCBzdGFydFRpbWU6IDAsIGR1cmF0aW9uOiAwLCBwYXlsb2FkOiB7IHVuaXRUeXBlLCBjb3VudCB9IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGFza0lkID0gYCR7RGF0ZS5ub3coKX0tdHJhaW4tJHt1bml0VHlwZX1gO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFzazogR2FtZVRhc2sgPSB7IGlkOiB0YXNrSWQsIHR5cGU6ICd0cmFpbl9taWxpdGFyeScsIHN0YXJ0VGltZTogRGF0ZS5ub3coKSwgZHVyYXRpb246IHRyYWluVGltZSwgcGF5bG9hZDogeyB1bml0VHlwZSwgY291bnQsIGJ1aWxkaW5nSWQ6IHRyYWluaW5nQnVpbGRpbmcuaWQgfSB9O1xuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBbLi4ucHJldiwgbmV3VGFza10pO1xuICAgICAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYFRyYWluaW5nICR7Y291bnR9ICR7dW5pdEluZm8ubmFtZX0ocykuLi5gKTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGBCZWdhbiB0cmFpbmluZyAke2NvdW50fSBuZXcgJHt1bml0SW5mby5uYW1lfShzKS5gLCB1bml0VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwoeyBpc09wZW46IGZhbHNlLCB0eXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVEaXNtaXNzU3BlY2lmaWNVbml0ID0gKHR5cGU6ICd2aWxsYWdlcnMnIHwgJ21pbGl0YXJ5JywgaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3ZpbGxhZ2VycycgJiYgaXNWaWxsYWdlckJ1c3koaWQpKSB7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oXCJDYW5ub3QgZGlzbWlzcyBhIGJ1c3kgdmlsbGFnZXIuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVuaXQgPSB1bml0c1t0eXBlXS5maW5kKHUgPT4gdS5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAoIXVuaXQpIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGUgPT09ICd2aWxsYWdlcnMnICYmIHVuaXRzLnZpbGxhZ2Vycy5sZW5ndGggPD0gMSkgeyBhZGROb3RpZmljYXRpb24oXCJDYW5ub3QgZGlzbWlzcyB5b3VyIGxhc3QgdmlsbGFnZXIuXCIpOyByZXR1cm47IH1cbiAgICAgICAgc2V0VW5pdHMocHJldiA9PiAoeyAuLi5wcmV2LCBbdHlwZV06IHByZXZbdHlwZV0uZmlsdGVyKHUgPT4gdS5pZCAhPT0gaWQpIH0pKTtcbiAgICAgICAgY29uc3QgdW5pdFR5cGVOYW1lID0gdHlwZSA9PT0gJ3ZpbGxhZ2VycycgPyAndmlsbGFnZXInIDogKHVuaXQgYXMgTWlsaXRhcnlVbml0KS51bml0VHlwZTtcbiAgICAgICAgYWRkVG9Mb2coYCR7dW5pdC5uYW1lfSB0aGUgJHt1bml0VHlwZU5hbWV9IGhhcyBiZWVuIGRpc21pc3NlZC5gLCB0eXBlID09PSAndmlsbGFnZXJzJyA/ICd2aWxsYWdlcicgOiAodW5pdCBhcyBNaWxpdGFyeVVuaXQpLnVuaXRUeXBlKTtcbiAgICAgICAgYWRkTm90aWZpY2F0aW9uKGAke3VuaXQubmFtZX0gd2FzIGRpc21pc3NlZC5gKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlVXBkYXRlVW5pdCA9ICh0eXBlOiAndmlsbGFnZXJzJyB8ICdtaWxpdGFyeScsIGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgIHNldFVuaXRzKHByZXYgPT4gKHsgLi4ucHJldiwgW3R5cGVdOiBwcmV2W3R5cGVdLm1hcCh1ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodS5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFVuaXQgPSB7IC4uLnUsIG5hbWUgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdtaWxpdGFyeScgJiYgdGl0bGUgIT09IHVuZGVmaW5lZCkgeyAodXBkYXRlZFVuaXQgYXMgTWlsaXRhcnlVbml0KS50aXRsZSA9IHRpdGxlOyB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkVW5pdDtcbiAgICAgICAgICAgICAgICB9IHJldHVybiB1O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSkpO1xuICAgICAgICBhZGROb3RpZmljYXRpb24oXCJVbml0IHVwZGF0ZWQuXCIpO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVBc3NpZ25WaWxsYWdlcnNUb05vZGUgPSAobm9kZUlkOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgaWRsZVZpbGxhZ2VycyA9IHVuaXRzLnZpbGxhZ2Vycy5maWx0ZXIodiA9PiAhaXNWaWxsYWdlckJ1c3kodi5pZCkpO1xuICAgICAgICBpZiAoY291bnQgPD0gMCkgcmV0dXJuO1xuICAgICAgICBsZXQgY2FwcGVkQ291bnQgPSBNYXRoLm1pbihjb3VudCwgaWRsZVZpbGxhZ2Vycy5sZW5ndGgpO1xuICAgICAgICBpZiAoY2FwcGVkQ291bnQgPT09IDApIHsgYWRkTm90aWZpY2F0aW9uKFwiTm8gaWRsZSB2aWxsYWdlcnMgYXZhaWxhYmxlLlwiKTsgcmV0dXJuOyB9XG4gICAgXG4gICAgICAgIGNvbnN0IHZpbGxhZ2Vyc1RvQXNzaWduID0gaWRsZVZpbGxhZ2Vycy5zbGljZSgwLCBjYXBwZWRDb3VudCk7XG4gICAgICAgIGNvbnN0IHZpbGxhZ2VySWRzVG9Bc3NpZ24gPSB2aWxsYWdlcnNUb0Fzc2lnbi5tYXAodiA9PiB2LmlkKTtcbiAgICBcbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHJlc291cmNlTm9kZXMuZmluZChuID0+IG4uaWQgPT09IG5vZGVJZCk7XG4gICAgICAgIGlmICghdGFyZ2V0Tm9kZSkgcmV0dXJuO1xuICAgIFxuICAgICAgICBzZXRSZXNvdXJjZU5vZGVzKHByZXZOb2RlcyA9PiBcbiAgICAgICAgICAgIHByZXZOb2Rlcy5tYXAobiA9PiBuLmlkID09PSBub2RlSWQgPyB7Li4ubiwgYXNzaWduZWRWaWxsYWdlcnM6IFsuLi5uZXcgU2V0KFsuLi5uLmFzc2lnbmVkVmlsbGFnZXJzLCAuLi52aWxsYWdlcklkc1RvQXNzaWduXSldfSA6IG4pXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAodW5saW1pdGVkUmVzb3VyY2VzKSB7IC8vIEluc3RhbnQgZ2F0aGVyIGZvciB0ZXN0IG1vZGVcbiAgICAgICAgICAgIHVwZGF0ZVJlc291cmNlcyh7IFt0YXJnZXROb2RlLnR5cGVdOiB0YXJnZXROb2RlLmFtb3VudCB9KTtcbiAgICAgICAgICAgIGFkZFRvTG9nKGAke2NhcHBlZENvdW50fSB2aWxsYWdlcihzKSBpbnN0YW50bHkgZ2F0aGVyZWQgJHtNYXRoLmZsb29yKHRhcmdldE5vZGUuYW1vdW50KX0gJHt0YXJnZXROb2RlLnR5cGV9LmAsIHRhcmdldE5vZGUudHlwZSk7XG4gICAgICAgICAgICBzZXRSZXNvdXJjZU5vZGVzKHByZXYgPT4gcHJldi5maWx0ZXIobiA9PiBuLmlkICE9PSBub2RlSWQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVGFzayA9IGFjdGl2ZVRhc2tzLmZpbmQodCA9PiB0LnR5cGUgPT09ICdnYXRoZXInICYmIHQucGF5bG9hZD8ucmVzb3VyY2VOb2RlSWQgPT09IG5vZGVJZCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdUYXNrKSB7XG4gICAgICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBwcmV2Lm1hcCh0ID0+IHQuaWQgPT09IGV4aXN0aW5nVGFzay5pZCA/IHtcbiAgICAgICAgICAgICAgICAgICAgLi4udCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogeyAuLi50LnBheWxvYWQsIHZpbGxhZ2VySWRzOiBbLi4ubmV3IFNldChbLi4udC5wYXlsb2FkIS52aWxsYWdlcklkcyEsIC4uLnZpbGxhZ2VySWRzVG9Bc3NpZ25dKV0gfVxuICAgICAgICAgICAgICAgIH0gOiB0KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICBjb25zdCBuZXdUYXNrOiBHYW1lVGFzayA9IHsgaWQ6IGBnYXRoZXItJHtub2RlSWR9YCwgdHlwZTogJ2dhdGhlcicsIHN0YXJ0VGltZTogRGF0ZS5ub3coKSwgZHVyYXRpb246IDg2NDAwMDAwLCBwYXlsb2FkOiB7IHJlc291cmNlTm9kZUlkOiBub2RlSWQsIHZpbGxhZ2VySWRzOiB2aWxsYWdlcklkc1RvQXNzaWduIH19OyAvLyBEdXJhdGlvbiBpcyBhcmJpdHJhcnksIGxvb3AgaGFuZGxlcyBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4gWy4uLnByZXYsIG5ld1Rhc2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBhZGRUb0xvZyhgJHtjYXBwZWRDb3VudH0gdmlsbGFnZXIocykgYXNzaWduZWQgdG8gZ2F0aGVyICR7dGFyZ2V0Tm9kZS50eXBlfS5gLCB0YXJnZXROb2RlLnR5cGUpO1xuICAgICAgICBzZXRBY3Rpdml0eVN0YXR1cyhgJHtjYXBwZWRDb3VudH0gdmlsbGFnZXIocykgYXJlIG5vdyBnYXRoZXJpbmcgJHt0YXJnZXROb2RlLnR5cGV9LmApO1xuICAgICAgICBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZSh7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVSZWNhbGxWaWxsYWdlcnMgPSAodGFyZ2V0SWQ6IHN0cmluZywgY291bnQ6IG51bWJlciwgdHlwZTogJ3Jlc291cmNlJyB8ICdjb25zdHJ1Y3Rpb24nKSA9PiB7XG4gICAgICAgIGlmICh0eXBlID09PSAncmVzb3VyY2UnKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gcmVzb3VyY2VOb2Rlcy5maW5kKG4gPT4gbi5pZCA9PT0gdGFyZ2V0SWQpO1xuICAgICAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUuYXNzaWduZWRWaWxsYWdlcnMubGVuZ3RoIDwgY291bnQpIHJldHVybjtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHZpbGxhZ2Vyc1RvUmVjYWxsID0gbm9kZS5hc3NpZ25lZFZpbGxhZ2Vycy5zbGljZShub2RlLmFzc2lnbmVkVmlsbGFnZXJzLmxlbmd0aCAtIGNvdW50KTtcbiAgICAgICAgICAgIHNldFJlc291cmNlTm9kZXMocHJldiA9PiBwcmV2Lm1hcChuID0+IG4uaWQgPT09IHRhcmdldElkID8geyAuLi5uLCBhc3NpZ25lZFZpbGxhZ2Vyczogbi5hc3NpZ25lZFZpbGxhZ2Vycy5maWx0ZXIoaWQgPT4gIXZpbGxhZ2Vyc1RvUmVjYWxsLmluY2x1ZGVzKGlkKSkgfSA6IG4pKTtcbiAgICBcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tJbmRleCA9IHByZXYuZmluZEluZGV4KHQgPT4gdC50eXBlID09PSAnZ2F0aGVyJyAmJiB0LnBheWxvYWQ/LnJlc291cmNlTm9kZUlkID09PSB0YXJnZXRJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2tJbmRleCA9PT0gLTEpIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2sgPSBwcmV2W3Rhc2tJbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVmlsbGFnZXJzID0gdGFzay5wYXlsb2FkIS52aWxsYWdlcklkcyEuZmlsdGVyKGlkID0+ICF2aWxsYWdlcnNUb1JlY2FsbC5pbmNsdWRlcyhpZCkpO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdWaWxsYWdlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2LmZpbHRlcigoXywgaSkgPT4gaSAhPT0gdGFza0luZGV4KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldi5tYXAoKHQsIGkpID0+IGkgPT09IHRhc2tJbmRleCA/IHsgLi4udCwgcGF5bG9hZDogeyAuLi50LnBheWxvYWQsIHZpbGxhZ2VySWRzOiByZW1haW5pbmdWaWxsYWdlcnMgfSB9IDogdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhZGRUb0xvZyhgJHtjb3VudH0gdmlsbGFnZXIocykgcmVjYWxsZWQgZnJvbSBnYXRoZXJpbmcgJHtub2RlLnR5cGV9LmAsICd2aWxsYWdlcicpO1xuICAgICAgICB9IGVsc2UgeyAvLyBjb25zdHJ1Y3Rpb25cbiAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdGlvbiA9IGNvbnN0cnVjdGluZ0J1aWxkaW5ncy5maW5kKGMgPT4gYy5pZCA9PT0gdGFyZ2V0SWQpO1xuICAgICAgICAgICAgY29uc3QgdGFzayA9IGFjdGl2ZVRhc2tzLmZpbmQodCA9PiB0LmlkID09PSB0YXJnZXRJZCk7XG4gICAgICAgICAgICBpZiAoIWNvbnN0cnVjdGlvbiB8fCAhdGFzayB8fCBjb25zdHJ1Y3Rpb24udmlsbGFnZXJJZHMubGVuZ3RoIDwgY291bnQpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdmlsbGFnZXJzVG9SZWNhbGwgPSBjb25zdHJ1Y3Rpb24udmlsbGFnZXJJZHMuc2xpY2UoY29uc3RydWN0aW9uLnZpbGxhZ2VySWRzLmxlbmd0aCAtIGNvdW50KTtcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1ZpbGxhZ2VycyA9IGNvbnN0cnVjdGlvbi52aWxsYWdlcklkcy5maWx0ZXIoaWQgPT4gIXZpbGxhZ2Vyc1RvUmVjYWxsLmluY2x1ZGVzKGlkKSk7XG4gICAgXG4gICAgICAgICAgICBpZiAocmVtYWluaW5nVmlsbGFnZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihcIkNhbm5vdCByZWNhbGwgdGhlIGxhc3QgYnVpbGRlci4gVGhpcyB3b3VsZCBjYW5jZWwgdGhlIHByb2plY3QuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nSW5mbyA9IEJVSUxESU5HU19JTkZPLmZpbmQoYiA9PiBiLmlkID09PSBjb25zdHJ1Y3Rpb24udHlwZSkhO1xuICAgICAgICAgICAgY29uc3QgdG90YWxXb3JrID0gYnVpbGRpbmdJbmZvLmJ1aWxkVGltZSAqIDEwMDA7XG4gICAgICAgICAgICBjb25zdCBvbGRXb3JrZXJDb3VudCA9IGNvbnN0cnVjdGlvbi52aWxsYWdlcklkcy5sZW5ndGg7XG4gICAgXG4gICAgICAgICAgICBjb25zdCB0aW1lRWxhcHNlZCA9IERhdGUubm93KCkgLSB0YXNrLnN0YXJ0VGltZTtcbiAgICAgICAgICAgIGNvbnN0IHdvcmtEb25lID0gdGltZUVsYXBzZWQgKiBvbGRXb3JrZXJDb3VudDtcbiAgICAgICAgICAgIGNvbnN0IHdvcmtSZW1haW5pbmcgPSBNYXRoLm1heCgwLCB0b3RhbFdvcmsgLSB3b3JrRG9uZSk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBuZXdXb3JrZXJDb3VudCA9IHJlbWFpbmluZ1ZpbGxhZ2Vycy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBuZXdSZW1haW5pbmdEdXJhdGlvbiA9IHdvcmtSZW1haW5pbmcgLyBuZXdXb3JrZXJDb3VudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0Q29uc3RydWN0aW5nQnVpbGRpbmdzKHByZXYgPT4gcHJldi5tYXAoYyA9PiBjLmlkID09PSB0YXJnZXRJZCA/IHsgLi4uYywgdmlsbGFnZXJJZHM6IHJlbWFpbmluZ1ZpbGxhZ2VycyB9IDogYykpO1xuICAgICAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBwcmV2Lm1hcCh0ID0+IHQuaWQgPT09IHRhcmdldElkID8ge1xuICAgICAgICAgICAgICAgIC4uLnQsXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBuZXdSZW1haW5pbmdEdXJhdGlvbixcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiB7IC4uLnQucGF5bG9hZCwgdmlsbGFnZXJJZHM6IHJlbWFpbmluZ1ZpbGxhZ2VycyB9XG4gICAgICAgICAgICB9IDogdCkpO1xuICAgICAgICAgICAgYWRkVG9Mb2coYCR7Y291bnR9IHZpbGxhZ2VyKHMpIHJlY2FsbGVkIGZyb20gY29uc3RydWN0aW9uLiBXb3JrIHdpbGwgbm93IHByb2NlZWQgc2xvd2VyLmAsICd2aWxsYWdlcicpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHNldEFzc2lnbm1lbnRQYW5lbFN0YXRlKHsgaXNPcGVuOiBmYWxzZSwgdGFyZ2V0SWQ6IG51bGwsIHRhcmdldFR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUFzc2lnblZpbGxhZ2Vyc1RvQ29uc3RydWN0aW9uID0gKGNvbnN0cnVjdGlvbklkOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgaWRsZVZpbGxhZ2VycyA9IHVuaXRzLnZpbGxhZ2Vycy5maWx0ZXIodiA9PiAhaXNWaWxsYWdlckJ1c3kodi5pZCkpO1xuICAgICAgICBpZiAoY291bnQgPD0gMCkgcmV0dXJuO1xuICAgICAgICBsZXQgY2FwcGVkQ291bnQgPSBNYXRoLm1pbihjb3VudCwgaWRsZVZpbGxhZ2Vycy5sZW5ndGgpO1xuICAgICAgICBpZiAoY2FwcGVkQ291bnQgPT09IDApIHsgYWRkTm90aWZpY2F0aW9uKFwiTm8gaWRsZSB2aWxsYWdlcnMgYXZhaWxhYmxlIHRvIGFzc2lzdC5cIik7IHJldHVybjsgfVxuXG4gICAgICAgIGNvbnN0IHZpbGxhZ2Vyc1RvQXNzaWduID0gaWRsZVZpbGxhZ2Vycy5zbGljZSgwLCBjYXBwZWRDb3VudCkubWFwKHYgPT4gdi5pZCk7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBhY3RpdmVUYXNrcy5maW5kKHQgPT4gdC5pZCA9PT0gY29uc3RydWN0aW9uSWQpO1xuICAgICAgICBjb25zdCBjb25zdHJ1Y3Rpb24gPSBjb25zdHJ1Y3RpbmdCdWlsZGluZ3MuZmluZChjID0+IGMuaWQgPT09IGNvbnN0cnVjdGlvbklkKTtcblxuICAgICAgICBpZiAoIXRhc2sgfHwgIWNvbnN0cnVjdGlvbikgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGJ1aWxkaW5nSW5mbyA9IEJVSUxESU5HU19JTkZPLmZpbmQoYiA9PiBiLmlkID09PSBjb25zdHJ1Y3Rpb24udHlwZSk7XG4gICAgICAgIGlmICghYnVpbGRpbmdJbmZvKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgYmFzZUR1cmF0aW9uID0gYnVpbGRpbmdJbmZvLmJ1aWxkVGltZSAqIDEwMDA7XG4gICAgICAgIGNvbnN0IG9sZFdvcmtlckNvdW50ID0gdGFzay5wYXlsb2FkPy52aWxsYWdlcklkcz8ubGVuZ3RoIHx8IDE7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aW1lRWxhcHNlZCA9IERhdGUubm93KCkgLSB0YXNrLnN0YXJ0VGltZTtcbiAgICAgICAgY29uc3Qgd29ya0RvbmUgPSB0aW1lRWxhcHNlZCAqIG9sZFdvcmtlckNvdW50O1xuICAgICAgICBjb25zdCB0b3RhbFdvcmsgPSBiYXNlRHVyYXRpb247XG4gICAgICAgIGNvbnN0IHdvcmtSZW1haW5pbmcgPSBNYXRoLm1heCgwLCB0b3RhbFdvcmsgLSB3b3JrRG9uZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBuZXdXb3JrZXJDb3VudCA9IG9sZFdvcmtlckNvdW50ICsgY2FwcGVkQ291bnQ7XG4gICAgICAgIGNvbnN0IG5ld1JlbWFpbmluZ0R1cmF0aW9uID0gd29ya1JlbWFpbmluZyAvIG5ld1dvcmtlckNvdW50O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdXBkYXRlZFZpbGxhZ2VySWRzID0gWy4uLnRhc2sucGF5bG9hZCEudmlsbGFnZXJJZHMhLCAuLi52aWxsYWdlcnNUb0Fzc2lnbl07XG5cbiAgICAgICAgc2V0QWN0aXZlVGFza3MocHJldiA9PiBwcmV2Lm1hcCh0ID0+IHQuaWQgPT09IGNvbnN0cnVjdGlvbklkID8ge1xuICAgICAgICAgICAgLi4udCxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBuZXdSZW1haW5pbmdEdXJhdGlvbixcbiAgICAgICAgICAgIHBheWxvYWQ6IHsgLi4udC5wYXlsb2FkLCB2aWxsYWdlcklkczogdXBkYXRlZFZpbGxhZ2VySWRzIH1cbiAgICAgICAgfSA6IHQpKTtcblxuICAgICAgICBzZXRDb25zdHJ1Y3RpbmdCdWlsZGluZ3MocHJldiA9PiBwcmV2Lm1hcChjID0+IGMuaWQgPT09IGNvbnN0cnVjdGlvbklkID8ge1xuICAgICAgICAgICAgLi4uYyxcbiAgICAgICAgICAgIHZpbGxhZ2VySWRzOiB1cGRhdGVkVmlsbGFnZXJJZHNcbiAgICAgICAgfSA6IGMpKTtcblxuICAgICAgICBhZGRUb0xvZyhgJHtjYXBwZWRDb3VudH0gdmlsbGFnZXIocykgYXJlIG5vdyBhc3Npc3Rpbmcgd2l0aCB0aGUgJHtidWlsZGluZ0luZm8ubmFtZX0uYCwgYnVpbGRpbmdJbmZvLmlkKTtcbiAgICAgICAgc2V0QWN0aXZpdHlTdGF0dXMoYENvbnN0cnVjdGlvbiBvZiB0aGUgJHtidWlsZGluZ0luZm8ubmFtZX0gaXMgbm93IGZhc3Rlci5gKTtcbiAgICAgICAgc2V0QXNzaWdubWVudFBhbmVsU3RhdGUoeyBpc09wZW46IGZhbHNlLCB0YXJnZXRJZDogbnVsbCwgdGFyZ2V0VHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQXNzaWduVmlsbGFnZXJzID0gKHRhcmdldElkOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKGFzc2lnbm1lbnRQYW5lbFN0YXRlLnRhcmdldFR5cGUgPT09ICdyZXNvdXJjZScpIHtcbiAgICAgICAgICAgIGhhbmRsZUFzc2lnblZpbGxhZ2Vyc1RvTm9kZSh0YXJnZXRJZCwgY291bnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGFzc2lnbm1lbnRQYW5lbFN0YXRlLnRhcmdldFR5cGUgPT09ICdjb25zdHJ1Y3Rpb24nKSB7XG4gICAgICAgICAgICBoYW5kbGVBc3NpZ25WaWxsYWdlcnNUb0NvbnN0cnVjdGlvbih0YXJnZXRJZCwgY291bnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUFkdmFuY2VBZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChhY3RpdmVUYXNrcy5zb21lKHQgPT4gdC50eXBlID09PSAnYWR2YW5jZV9hZ2UnKSkgeyBhZGROb3RpZmljYXRpb24oXCJBZHZhbmNlbWVudCBhbHJlYWR5IGluIHByb2dyZXNzLlwiKTsgcmV0dXJuOyB9XG4gICAgICAgIGlmICghdW5saW1pdGVkUmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2VzLmZvb2QgPCA1MDAgfHwgcmVzb3VyY2VzLmdvbGQgPCAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtaXNzaW5nOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZXMuZm9vZCA8IDUwMCkgbWlzc2luZy5wdXNoKGAkezUwMCAtIHJlc291cmNlcy5mb29kfSBGb29kYCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlcy5nb2xkIDwgMjAwKSBtaXNzaW5nLnB1c2goYCR7MjAwIC0gcmVzb3VyY2VzLmdvbGR9IEdvbGRgKTtcbiAgICAgICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYFRvIGFkdmFuY2UsIHlvdSBuZWVkICR7bWlzc2luZy5qb2luKCcgYW5kICcpfS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVSZXNvdXJjZXMoeyBmb29kOiAtNTAwLCBnb2xkOiAtMjAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gNjAwMDA7XG4gICAgICAgIGlmKHVubGltaXRlZFJlc291cmNlcykge1xuICAgICAgICAgICAgaGFuZGxlVGFza0NvbXBsZXRpb24oeyBpZDogJ2luc3RhbnQnLCB0eXBlOiAnYWR2YW5jZV9hZ2UnLCBzdGFydFRpbWU6IDAsIGR1cmF0aW9uOiAwIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGFza0lkID0gYCR7RGF0ZS5ub3coKX0tYWR2YW5jZV9hZ2VgO1xuICAgICAgICAgICAgY29uc3QgbmV3VGFzazogR2FtZVRhc2sgPSB7IGlkOiB0YXNrSWQsIHR5cGU6ICdhZHZhbmNlX2FnZScsIHN0YXJ0VGltZTogRGF0ZS5ub3coKSwgZHVyYXRpb24gfTtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhc2tzKHByZXYgPT4gWy4uLnByZXYsIG5ld1Rhc2tdKTtcbiAgICAgICAgICAgIHNldEFjdGl2aXR5U3RhdHVzKGBZb3VyIHBlb3BsZSBiZWdpbiB0aGUgbG9uZyBqb3VybmV5IHRvIGEgbmV3IGFnZS5gKTtcbiAgICAgICAgICAgIHNldEJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsKHsgaXNPcGVuOiBmYWxzZSwgdHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY29uc3QgaGFuZGxlRXhpdEdhbWUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHNldEN1cnJlbnRTYXZlTmFtZShudWxsKTtcbiAgICAgICAgYXdhaXQgZmV0Y2hTYXZlcygpO1xuICAgICAgICBzZXRHYW1lU3RhdGUoR2FtZVN0YXR1cy5NRU5VKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlRGVsZXRlR2FtZSA9IGFzeW5jIChzYXZlTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGF3YWl0IGRlbGV0ZUdhbWVTdGF0ZShzYXZlTmFtZSk7XG4gICAgICAgIGF3YWl0IGZldGNoU2F2ZXMoKTtcbiAgICAgICAgYWRkTm90aWZpY2F0aW9uKGBEZWxldGVkIHNhZ2E6IFwiJHtzYXZlTmFtZX1cImApO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVUb2dnbGVVbmxpbWl0ZWRSZXNvdXJjZXMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld01vZGUgPSAhdW5saW1pdGVkUmVzb3VyY2VzO1xuICAgICAgICBzZXRVbmxpbWl0ZWRSZXNvdXJjZXMobmV3TW9kZSk7XG4gICAgICAgIGlmIChuZXdNb2RlKSB7XG4gICAgICAgICAgICBzZXRSZXNvdXJjZXMoeyBmb29kOiA5OTk5OSwgd29vZDogOTk5OTksIGdvbGQ6IDk5OTk5LCBzdG9uZTogOTk5OTkgfSk7XG4gICAgICAgICAgICBhZGROb3RpZmljYXRpb24oXCJUZXN0IE1vZGU6IE9OXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWRkTm90aWZpY2F0aW9uKFwiVGVzdCBNb2RlOiBPRkZcIik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgYnVpbGRpbmdDb3VudHMgPSBPYmplY3Qua2V5cyhidWlsZGluZ3MpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgICAgY29uc3QgYnVpbGRpbmdUeXBlID0ga2V5IGFzIEJ1aWxkaW5nVHlwZTtcbiAgICAgICAgYWNjW2J1aWxkaW5nVHlwZV0gPSBidWlsZGluZ3NbYnVpbGRpbmdUeXBlXS5sZW5ndGg7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30gYXMgUmVjb3JkPEJ1aWxkaW5nVHlwZSwgbnVtYmVyPik7XG4gICAgXG4gICAgY29uc3QgaWRsZVZpbGxhZ2VyQ291bnQgPSB1bml0cy52aWxsYWdlcnMuZmlsdGVyKHYgPT4gIWlzVmlsbGFnZXJCdXN5KHYuaWQpKS5sZW5ndGg7XG4gICAgXG4gICAgY29uc3QgYXNzaWdubWVudFRhcmdldCA9IGFzc2lnbm1lbnRQYW5lbFN0YXRlLnRhcmdldFR5cGUgPT09ICdyZXNvdXJjZSdcbiAgICAgICAgPyByZXNvdXJjZU5vZGVzLmZpbmQobiA9PiBuLmlkID09PSBhc3NpZ25tZW50UGFuZWxTdGF0ZS50YXJnZXRJZClcbiAgICAgICAgOiBjb25zdHJ1Y3RpbmdCdWlsZGluZ3MuZmluZChjID0+IGMuaWQgPT09IGFzc2lnbm1lbnRQYW5lbFN0YXRlLnRhcmdldElkKTtcblxuICAgIGNvbnN0IGNsb3NlQWxsUGFuZWxzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRVbml0TWFuYWdlbWVudFBhbmVsKHAgPT4gcC5pc09wZW4gPyB7IGlzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSA6IHApO1xuICAgICAgICBzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbChwID0+IHAuaXNPcGVuID8geyBpc09wZW46IGZhbHNlLCB0eXBlOiBudWxsLCBpbnN0YW5jZUlkOiB1bmRlZmluZWQsIGFuY2hvclJlY3Q6IG51bGwgfSA6IHApO1xuICAgICAgICBzZXRCdWlsZFBhbmVsU3RhdGUocCA9PiBwLmlzT3BlbiA/IHsgaXNPcGVuOiBmYWxzZSwgdmlsbGFnZXJJZDogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9IDogcCk7XG4gICAgICAgIHNldEFzc2lnbm1lbnRQYW5lbFN0YXRlKHAgPT4gcC5pc09wZW4gPyB7IGlzT3BlbjogZmFsc2UsIHRhcmdldElkOiBudWxsLCB0YXJnZXRUeXBlOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0gOiBwKTtcbiAgICAgICAgc2V0U2V0dGluZ3NQYW5lbFN0YXRlKHAgPT4gcC5pc09wZW4gPyB7IGlzT3BlbjogZmFsc2UsIGFuY2hvclJlY3Q6IG51bGwgfSA6IHApO1xuICAgICAgICBzZXRDaXZQYW5lbFN0YXRlKHAgPT4gcC5pc09wZW4gPyB7IGlzT3BlbjogZmFsc2UsIGFuY2hvclJlY3Q6IG51bGwgfSA6IHApO1xuICAgICAgICBzZXRBbGxCdWlsZGluZ3NQYW5lbChwID0+IHAuaXNPcGVuID8geyBpc09wZW46IGZhbHNlLCBhbmNob3JSZWN0OiBudWxsIH0gOiBwKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBoYW5kbGVPcGVuQnVpbGRpbmdQYW5lbCA9IHVzZUNhbGxiYWNrKCh0eXBlOiBCdWlsZGluZ1R5cGUsIGluc3RhbmNlSWQ6IHN0cmluZywgcmVjdDogRE9NUmVjdCkgPT4ge1xuICAgICAgICBjbG9zZUFsbFBhbmVscygpO1xuICAgICAgICBzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogdHJ1ZSwgdHlwZSwgaW5zdGFuY2VJZCwgYW5jaG9yUmVjdDogcmVjdCB9KTtcbiAgICB9LCBbY2xvc2VBbGxQYW5lbHNdKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNBbnlQYW5lbE9wZW4gPSB1bml0TWFuYWdlbWVudFBhbmVsLmlzT3BlbiB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwuaXNPcGVuIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZFBhbmVsU3RhdGUuaXNPcGVuIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50UGFuZWxTdGF0ZS5pc09wZW4gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzUGFuZWxTdGF0ZS5pc09wZW4gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l2UGFuZWxTdGF0ZS5pc09wZW4gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsQnVpbGRpbmdzUGFuZWwuaXNPcGVuO1xuXG4gICAgICAgICAgICBpZiAoIWlzQW55UGFuZWxPcGVuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgRWxlbWVudDtcblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuc2NpLWZpLXBhbmVsLXBvcHVwJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNsb3NlQWxsUGFuZWxzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgICAgIH07XG4gICAgfSwgW1xuICAgICAgICB1bml0TWFuYWdlbWVudFBhbmVsLmlzT3BlbiwgXG4gICAgICAgIGJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsLmlzT3BlbixcbiAgICAgICAgYnVpbGRQYW5lbFN0YXRlLmlzT3BlbixcbiAgICAgICAgYXNzaWdubWVudFBhbmVsU3RhdGUuaXNPcGVuLFxuICAgICAgICBzZXR0aW5nc1BhbmVsU3RhdGUuaXNPcGVuLFxuICAgICAgICBjaXZQYW5lbFN0YXRlLmlzT3BlbixcbiAgICAgICAgYWxsQnVpbGRpbmdzUGFuZWwuaXNPcGVuLFxuICAgICAgICBjbG9zZUFsbFBhbmVsc1xuICAgIF0pO1xuXG4gICAgY29uc3QgcmVuZGVyQ29udGVudCA9ICgpID0+IHtcbiAgICAgICAgc3dpdGNoIChnYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgR2FtZVN0YXR1cy5NRU5VOlxuICAgICAgICAgICAgICAgIHJldHVybiA8U3RhcnRTY3JlZW4gb25OZXdHYW1lPXtoYW5kbGVTdGFydE5ld0dhbWV9IG9uUmVzdW1lR2FtZT17aGFuZGxlUmVzdW1lR2FtZX0gc2F2ZWRHYW1lcz17YWxsU2F2ZXN9IG9uRGVsZXRlR2FtZT17aGFuZGxlRGVsZXRlR2FtZX0gLz47XG4gICAgICAgICAgICBjYXNlIEdhbWVTdGF0dXMuTE9BRElORzpcbiAgICAgICAgICAgICAgICByZXR1cm4gPExvYWRpbmdTY3JlZW4gLz47XG4gICAgICAgICAgICBjYXNlIEdhbWVTdGF0dXMuUExBWUlORzpcbiAgICAgICAgICAgICAgICBpZiAoIWNpdmlsaXphdGlvbikgcmV0dXJuIDxMb2FkaW5nU2NyZWVuIC8+O1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8R2FtZVVJXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l2aWxpemF0aW9uPXtjaXZpbGl6YXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzPXtyZXNvdXJjZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdHM9e3VuaXRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5ncz17YnVpbGRpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVsYXRpb249e3BvcHVsYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFnZT17Y3VycmVudEFnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lTG9nPXtnYW1lTG9nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFdmVudD17Y3VycmVudEV2ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXZlbnRDaG9pY2U9e2hhbmRsZUV2ZW50Q2hvaWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlRGVsdGFzPXtyZXNvdXJjZURlbHRhc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eVN0YXR1cz17YWN0aXZpdHlTdGF0dXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdExpc3Q9e1VOSVRfSU5GT31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ0xpc3Q9e0JVSUxESU5HU19JTkZPfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlblVuaXRQYW5lbD17KHR5cGUsIHJlY3QpID0+IHsgY2xvc2VBbGxQYW5lbHMoKTsgc2V0VW5pdE1hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogdHJ1ZSwgdHlwZSwgYW5jaG9yUmVjdDogcmVjdCB9KTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5CdWlsZGluZ1BhbmVsPXtoYW5kbGVPcGVuQnVpbGRpbmdQYW5lbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5BbGxCdWlsZGluZ3NQYW5lbD17KHJlY3QpID0+IHsgY2xvc2VBbGxQYW5lbHMoKTsgc2V0QWxsQnVpbGRpbmdzUGFuZWwoeyBpc09wZW46IHRydWUsIGFuY2hvclJlY3Q6IHJlY3QgfSk7IH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyQWN0aW9uPXtwbGF5ZXJBY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtUGxhY2VtZW50PXtoYW5kbGVDb25maXJtUGxhY2VtZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsUGxheWVyQWN0aW9uPXtoYW5kbGVDYW5jZWxQbGF5ZXJBY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25CdWlsZGluZ0NsaWNrPXsoYnVpbGRpbmcsIHJlY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VBbGxQYW5lbHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IE9iamVjdC5rZXlzKGJ1aWxkaW5ncykuZmluZChrZXkgPT4gYnVpbGRpbmdzW2tleSBhcyBCdWlsZGluZ1R5cGVdLnNvbWUoYiA9PiBiLmlkID09PSBidWlsZGluZy5pZCkpIGFzIEJ1aWxkaW5nVHlwZSB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZSkgc2V0QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWwoeyBpc09wZW46IHRydWUsIHR5cGUsIGluc3RhbmNlSWQ6IGJ1aWxkaW5nLmlkLCBhbmNob3JSZWN0OiByZWN0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwRGltZW5zaW9ucz17TUFQX0RJTUVOU0lPTlN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0aW5nQnVpbGRpbmdzPXtjb25zdHJ1Y3RpbmdCdWlsZGluZ3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFza3M9e2FjdGl2ZVRhc2tzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXhpdEdhbWU9e2hhbmRsZUV4aXRHYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlblNldHRpbmdzUGFuZWw9eyhyZWN0KSA9PiB7IGNsb3NlQWxsUGFuZWxzKCk7IHNldFNldHRpbmdzUGFuZWxTdGF0ZSh7IGlzT3BlbjogdHJ1ZSwgYW5jaG9yUmVjdDogcmVjdCB9KTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5DaXZQYW5lbD17KHJlY3QpID0+IHsgY2xvc2VBbGxQYW5lbHMoKTsgc2V0Q2l2UGFuZWxTdGF0ZSh7IGlzT3BlbjogdHJ1ZSwgYW5jaG9yUmVjdDogcmVjdCB9KTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZU5vZGVzPXtyZXNvdXJjZU5vZGVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlbkFzc2lnbm1lbnRQYW5lbD17KG5vZGVJZCwgcmVjdCkgPT4geyBjbG9zZUFsbFBhbmVscygpOyBzZXRBc3NpZ25tZW50UGFuZWxTdGF0ZSh7IGlzT3BlbjogdHJ1ZSwgdGFyZ2V0SWQ6IG5vZGVJZCwgdGFyZ2V0VHlwZTogJ3Jlc291cmNlJywgYW5jaG9yUmVjdDogcmVjdCB9KTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9wZW5Db25zdHJ1Y3Rpb25QYW5lbD17KGNvbnN0cnVjdGlvbklkLCByZWN0KSA9PiB7IGNsb3NlQWxsUGFuZWxzKCk7IHNldEFzc2lnbm1lbnRQYW5lbFN0YXRlKHsgaXNPcGVuOiB0cnVlLCB0YXJnZXRJZDogY29uc3RydWN0aW9uSWQsIHRhcmdldFR5cGU6ICdjb25zdHJ1Y3Rpb24nLCBhbmNob3JSZWN0OiByZWN0IH0pOyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhdGhlckluZm89e0dBVEhFUl9JTkZPfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdWlsZFBhbmVsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3Blbj17YnVpbGRQYW5lbFN0YXRlLmlzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRCdWlsZFBhbmVsU3RhdGUoeyBpc09wZW46IGZhbHNlLCB2aWxsYWdlcklkOiBudWxsLCBhbmNob3JSZWN0OiBudWxsIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnRQbGFjZW1lbnQ9e2hhbmRsZVN0YXJ0UGxhY2VtZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcz17cmVzb3VyY2VzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nQ291bnRzPXtidWlsZGluZ0NvdW50c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ0xpc3Q9e0JVSUxESU5HU19JTkZPfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclJlY3Q9e2J1aWxkUGFuZWxTdGF0ZS5hbmNob3JSZWN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsT3BhY2l0eT17cGFuZWxPcGFjaXR5fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxVbml0TWFuYWdlbWVudFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXt1bml0TWFuYWdlbWVudFBhbmVsLmlzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRVbml0TWFuYWdlbWVudFBhbmVsKHsgaXNPcGVuOiBmYWxzZSwgdHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXt1bml0TWFuYWdlbWVudFBhbmVsLnR5cGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdHM9e3VuaXRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlVW5pdD17aGFuZGxlVXBkYXRlVW5pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRpc21pc3NVbml0PXtoYW5kbGVEaXNtaXNzU3BlY2lmaWNVbml0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uSW5pdGlhdGVCdWlsZD17KHZpbGxhZ2VySWQsIHJlY3QpID0+IHsgY2xvc2VBbGxQYW5lbHMoKTsgaGFuZGxlSW5pdGlhdGVCdWlsZCh2aWxsYWdlcklkLCByZWN0KTsgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRWaWxsYWdlclRhc2tEZXRhaWxzPXtnZXRWaWxsYWdlclRhc2tEZXRhaWxzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclJlY3Q9e3VuaXRNYW5hZ2VtZW50UGFuZWwuYW5jaG9yUmVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5lbE9wYWNpdHk9e3BhbmVsT3BhY2l0eX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnVpbGRpbmdNYW5hZ2VtZW50UGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09wZW49e2J1aWxkaW5nTWFuYWdlbWVudFBhbmVsLmlzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRCdWlsZGluZ01hbmFnZW1lbnRQYW5lbCh7IGlzT3BlbjogZmFsc2UsIHR5cGU6IG51bGwsIGFuY2hvclJlY3Q6IG51bGwgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxTdGF0ZT17YnVpbGRpbmdNYW5hZ2VtZW50UGFuZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdzPXtidWlsZGluZ3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdMaXN0PXtCVUlMRElOR1NfSU5GT31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZUJ1aWxkaW5nPXtoYW5kbGVVcGRhdGVCdWlsZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRlbW9saXNoQnVpbGRpbmc9e2hhbmRsZURlbW9saXNoQnVpbGRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UcmFpblVuaXRzPXtoYW5kbGVUcmFpblVuaXRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhaW5WaWxsYWdlcnM9e2hhbmRsZVRyYWluVmlsbGFnZXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcz17cmVzb3VyY2VzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVsYXRpb249e3BvcHVsYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdExpc3Q9e1VOSVRfSU5GT31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkFkdmFuY2VBZ2U9e2hhbmRsZUFkdmFuY2VBZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFza3M9e2FjdGl2ZVRhc2tzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclJlY3Q9e2J1aWxkaW5nTWFuYWdlbWVudFBhbmVsLmFuY2hvclJlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxPcGFjaXR5PXtwYW5lbE9wYWNpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlc291cmNlQXNzaWdubWVudFBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXthc3NpZ25tZW50UGFuZWxTdGF0ZS5pc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0QXNzaWdubWVudFBhbmVsU3RhdGUoeyBpc09wZW46IGZhbHNlLCB0YXJnZXRJZDogbnVsbCwgdGFyZ2V0VHlwZTogbnVsbCwgYW5jaG9yUmVjdDogbnVsbCB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50VGFyZ2V0PXthc3NpZ25tZW50VGFyZ2V0IHx8IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRsZVZpbGxhZ2VyQ291bnQ9e2lkbGVWaWxsYWdlckNvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQXNzaWduVmlsbGFnZXJzPXtoYW5kbGVBc3NpZ25WaWxsYWdlcnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZWNhbGxWaWxsYWdlcnM9e2hhbmRsZVJlY2FsbFZpbGxhZ2Vyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYXRoZXJJbmZvPXtHQVRIRVJfSU5GT31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ0xpc3Q9e0JVSUxESU5HU19JTkZPfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclJlY3Q9e2Fzc2lnbm1lbnRQYW5lbFN0YXRlLmFuY2hvclJlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxPcGFjaXR5PXtwYW5lbE9wYWNpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNldHRpbmdzUGFuZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09wZW49e3NldHRpbmdzUGFuZWxTdGF0ZS5pc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2V0dGluZ3NQYW5lbFN0YXRlKHsgaXNPcGVuOiBmYWxzZSwgYW5jaG9yUmVjdDogbnVsbCB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JSZWN0PXtzZXR0aW5nc1BhbmVsU3RhdGUuYW5jaG9yUmVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5PXtwYW5lbE9wYWNpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGFjaXR5Q2hhbmdlPXtzZXRQYW5lbE9wYWNpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENpdmlsaXphdGlvblBhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXtjaXZQYW5lbFN0YXRlLmlzT3Blbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRDaXZQYW5lbFN0YXRlKHsgaXNPcGVuOiBmYWxzZSwgYW5jaG9yUmVjdDogbnVsbCB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXZpbGl6YXRpb249e2NpdmlsaXphdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JSZWN0PXtjaXZQYW5lbFN0YXRlLmFuY2hvclJlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxPcGFjaXR5PXtwYW5lbE9wYWNpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEFsbEJ1aWxkaW5nc1BhbmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXthbGxCdWlsZGluZ3NQYW5lbC5pc09wZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0QWxsQnVpbGRpbmdzUGFuZWwoeyBpc09wZW46IGZhbHNlLCBhbmNob3JSZWN0OiBudWxsIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkaW5nTGlzdD17QlVJTERJTkdTX0lORk99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdDb3VudHM9e2J1aWxkaW5nQ291bnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdGluZ0J1aWxkaW5ncz17Y29uc3RydWN0aW5nQnVpbGRpbmdzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlbkJ1aWxkaW5nUGFuZWw9e2hhbmRsZU9wZW5CdWlsZGluZ1BhbmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclJlY3Q9e2FsbEJ1aWxkaW5nc1BhbmVsLmFuY2hvclJlY3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxPcGFjaXR5PXtwYW5lbE9wYWNpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gPFN0YXJ0U2NyZWVuIG9uTmV3R2FtZT17aGFuZGxlU3RhcnROZXdHYW1lfSBvblJlc3VtZUdhbWU9e2hhbmRsZVJlc3VtZUdhbWV9IHNhdmVkR2FtZXM9e2FsbFNhdmVzfSBvbkRlbGV0ZUdhbWU9e2hhbmRsZURlbGV0ZUdhbWV9IC8+O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLXN0b25lLWRhcmsgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCI+XG4gICAgICAgICAgICB7Z2FtZVN0YXRlID09PSBHYW1lU3RhdHVzLlBMQVlJTkcgJiYgKFxuICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZVVubGltaXRlZFJlc291cmNlc31cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgbGVmdC00IHotWzEwMV0gYmctYnJhbmQtZ29sZCB0ZXh0LXN0b25lLWRhcmsgZm9udC1ib2xkIHB5LTEgcHgtMyByb3VuZGVkLWZ1bGwgdGV4dC14cyBzaGFkb3ctbGcgaG92ZXI6c2NhbGUtMTA1IHRyYW5zaXRpb24tdHJhbnNmb3JtXCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIlRvZ2dsZSB1bmxpbWl0ZWQgcmVzb3VyY2VzIHRlc3QgbW9kZVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICBUZXN0IE1vZGU6IHt1bmxpbWl0ZWRSZXNvdXJjZXMgPyAnT04nIDogJ09GRid9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPE5vdGlmaWNhdGlvbk1hbmFnZXIgbm90aWZpY2F0aW9ucz17bm90aWZpY2F0aW9uc30gb25SZW1vdmVOb3RpZmljYXRpb249e3JlbW92ZU5vdGlmaWNhdGlvbn0gLz5cbiAgICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy03eGwgbXgtYXV0b1wiPlxuICAgICAgICAgICAgICAgIHtyZW5kZXJDb250ZW50KCl9XG4gICAgICAgICAgICA8L21haW4+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lUGFnZTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJHYW1lU3RhdHVzIiwiZ2V0UHJlZGVmaW5lZENpdmlsaXphdGlvbiIsImdldFByZWRlZmluZWRHYW1lRXZlbnQiLCJnZXRQcmVkZWZpbmVkQWdlIiwic2F2ZUdhbWVTdGF0ZSIsImxvYWRHYW1lU3RhdGUiLCJnZXRBbGxTYXZlTmFtZXMiLCJkZWxldGVHYW1lU3RhdGUiLCJnZXRSYW5kb21OYW1lcyIsIkdhbWVVSSIsIlN0YXJ0U2NyZWVuIiwiTG9hZGluZ1NjcmVlbiIsIkJ1aWxkUGFuZWwiLCJOb3RpZmljYXRpb25NYW5hZ2VyIiwiVW5pdE1hbmFnZW1lbnRQYW5lbCIsIkJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsIiwiUmVzb3VyY2VBc3NpZ25tZW50UGFuZWwiLCJTZXR0aW5nc1BhbmVsIiwiQ2l2aWxpemF0aW9uUGFuZWwiLCJBbGxCdWlsZGluZ3NQYW5lbCIsIkJVSUxESU5HU19JTkZPIiwiaWQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJjb3N0Iiwid29vZCIsImlzVW5pcXVlIiwiYnVpbGRUaW1lIiwic3RvbmUiLCJnb2xkIiwiVU5JVF9JTkZPIiwiZm9vZCIsInJlcXVpcmVkQnVpbGRpbmciLCJ0cmFpblRpbWUiLCJHQVRIRVJfSU5GTyIsInJhdGUiLCJpbml0aWFsQnVpbGRpbmdzU3RhdGUiLCJob3VzZXMiLCJiYXJyYWNrcyIsImFyY2hlcnlSYW5nZSIsInN0YWJsZSIsInNpZWdlV29ya3Nob3AiLCJibGFja3NtaXRoIiwid2F0Y2hUb3dlciIsInRvd25DZW50ZXIiLCJNQVBfRElNRU5TSU9OUyIsIndpZHRoIiwiaGVpZ2h0IiwiR2FtZVBhZ2UiLCJidWlsZGluZ3MiLCJnYW1lU3RhdGUiLCJzZXRHYW1lU3RhdGUiLCJNRU5VIiwiY2l2aWxpemF0aW9uIiwic2V0Q2l2aWxpemF0aW9uIiwicmVzb3VyY2VzIiwic2V0UmVzb3VyY2VzIiwidW5pdHMiLCJzZXRVbml0cyIsInZpbGxhZ2VycyIsIm1pbGl0YXJ5Iiwic2V0QnVpbGRpbmdzIiwiY3VycmVudEFnZSIsInNldEN1cnJlbnRBZ2UiLCJnYW1lTG9nIiwic2V0R2FtZUxvZyIsImN1cnJlbnRFdmVudCIsInNldEN1cnJlbnRFdmVudCIsInJlc291cmNlRGVsdGFzIiwic2V0UmVzb3VyY2VEZWx0YXMiLCJhY3Rpdml0eVN0YXR1cyIsInNldEFjdGl2aXR5U3RhdHVzIiwibm90aWZpY2F0aW9ucyIsInNldE5vdGlmaWNhdGlvbnMiLCJ1bmxpbWl0ZWRSZXNvdXJjZXMiLCJzZXRVbmxpbWl0ZWRSZXNvdXJjZXMiLCJhbGxTYXZlcyIsInNldEFsbFNhdmVzIiwiY3VycmVudFNhdmVOYW1lIiwic2V0Q3VycmVudFNhdmVOYW1lIiwicGxheWVyQWN0aW9uIiwic2V0UGxheWVyQWN0aW9uIiwiYWN0aXZlVGFza3MiLCJzZXRBY3RpdmVUYXNrcyIsImNvbnN0cnVjdGluZ0J1aWxkaW5ncyIsInNldENvbnN0cnVjdGluZ0J1aWxkaW5ncyIsInJlc291cmNlTm9kZXMiLCJzZXRSZXNvdXJjZU5vZGVzIiwicGFuZWxPcGFjaXR5Iiwic2V0UGFuZWxPcGFjaXR5IiwiYnVpbGRQYW5lbFN0YXRlIiwic2V0QnVpbGRQYW5lbFN0YXRlIiwiaXNPcGVuIiwidmlsbGFnZXJJZCIsImFuY2hvclJlY3QiLCJ1bml0TWFuYWdlbWVudFBhbmVsIiwic2V0VW5pdE1hbmFnZW1lbnRQYW5lbCIsInR5cGUiLCJidWlsZGluZ01hbmFnZW1lbnRQYW5lbCIsInNldEJ1aWxkaW5nTWFuYWdlbWVudFBhbmVsIiwiYWxsQnVpbGRpbmdzUGFuZWwiLCJzZXRBbGxCdWlsZGluZ3NQYW5lbCIsImFzc2lnbm1lbnRQYW5lbFN0YXRlIiwic2V0QXNzaWdubWVudFBhbmVsU3RhdGUiLCJ0YXJnZXRJZCIsInRhcmdldFR5cGUiLCJzZXR0aW5nc1BhbmVsU3RhdGUiLCJzZXRTZXR0aW5nc1BhbmVsU3RhdGUiLCJjaXZQYW5lbFN0YXRlIiwic2V0Q2l2UGFuZWxTdGF0ZSIsImRlbHRhVGltZW91dFJlZiIsImV2ZW50VGltZXJSZWYiLCJwb3B1bGF0aW9uIiwiY3VycmVudCIsImxlbmd0aCIsImNhcGFjaXR5IiwiZmV0Y2hTYXZlcyIsIm5hbWVzIiwiUExBWUlORyIsImZ1bGxTdGF0ZSIsImFkZE5vdGlmaWNhdGlvbiIsIm1lc3NhZ2UiLCJNYXRoIiwiRGF0ZSIsIm5vdyIsInJhbmRvbSIsInByZXYiLCJyZW1vdmVOb3RpZmljYXRpb24iLCJmaWx0ZXIiLCJuIiwiYWRkVG9Mb2ciLCJpY29uIiwic2xpY2UiLCJ1cGRhdGVSZXNvdXJjZXMiLCJkZWx0YXMiLCJuZXdSZXNvdXJjZXMiLCJrZXkiLCJyZXNvdXJjZUtleSIsIm1heCIsIndpbmRvdyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJuZXdEZWx0YXMiLCJoYW5kbGVUYXNrQ29tcGxldGlvbiIsInRhc2siLCJidWlsZGluZ1R5cGUiLCJ2aWxsYWdlcklkcyIsInBvc2l0aW9uIiwicGF5bG9hZCIsImJ1aWxkaW5nSW5mbyIsImZpbmQiLCJiIiwibmV3QnVpbGRpbmciLCJwIiwiY291bnQiLCJuZXdWaWxsYWdlck5hbWVzIiwibmV3VmlsbGFnZXJzIiwibWFwIiwidW5pdFR5cGUiLCJ1bml0SW5mbyIsInUiLCJuZXdVbml0TmFtZXMiLCJuZXdVbml0cyIsInRpdGxlIiwiYWdlUmVzdWx0IiwibmV4dEFnZU5hbWUiLCJnYW1lTG9vcCIsInNldEludGVydmFsIiwiY29tcGxldGVkVGFza3MiLCJyZXNvdXJjZURlbHRhc1RoaXNUaWNrIiwic3RpbGxBY3RpdmVUYXNrcyIsInN0YXJ0VGltZSIsImR1cmF0aW9uIiwicHVzaCIsIm5vZGUiLCJyZXNvdXJjZU5vZGVJZCIsInZpbGxhZ2VyQ291bnQiLCJnYXRoZXJSYXRlUGVyVmlsbGFnZXJQZXJTZWNvbmQiLCJhbW91bnRHYXRoZXJlZFRoaXNUaWNrIiwiQm9vbGVhbiIsIk9iamVjdCIsImtleXMiLCJwcmV2UmVzIiwicmVzS2V5IiwicHJldk5vZGVzIiwibm9kZXNXZXJlRGVwbGV0ZWQiLCJuZXdOb2RlcyIsImFtb3VudFRvRGVjcmVtZW50IiwibmV3QW1vdW50IiwiYW1vdW50IiwiYXNzaWduZWRWaWxsYWdlcnMiLCJmbG9vciIsImdhdGhlclRhc2siLCJ0IiwiZmluYWxBY3RpdmVUYXNrcyIsInNvbWUiLCJjdCIsImZvckVhY2giLCJjbGVhckludGVydmFsIiwiaGFuZGxlTmV3RXZlbnQiLCJub25HYXRoZXJpbmdUYXNrcyIsImV2ZW50Iiwic2NoZWR1bGVOZXh0RXZlbnQiLCJuZXh0RXZlbnRUaW1lIiwiZ2VuZXJhdGVSZXNvdXJjZU5vZGVzIiwiZXhpc3RpbmdQb3NpdGlvbnMiLCJub2RlcyIsInR5cGVzIiwibnVtTm9kZXMiLCJpIiwicG9zIiwieCIsInkiLCJoYXMiLCJhZGQiLCJoYW5kbGVTdGFydE5ld0dhbWUiLCJzYXZlTmFtZSIsImluY2x1ZGVzIiwiTE9BRElORyIsImNpdiIsImluaXRpYWxWaWxsYWdlck5hbWVzIiwiaW5pdGlhbFZpbGxhZ2VycyIsImluaXRpYWxUQ05hbWUiLCJ0Y1Bvc2l0aW9uIiwiaW5pdGlhbFRDIiwiU2V0IiwiZ2V0VmlsbGFnZXJUYXNrRGV0YWlscyIsImlzVmlsbGFnZXJCdXN5IiwiaGFuZGxlUmVzdW1lR2FtZSIsInNhdmVkU3RhdGUiLCJzb2xkaWVycyIsIm1pZ3JhdGVkTWlsaXRhcnkiLCJzIiwiZmluYWxCdWlsZGluZ3MiLCJvY2N1cGllZENlbGxzIiwidmFsdWVzIiwiZmxhdCIsInRjUG9zIiwidGNOYW1lIiwiZmlyc3RCdWlsZGluZyIsIm1pZ3JhdGVkIiwiZW50cmllcyIsImluc3RhbmNlcyIsImluc3QiLCJub2Rlc1RvU2V0IiwidW5kZWZpbmVkIiwiYyIsIm1ham9yVGFza0luUHJvZ3Jlc3MiLCJoYW5kbGVFdmVudENob2ljZSIsImNob2ljZSIsInRleHQiLCJtaXNzaW5nUmVzIiwiam9pbiIsIm5lZ2F0aXZlQ29zdCIsImlzU3VjY2VzcyIsInN1Y2Nlc3NDaGFuY2UiLCJlZmZlY3RzIiwic3VjY2Vzc0VmZmVjdHMiLCJmYWlsdXJlRWZmZWN0cyIsIkFycmF5IiwiaXNBcnJheSIsIm1pbiIsInJlc291cmNlIiwibG9nIiwiaGFuZGxlSW5pdGlhdGVCdWlsZCIsInJlY3QiLCJoYW5kbGVTdGFydFBsYWNlbWVudCIsImJ1aWxkaW5nSWQiLCJtaXNzaW5nIiwicmVzIiwibW9kZSIsImhhbmRsZUNvbmZpcm1QbGFjZW1lbnQiLCJidWlsZGVyIiwidiIsInRhc2tQYXlsb2FkIiwidGFza0lkIiwibmV3Q29uc3RydWN0aW9uIiwibmV3VGFzayIsImhhbmRsZUNhbmNlbFBsYXllckFjdGlvbiIsImhhbmRsZURlbW9saXNoQnVpbGRpbmciLCJidWlsZGluZ0luc3RhbmNlIiwicmVmdW5kIiwicmVmdW5kTWVzc2FnZVBhcnRzIiwiaGFuZGxlVXBkYXRlQnVpbGRpbmciLCJoYW5kbGVUcmFpblZpbGxhZ2VycyIsInZpbGxhZ2VyQ29zdCIsInRvdGFsQ29zdCIsImhhbmRsZVRyYWluVW5pdHMiLCJ0cmFpbmluZ0J1aWxkaW5nIiwiaGFuZGxlRGlzbWlzc1NwZWNpZmljVW5pdCIsInVuaXQiLCJ1bml0VHlwZU5hbWUiLCJoYW5kbGVVcGRhdGVVbml0IiwidXBkYXRlZFVuaXQiLCJoYW5kbGVBc3NpZ25WaWxsYWdlcnNUb05vZGUiLCJub2RlSWQiLCJpZGxlVmlsbGFnZXJzIiwiY2FwcGVkQ291bnQiLCJ2aWxsYWdlcnNUb0Fzc2lnbiIsInZpbGxhZ2VySWRzVG9Bc3NpZ24iLCJ0YXJnZXROb2RlIiwiZXhpc3RpbmdUYXNrIiwiaGFuZGxlUmVjYWxsVmlsbGFnZXJzIiwidmlsbGFnZXJzVG9SZWNhbGwiLCJ0YXNrSW5kZXgiLCJmaW5kSW5kZXgiLCJyZW1haW5pbmdWaWxsYWdlcnMiLCJfIiwiY29uc3RydWN0aW9uIiwidG90YWxXb3JrIiwib2xkV29ya2VyQ291bnQiLCJ0aW1lRWxhcHNlZCIsIndvcmtEb25lIiwid29ya1JlbWFpbmluZyIsIm5ld1dvcmtlckNvdW50IiwibmV3UmVtYWluaW5nRHVyYXRpb24iLCJoYW5kbGVBc3NpZ25WaWxsYWdlcnNUb0NvbnN0cnVjdGlvbiIsImNvbnN0cnVjdGlvbklkIiwiYmFzZUR1cmF0aW9uIiwidXBkYXRlZFZpbGxhZ2VySWRzIiwiaGFuZGxlQXNzaWduVmlsbGFnZXJzIiwiaGFuZGxlQWR2YW5jZUFnZSIsImhhbmRsZUV4aXRHYW1lIiwiaGFuZGxlRGVsZXRlR2FtZSIsImhhbmRsZVRvZ2dsZVVubGltaXRlZFJlc291cmNlcyIsIm5ld01vZGUiLCJidWlsZGluZ0NvdW50cyIsInJlZHVjZSIsImFjYyIsImlkbGVWaWxsYWdlckNvdW50IiwiYXNzaWdubWVudFRhcmdldCIsImNsb3NlQWxsUGFuZWxzIiwiaW5zdGFuY2VJZCIsImhhbmRsZU9wZW5CdWlsZGluZ1BhbmVsIiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiaXNBbnlQYW5lbE9wZW4iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbmRlckNvbnRlbnQiLCJvbk5ld0dhbWUiLCJvblJlc3VtZUdhbWUiLCJzYXZlZEdhbWVzIiwib25EZWxldGVHYW1lIiwib25FdmVudENob2ljZSIsInVuaXRMaXN0IiwiYnVpbGRpbmdMaXN0Iiwib25PcGVuVW5pdFBhbmVsIiwib25PcGVuQnVpbGRpbmdQYW5lbCIsIm9uT3BlbkFsbEJ1aWxkaW5nc1BhbmVsIiwib25Db25maXJtUGxhY2VtZW50Iiwib25DYW5jZWxQbGF5ZXJBY3Rpb24iLCJvbkJ1aWxkaW5nQ2xpY2siLCJidWlsZGluZyIsIm1hcERpbWVuc2lvbnMiLCJvbkV4aXRHYW1lIiwib25PcGVuU2V0dGluZ3NQYW5lbCIsIm9uT3BlbkNpdlBhbmVsIiwib25PcGVuQXNzaWdubWVudFBhbmVsIiwib25PcGVuQ29uc3RydWN0aW9uUGFuZWwiLCJnYXRoZXJJbmZvIiwib25DbG9zZSIsIm9uU3RhcnRQbGFjZW1lbnQiLCJvblVwZGF0ZVVuaXQiLCJvbkRpc21pc3NVbml0Iiwib25Jbml0aWF0ZUJ1aWxkIiwicGFuZWxTdGF0ZSIsIm9uVXBkYXRlQnVpbGRpbmciLCJvbkRlbW9saXNoQnVpbGRpbmciLCJvblRyYWluVW5pdHMiLCJvblRyYWluVmlsbGFnZXJzIiwib25BZHZhbmNlQWdlIiwib25Bc3NpZ25WaWxsYWdlcnMiLCJvblJlY2FsbFZpbGxhZ2VycyIsIm9wYWNpdHkiLCJvbk9wYWNpdHlDaGFuZ2UiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwiYXJpYS1sYWJlbCIsIm9uUmVtb3ZlTm90aWZpY2F0aW9uIiwibWFpbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/page.tsx\n"));

/***/ })

});